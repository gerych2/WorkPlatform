"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/gamification/referral/route";
exports.ids = ["app/api/gamification/referral/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Freferral%2Froute&page=%2Fapi%2Fgamification%2Freferral%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Freferral%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Freferral%2Froute&page=%2Fapi%2Fgamification%2Freferral%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Freferral%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_mobile_app_api_gamification_referral_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/gamification/referral/route.ts */ \"(rsc)/./app/api/gamification/referral/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/gamification/referral/route\",\n        pathname: \"/api/gamification/referral\",\n        filename: \"route\",\n        bundlePath: \"app/api/gamification/referral/route\"\n    },\n    resolvedPagePath: \"D:\\\\mobile\\\\app\\\\api\\\\gamification\\\\referral\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_mobile_app_api_gamification_referral_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/gamification/referral/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnYW1pZmljYXRpb24lMkZyZWZlcnJhbCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2FtaWZpY2F0aW9uJTJGcmVmZXJyYWwlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnYW1pZmljYXRpb24lMkZyZWZlcnJhbCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbW9iaWxlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDbW9iaWxlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ007QUFDbkY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvPzdiZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbW9iaWxlXFxcXGFwcFxcXFxhcGlcXFxcZ2FtaWZpY2F0aW9uXFxcXHJlZmVycmFsXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nYW1pZmljYXRpb24vcmVmZXJyYWwvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nYW1pZmljYXRpb24vcmVmZXJyYWxcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dhbWlmaWNhdGlvbi9yZWZlcnJhbC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXG1vYmlsZVxcXFxhcHBcXFxcYXBpXFxcXGdhbWlmaWNhdGlvblxcXFxyZWZlcnJhbFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nYW1pZmljYXRpb24vcmVmZXJyYWwvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Freferral%2Froute&page=%2Fapi%2Fgamification%2Freferral%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Freferral%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/gamification/referral/route.ts":
/*!************************************************!*\
  !*** ./app/api/gamification/referral/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_gamification_referralService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/gamification/referralService */ \"(rsc)/./lib/gamification/referralService.ts\");\n\n\nconst referralService = new _lib_gamification_referralService__WEBPACK_IMPORTED_MODULE_1__.ReferralService();\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get(\"userId\");\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const stats = await referralService.getReferralStats(parseInt(userId));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: stats\n        });\n    } catch (error) {\n        console.error(\"Error fetching referral stats:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch referral stats\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { userId, referralCode } = body;\n        if (!userId || !referralCode) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User ID and referral code are required\"\n            }, {\n                status: 400\n            });\n        }\n        const result = await referralService.useReferralCode(parseInt(userId), referralCode);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result);\n    } catch (error) {\n        console.error(\"Error using referral code:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to use referral code\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const body = await request.json();\n        const { userId } = body;\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const referralCode = await referralService.createReferralCode(parseInt(userId));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            referralCode\n        });\n    } catch (error) {\n        console.error(\"Error creating referral code:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create referral code\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dhbWlmaWNhdGlvbi9yZWZlcnJhbC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUN1QjtBQUU5RSxNQUFNRSxrQkFBa0IsSUFBSUQsOEVBQWVBO0FBRXBDLGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsU0FBU0gsYUFBYUksR0FBRyxDQUFDO1FBRWhDLElBQUksQ0FBQ0QsUUFBUTtZQUNYLE9BQU9SLGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzNFO1FBRUEsTUFBTUMsUUFBUSxNQUFNWCxnQkFBZ0JZLGdCQUFnQixDQUFDQyxTQUFTUDtRQUU5RCxPQUFPUixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVNLFNBQVM7WUFBTUMsTUFBTUo7UUFBTTtJQUN4RCxFQUFFLE9BQU9GLE9BQU87UUFDZE8sUUFBUVAsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT1gsa0ZBQVlBLENBQUNVLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFpQyxHQUMxQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVPLEtBQUtmLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNZ0IsT0FBTyxNQUFNaEIsUUFBUU0sSUFBSTtRQUMvQixNQUFNLEVBQUVGLE1BQU0sRUFBRWEsWUFBWSxFQUFFLEdBQUdEO1FBRWpDLElBQUksQ0FBQ1osVUFBVSxDQUFDYSxjQUFjO1lBQzVCLE9BQU9yQixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQXlDLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUM5RjtRQUVBLE1BQU1VLFNBQVMsTUFBTXBCLGdCQUFnQnFCLGVBQWUsQ0FBQ1IsU0FBU1AsU0FBU2E7UUFFdkUsT0FBT3JCLGtGQUFZQSxDQUFDVSxJQUFJLENBQUNZO0lBQzNCLEVBQUUsT0FBT1gsT0FBTztRQUNkTyxRQUFRUCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPWCxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQThCLEdBQ3ZDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZVksSUFBSXBCLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNZ0IsT0FBTyxNQUFNaEIsUUFBUU0sSUFBSTtRQUMvQixNQUFNLEVBQUVGLE1BQU0sRUFBRSxHQUFHWTtRQUVuQixJQUFJLENBQUNaLFFBQVE7WUFDWCxPQUFPUixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQXNCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMzRTtRQUVBLE1BQU1TLGVBQWUsTUFBTW5CLGdCQUFnQnVCLGtCQUFrQixDQUFDVixTQUFTUDtRQUV2RSxPQUFPUixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVNLFNBQVM7WUFBTUs7UUFBYTtJQUN6RCxFQUFFLE9BQU9WLE9BQU87UUFDZE8sUUFBUVAsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT1gsa0ZBQVlBLENBQUNVLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFpQyxHQUMxQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2FwcC9hcGkvZ2FtaWZpY2F0aW9uL3JlZmVycmFsL3JvdXRlLnRzPzQyODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgUmVmZXJyYWxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2dhbWlmaWNhdGlvbi9yZWZlcnJhbFNlcnZpY2UnXG5cbmNvbnN0IHJlZmVycmFsU2VydmljZSA9IG5ldyBSZWZlcnJhbFNlcnZpY2UoKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgdXNlcklkID0gc2VhcmNoUGFyYW1zLmdldCgndXNlcklkJylcblxuICAgIGlmICghdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHJlZmVycmFsU2VydmljZS5nZXRSZWZlcnJhbFN0YXRzKHBhcnNlSW50KHVzZXJJZCkpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogc3RhdHMgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZWZlcnJhbCBzdGF0czonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHJlZmVycmFsIHN0YXRzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgeyB1c2VySWQsIHJlZmVycmFsQ29kZSB9ID0gYm9keVxuXG4gICAgaWYgKCF1c2VySWQgfHwgIXJlZmVycmFsQ29kZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVc2VyIElEIGFuZCByZWZlcnJhbCBjb2RlIGFyZSByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZmVycmFsU2VydmljZS51c2VSZWZlcnJhbENvZGUocGFyc2VJbnQodXNlcklkKSwgcmVmZXJyYWxDb2RlKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXNpbmcgcmVmZXJyYWwgY29kZTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVzZSByZWZlcnJhbCBjb2RlJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gYm9keVxuXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IHJlZmVycmFsQ29kZSA9IGF3YWl0IHJlZmVycmFsU2VydmljZS5jcmVhdGVSZWZlcnJhbENvZGUocGFyc2VJbnQodXNlcklkKSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGUgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZWZlcnJhbCBjb2RlOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHJlZmVycmFsIGNvZGUnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUmVmZXJyYWxTZXJ2aWNlIiwicmVmZXJyYWxTZXJ2aWNlIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInVzZXJJZCIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInN0YXRzIiwiZ2V0UmVmZXJyYWxTdGF0cyIsInBhcnNlSW50Iiwic3VjY2VzcyIsImRhdGEiLCJjb25zb2xlIiwiUE9TVCIsImJvZHkiLCJyZWZlcnJhbENvZGUiLCJyZXN1bHQiLCJ1c2VSZWZlcnJhbENvZGUiLCJQVVQiLCJjcmVhdGVSZWZlcnJhbENvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/gamification/referral/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/email/emailService.ts":
/*!***********************************!*\
  !*** ./lib/email/emailService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmailService: () => (/* binding */ EmailService),\n/* harmony export */   emailService: () => (/* binding */ emailService)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n\nclass EmailService {\n    constructor(){\n        this.initialize();\n    }\n    initialize() {\n        // Проверяем наличие Gmail настроек\n        this.isDevelopment = !process.env.EMAIL_HOST || !process.env.EMAIL_USER || !process.env.EMAIL_PASS;\n        console.log(\"\\uD83D\\uDD27 EmailService инициализация:\");\n        console.log(`   EMAIL_HOST: ${process.env.EMAIL_HOST || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_USER: ${process.env.EMAIL_USER || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_PASS: ${process.env.EMAIL_PASS ? \"УСТАНОВЛЕН\" : \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   Режим: ${this.isDevelopment ? \"РАЗРАБОТКИ\" : \"ПРОДАКШЕН\"}`);\n        if (this.isDevelopment) {\n            // Для разработки используем мок-транспорт\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                streamTransport: true,\n                newline: \"unix\",\n                buffer: true\n            });\n        } else {\n            // Для продакшена используем реальный SMTP\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                host: \"smtp.gmail.com\",\n                port: 587,\n                secure: false,\n                auth: {\n                    user: process.env.EMAIL_USER || \"\",\n                    pass: process.env.EMAIL_PASS || \"\"\n                },\n                tls: {\n                    rejectUnauthorized: false\n                }\n            });\n        }\n    }\n    // Переинициализация после загрузки переменных окружения\n    reinitialize() {\n        this.initialize();\n    }\n    // Проверка подключения\n    async verifyConnection() {\n        try {\n            if (this.isDevelopment) {\n                console.log(\"✅ Email сервер готов к отправке (режим разработки)\");\n                return true;\n            }\n            // Проверяем Gmail SMTP подключение\n            await this.transporter.verify();\n            console.log(\"✅ Email сервер готов к отправке\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка подключения к email серверу:\", error);\n            return false;\n        }\n    }\n    // Отправка email\n    async sendEmail(to, template) {\n        try {\n            if (this.isDevelopment) {\n                // В режиме разработки логируем с деталями\n                console.log(\"\\uD83D\\uDCE7 [DEV] Email отправлен:\");\n                console.log(`   Кому: ${to}`);\n                console.log(`   Тема: ${template.subject}`);\n                console.log(`   HTML: ${template.html.substring(0, 100)}...`);\n                console.log(`   📝 В продакшене это письмо будет отправлено на: ${to}`);\n                return true;\n            }\n            // Используем Gmail SMTP для отправки\n            const mailOptions = {\n                from: process.env.EMAIL_USER,\n                to: to,\n                subject: template.subject,\n                html: template.html,\n                text: template.text\n            };\n            await this.transporter.sendMail(mailOptions);\n            console.log(\"\\uD83D\\uDCE7 Email отправлен через Gmail:\", to);\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка отправки email:\", error);\n            return false;\n        }\n    }\n    // Отправка уведомления о новом заказе (исполнителю)\n    async sendNewOrderNotification(executorEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(executorEmail, {\n                subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <h2 style=\"color: #333;\">Детали заказа:</h2>\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n                <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\n                <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\n                <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\n                <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\n                <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\n                <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(executorEmail, {\n            subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <h2 style=\"color: #333;\">Детали заказа:</h2>\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n              <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\n              <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\n              <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\n              <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\n              <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\n              <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о выполнении заказа (клиенту)\n    async sendOrderCompletedNotification(clientEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(clientEmail, {\n                subject: \"✅ Ваш заказ выполнен!\",\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n                <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\n                <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\n                <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(clientEmail, {\n            subject: \"✅ Ваш заказ выполнен!\",\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n              <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\n              <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\n              <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о повышении уровня\n    async sendLevelUpNotification(userEmail, levelData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(userEmail, {\n                subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\n              <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\n                <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\n                <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\n                <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n            });\n        }\n        return await this.sendEmail(userEmail, {\n            subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\n            <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\n              <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\n              <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\n              <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n        });\n    }\n    // Отправка новостной рассылки\n    async sendNewsletter(emails, newsletterData) {\n        if (this.isDevelopment) {\n            let success = 0;\n            let failed = 0;\n            for (const email of emails){\n                const result = await this.sendEmail(email, {\n                    subject: newsletterData.subject,\n                    html: `\n            <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n              <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n                <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\n              </div>\n              \n              <div style=\"padding: 20px; background: #f8f9fa;\">\n                <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\n                  ${newsletterData.content}\n                </div>\n              </div>\n            </div>\n          `,\n                    text: newsletterData.textContent || newsletterData.subject\n                });\n                if (result) {\n                    success++;\n                } else {\n                    failed++;\n                }\n            }\n            return {\n                success,\n                failed\n            };\n        }\n        let success = 0;\n        let failed = 0;\n        for (const email of emails){\n            const result = await this.sendEmail(email, {\n                subject: newsletterData.subject,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\n                ${newsletterData.content}\n              </div>\n            </div>\n          </div>\n        `,\n                text: newsletterData.textContent || newsletterData.subject\n            });\n            if (result) {\n                success++;\n            } else {\n                failed++;\n            }\n        }\n        return {\n            success,\n            failed\n        };\n    }\n}\nconst emailService = new EmailService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVcsSUFBSU4sZUFBZS9CLE9BQU87WUFDNUQ7WUFFQSxJQUFJbUMsUUFBUTtnQkFDVkg7WUFDRixPQUFPO2dCQUNMQztZQUNGO1FBQ0Y7UUFFQSxPQUFPO1lBQUVEO1lBQVNDO1FBQU87SUFDM0I7QUFDRjtBQUVPLE1BQU1LLGVBQWUsSUFBSXJFLGVBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvLi9saWIvZW1haWwvZW1haWxTZXJ2aWNlLnRzP2M1ZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcidcbmltcG9ydCB7IGZvcm1zcHJlZVNlcnZpY2UgfSBmcm9tICcuL2Zvcm1zcHJlZVNlcnZpY2UnXG5cbmludGVyZmFjZSBFbWFpbENvbmZpZyB7XG4gIGhvc3Q6IHN0cmluZ1xuICBwb3J0OiBudW1iZXJcbiAgc2VjdXJlOiBib29sZWFuXG4gIGF1dGg6IHtcbiAgICB1c2VyOiBzdHJpbmdcbiAgICBwYXNzOiBzdHJpbmdcbiAgfVxufVxuXG5pbnRlcmZhY2UgRW1haWxUZW1wbGF0ZSB7XG4gIHN1YmplY3Q6IHN0cmluZ1xuICBodG1sOiBzdHJpbmdcbiAgdGV4dD86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgRW1haWxTZXJ2aWNlIHtcbiAgcHJpdmF0ZSB0cmFuc3BvcnRlciE6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXJcbiAgcHJpdmF0ZSBpc0RldmVsb3BtZW50ITogYm9vbGVhblxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKSB7XG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1IEdtYWlsINC90LDRgdGC0YDQvtC10LpcbiAgICB0aGlzLmlzRGV2ZWxvcG1lbnQgPSAhcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAhcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAhcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SnIEVtYWlsU2VydmljZSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjzonKVxuICAgIGNvbnNvbGUubG9nKGAgICBFTUFJTF9IT1NUOiAke3Byb2Nlc3MuZW52LkVNQUlMX0hPU1QgfHwgJ9Cd0JUg0KPQodCi0JDQndCe0JLQm9CV0J0nfWApXG4gICAgY29uc29sZS5sb2coYCAgIEVNQUlMX1VTRVI6ICR7cHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAn0J3QlSDQo9Ch0KLQkNCd0J7QktCb0JXQnSd9YClcbiAgICBjb25zb2xlLmxvZyhgICAgRU1BSUxfUEFTUzogJHtwcm9jZXNzLmVudi5FTUFJTF9QQVNTID8gJ9Cj0KHQotCQ0J3QntCS0JvQldCdJyA6ICfQndCVINCj0KHQotCQ0J3QntCS0JvQldCdJ31gKVxuICAgIGNvbnNvbGUubG9nKGAgICDQoNC10LbQuNC8OiAke3RoaXMuaXNEZXZlbG9wbWVudCA/ICfQoNCQ0JfQoNCQ0JHQntCi0JrQmCcgOiAn0J/QoNCe0JTQkNCa0KjQldCdJ31gKVxuICAgIFxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIC8vINCU0LvRjyDRgNCw0LfRgNCw0LHQvtGC0LrQuCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0Lot0YLRgNCw0L3RgdC/0L7RgNGCXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBzdHJlYW1UcmFuc3BvcnQ6IHRydWUsXG4gICAgICAgIG5ld2xpbmU6ICd1bml4JyxcbiAgICAgICAgYnVmZmVyOiB0cnVlXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDQlNC70Y8g0L/RgNC+0LTQsNC60YjQtdC90LAg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YDQtdCw0LvRjNC90YvQuSBTTVRQXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBob3N0OiAnc210cC5nbWFpbC5jb20nLFxuICAgICAgICBwb3J0OiA1ODcsXG4gICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICcnLFxuICAgICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgdGxzOiB7XG4gICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0LXRgNC10LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INC/0LXRgNC10LzQtdC90L3Ri9GFINC+0LrRgNGD0LbQtdC90LjRj1xuICByZWluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAg0L/QvtC00LrQu9GO0YfQtdC90LjRj1xuICBhc3luYyB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgRW1haWwg0YHQtdGA0LLQtdGAINCz0L7RgtC+0LIg0Log0L7RgtC/0YDQsNCy0LrQtSAo0YDQtdC20LjQvCDRgNCw0LfRgNCw0LHQvtGC0LrQuCknKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwgR21haWwgU01UUCDQv9C+0LTQutC70Y7Rh9C10L3QuNC1XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMudHJhbnNwb3J0ZXIudmVyaWZ5KClcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRW1haWwg0YHQtdGA0LLQtdGAINCz0L7RgtC+0LIg0Log0L7RgtC/0YDQsNCy0LrQtScpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg0J7RiNC40LHQutCwINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LogZW1haWwg0YHQtdGA0LLQtdGA0YM6JywgZXJyb3IpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwIGVtYWlsXG4gIGFzeW5jIHNlbmRFbWFpbCh0bzogc3RyaW5nLCB0ZW1wbGF0ZTogRW1haWxUZW1wbGF0ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIC8vINCSINGA0LXQttC40LzQtSDRgNCw0LfRgNCw0LHQvtGC0LrQuCDQu9C+0LPQuNGA0YPQtdC8INGBINC00LXRgtCw0LvRj9C80LhcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6cgW0RFVl0gRW1haWwg0L7RgtC/0YDQsNCy0LvQtdC9OicpXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDQmtC+0LzRgzogJHt0b31gKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAg0KLQtdC80LA6ICR7dGVtcGxhdGUuc3ViamVjdH1gKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAgSFRNTDogJHt0ZW1wbGF0ZS5odG1sLnN1YnN0cmluZygwLCAxMDApfS4uLmApXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDwn5OdINCSINC/0YDQvtC00LDQutGI0LXQvdC1INGN0YLQviDQv9C40YHRjNC80L4g0LHRg9C00LXRgiDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwOiAke3RvfWApXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IEdtYWlsIFNNVFAg0LTQu9GPINC+0YLQv9GA0LDQstC60LhcbiAgICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxuICAgICAgICB0bzogdG8sXG4gICAgICAgIHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG4gICAgICAgIGh0bWw6IHRlbXBsYXRlLmh0bWwsXG4gICAgICAgIHRleHQ6IHRlbXBsYXRlLnRleHRcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy50cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucylcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OnIEVtYWlsINC+0YLQv9GA0LDQstC70LXQvSDRh9C10YDQtdC3IEdtYWlsOicsIHRvKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MINCe0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4IGVtYWlsOicsIGVycm9yKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8g0J7RgtC/0YDQsNCy0LrQsCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC90L7QstC+0Lwg0LfQsNC60LDQt9C1ICjQuNGB0L/QvtC70L3QuNGC0LXQu9GOKVxuICBhc3luYyBzZW5kTmV3T3JkZXJOb3RpZmljYXRpb24oZXhlY3V0b3JFbWFpbDogc3RyaW5nLCBvcmRlckRhdGE6IGFueSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbChleGVjdXRvckVtYWlsLCB7XG4gICAgICAgIHN1YmplY3Q6ICfwn46vINCd0L7QstGL0Lkg0LfQsNC60LDQtyDQtNC70Y8g0LLQsNGBIScsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ITwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMzMzO1wiPtCU0LXRgtCw0LvQuCDQt9Cw0LrQsNC30LA6PC9oMj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCa0LvQuNC10L3Rgjo8L3N0cm9uZz4gJHtvcmRlckRhdGEuY2xpZW50TmFtZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JDQtNGA0LXRgTo8L3N0cm9uZz4gJHtvcmRlckRhdGEuYWRkcmVzcyB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KLQtdC70LXRhNC+0L06PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnBob25lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEub3JkZXJEYXRlIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QktGA0LXQvNGPOjwvc3Ryb25nPiAke29yZGVyRGF0YS5vcmRlclRpbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCm0LXQvdCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCd0L7QstGL0Lkg0LfQsNC60LDQtyEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmtC70LjQtdC90YI6ICR7b3JkZXJEYXRhLmNsaWVudE5hbWV9LCDQptC10L3QsDogJHtvcmRlckRhdGEudG90YWxQcmljZX0g4oK9YFxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwoZXhlY3V0b3JFbWFpbCwge1xuICAgICAgc3ViamVjdDogJ/Cfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3INC00LvRjyDQstCw0YEhJyxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ITwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QlNC10YLQsNC70Lgg0LfQsNC60LDQt9CwOjwvaDI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QmtC70LjQtdC90YI6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmNsaWVudE5hbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QkNC00YDQtdGBOjwvc3Ryb25nPiAke29yZGVyRGF0YS5hZGRyZXNzIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KLQtdC70LXRhNC+0L06PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnBob25lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JTQsNGC0LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLm9yZGVyRGF0ZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCS0YDQtdC80Y86PC9zdHJvbmc+ICR7b3JkZXJEYXRhLm9yZGVyVGltZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCm0LXQvdCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAsXG4gICAgICB0ZXh0OiBg0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ISDQo9GB0LvRg9Cz0LA6ICR7b3JkZXJEYXRhLnNlcnZpY2VEZXNjcmlwdGlvbn0sINCa0LvQuNC10L3RgjogJHtvcmRlckRhdGEuY2xpZW50TmFtZX0sINCm0LXQvdCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgfSlcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQstGL0L/QvtC70L3QtdC90LjQuCDQt9Cw0LrQsNC30LAgKNC60LvQuNC10L3RgtGDKVxuICBhc3luYyBzZW5kT3JkZXJDb21wbGV0ZWROb3RpZmljYXRpb24oY2xpZW50RW1haWw6IHN0cmluZywgb3JkZXJEYXRhOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwoY2xpZW50RW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogJ+KchSDQktCw0Ygg0LfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9IScsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPuKchSDQl9Cw0LrQsNC3INCy0YvQv9C+0LvQvdC10L0hPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7XCI+0JLQsNGIINC30LDQutCw0Lcg0YPRgdC/0LXRiNC90L4g0LLRi9C/0L7Qu9C90LXQvSE8L2gyPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7Qo9GB0LvRg9Cz0LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnNlcnZpY2VEZXNjcmlwdGlvbiB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JjRgdC/0L7Qu9C90LjRgtC10LvRjDo8L3N0cm9uZz4gJHtvcmRlckRhdGEuZXhlY3V0b3JOYW1lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsCDQstGL0L/QvtC70L3QtdC90LjRjzo8L3N0cm9uZz4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygncnUtUlUnKX08L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QodGD0LzQvNCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmNGB0L/QvtC70L3QuNGC0LXQu9GMOiAke29yZGVyRGF0YS5leGVjdXRvck5hbWV9LCDQodGD0LzQvNCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbChjbGllbnRFbWFpbCwge1xuICAgICAgc3ViamVjdDogJ+KchSDQktCw0Ygg0LfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9IScsXG4gICAgICBodG1sOiBgXG4gICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJjb2xvcjogd2hpdGU7IG1hcmdpbjogMDtcIj7inIUg0JfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9ITwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QktCw0Ygg0LfQsNC60LDQtyDRg9GB0L/QtdGI0L3QviDQstGL0L/QvtC70L3QtdC9ITwvaDI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QmNGB0L/QvtC70L3QuNGC0LXQu9GMOjwvc3Ryb25nPiAke29yZGVyRGF0YS5leGVjdXRvck5hbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsCDQstGL0L/QvtC70L3QtdC90LjRjzo8L3N0cm9uZz4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygncnUtUlUnKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KHRg9C80LzQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEudG90YWxQcmljZSB8fCAwfSDigr08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgLFxuICAgICAgdGV4dDogYNCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmNGB0L/QvtC70L3QuNGC0LXQu9GMOiAke29yZGVyRGF0YS5leGVjdXRvck5hbWV9LCDQodGD0LzQvNCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgfSlcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LLRi9GI0LXQvdC40Lgg0YPRgNC+0LLQvdGPXG4gIGFzeW5jIHNlbmRMZXZlbFVwTm90aWZpY2F0aW9uKHVzZXJFbWFpbDogc3RyaW5nLCBsZXZlbERhdGE6IGFueSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbCh1c2VyRW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogYPCfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0hYCxcbiAgICAgICAgaHRtbDogYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ3MDAgMCUsICNmZmVkNGUgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMDtcIj7wn46JINCf0L7Qt9C00YDQsNCy0LvRj9C10LwhPC9oMT5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMTBweCAwIDAgMDtcIj7QktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bGV2ZWxEYXRhLm5ld0xldmVsfSE8L2gyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiA0OHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4O1wiPiR7bGV2ZWxEYXRhLmljb259PC9kaXY+XG4gICAgICAgICAgICAgICAgPGgzIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMDtcIj4ke2xldmVsRGF0YS50aXRsZX08L2gzPlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM2NjY7IG1hcmdpbjogMTBweCAwO1wiPiR7bGV2ZWxEYXRhLmRlc2NyaXB0aW9uIHx8ICfQntGC0LvQuNGH0L3QsNGPINGA0LDQsdC+0YLQsCEnfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCf0L7Qt9C00YDQsNCy0LvRj9C10LwhINCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9IC0gJHtsZXZlbERhdGEudGl0bGV9IWBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZEVtYWlsKHVzZXJFbWFpbCwge1xuICAgICAgc3ViamVjdDogYPCfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0hYCxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ3MDAgMCUsICNmZmVkNGUgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDA7XCI+8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ITwvaDE+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMzsgbWFyZ2luOiAxMHB4IDAgMCAwO1wiPtCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9ITwvaDI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogNDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDtcIj4ke2xldmVsRGF0YS5pY29ufTwvZGl2PlxuICAgICAgICAgICAgICA8aDMgc3R5bGU9XCJjb2xvcjogIzMzMzsgbWFyZ2luOiAwO1wiPiR7bGV2ZWxEYXRhLnRpdGxlfTwvaDM+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM2NjY7IG1hcmdpbjogMTBweCAwO1wiPiR7bGV2ZWxEYXRhLmRlc2NyaXB0aW9uIHx8ICfQntGC0LvQuNGH0L3QsNGPINGA0LDQsdC+0YLQsCEnfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAsXG4gICAgICB0ZXh0OiBg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0gLSAke2xldmVsRGF0YS50aXRsZX0hYFxuICAgIH0pXG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwINC90L7QstC+0YHRgtC90L7QuSDRgNCw0YHRgdGL0LvQutC4XG4gIGFzeW5jIHNlbmROZXdzbGV0dGVyKGVtYWlsczogc3RyaW5nW10sIG5ld3NsZXR0ZXJEYXRhOiBhbnkpOiBQcm9taXNlPHsgc3VjY2VzczogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9PiB7XG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgbGV0IHN1Y2Nlc3MgPSAwXG4gICAgICBsZXQgZmFpbGVkID0gMFxuXG4gICAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRFbWFpbChlbWFpbCwge1xuICAgICAgICAgIHN1YmplY3Q6IG5ld3NsZXR0ZXJEYXRhLnN1YmplY3QsXG4gICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+8J+ToiAke25ld3NsZXR0ZXJEYXRhLnN1YmplY3R9PC9oMT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgICAgICAke25ld3NsZXR0ZXJEYXRhLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCxcbiAgICAgICAgICB0ZXh0OiBuZXdzbGV0dGVyRGF0YS50ZXh0Q29udGVudCB8fCBuZXdzbGV0dGVyRGF0YS5zdWJqZWN0XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgc3VjY2VzcysrXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmFpbGVkKytcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzLCBmYWlsZWQgfVxuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMFxuICAgIGxldCBmYWlsZWQgPSAwXG5cbiAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZW5kRW1haWwoZW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogbmV3c2xldHRlckRhdGEuc3ViamVjdCxcbiAgICAgICAgaHRtbDogYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+8J+ToiAke25ld3NsZXR0ZXJEYXRhLnN1YmplY3R9PC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxuICAgICAgICAgICAgICAgICR7bmV3c2xldHRlckRhdGEuY29udGVudH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogbmV3c2xldHRlckRhdGEudGV4dENvbnRlbnQgfHwgbmV3c2xldHRlckRhdGEuc3ViamVjdFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBzdWNjZXNzKytcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhaWxlZCsrXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZW1haWxTZXJ2aWNlID0gbmV3IEVtYWlsU2VydmljZSgpXG4iXSwibmFtZXMiOlsibm9kZW1haWxlciIsIkVtYWlsU2VydmljZSIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbGl6ZSIsImlzRGV2ZWxvcG1lbnQiLCJwcm9jZXNzIiwiZW52IiwiRU1BSUxfSE9TVCIsIkVNQUlMX1VTRVIiLCJFTUFJTF9QQVNTIiwiY29uc29sZSIsImxvZyIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic3RyZWFtVHJhbnNwb3J0IiwibmV3bGluZSIsImJ1ZmZlciIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwidGxzIiwicmVqZWN0VW5hdXRob3JpemVkIiwicmVpbml0aWFsaXplIiwidmVyaWZ5Q29ubmVjdGlvbiIsInZlcmlmeSIsImVycm9yIiwic2VuZEVtYWlsIiwidG8iLCJ0ZW1wbGF0ZSIsInN1YmplY3QiLCJodG1sIiwic3Vic3RyaW5nIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidGV4dCIsInNlbmRNYWlsIiwic2VuZE5ld09yZGVyTm90aWZpY2F0aW9uIiwiZXhlY3V0b3JFbWFpbCIsIm9yZGVyRGF0YSIsInNlcnZpY2VEZXNjcmlwdGlvbiIsImNsaWVudE5hbWUiLCJhZGRyZXNzIiwicGhvbmUiLCJvcmRlckRhdGUiLCJvcmRlclRpbWUiLCJ0b3RhbFByaWNlIiwic2VuZE9yZGVyQ29tcGxldGVkTm90aWZpY2F0aW9uIiwiY2xpZW50RW1haWwiLCJleGVjdXRvck5hbWUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwic2VuZExldmVsVXBOb3RpZmljYXRpb24iLCJ1c2VyRW1haWwiLCJsZXZlbERhdGEiLCJuZXdMZXZlbCIsImljb24iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2VuZE5ld3NsZXR0ZXIiLCJlbWFpbHMiLCJuZXdzbGV0dGVyRGF0YSIsInN1Y2Nlc3MiLCJmYWlsZWQiLCJlbWFpbCIsInJlc3VsdCIsImNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImVtYWlsU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/email/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/constants.ts":
/*!***************************************!*\
  !*** ./lib/gamification/constants.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACHIEVEMENTS: () => (/* binding */ ACHIEVEMENTS),\n/* harmony export */   CLIENT_ACHIEVEMENTS: () => (/* binding */ CLIENT_ACHIEVEMENTS),\n/* harmony export */   CLIENT_LEVELS: () => (/* binding */ CLIENT_LEVELS),\n/* harmony export */   EXECUTOR_ACHIEVEMENTS: () => (/* binding */ EXECUTOR_ACHIEVEMENTS),\n/* harmony export */   EXECUTOR_LEVELS: () => (/* binding */ EXECUTOR_LEVELS),\n/* harmony export */   LEVELS: () => (/* binding */ LEVELS),\n/* harmony export */   RARITY_COLORS: () => (/* binding */ RARITY_COLORS),\n/* harmony export */   RARITY_ICONS: () => (/* binding */ RARITY_ICONS),\n/* harmony export */   XP_REWARDS: () => (/* binding */ XP_REWARDS)\n/* harmony export */ });\n// Константы для системы геймификации\n// Конфигурация уровней для клиентов\nconst CLIENT_LEVELS = [\n    {\n        level: 1,\n        title: \"Новичок\",\n        description: \"Добро пожаловать в ProDoAgency!\",\n        icon: \"\\uD83C\\uDF31\",\n        xpRequired: 0,\n        benefits: [\n            \"Базовые функции\",\n            \"Поиск мастеров\",\n            \"Создание заказов\"\n        ],\n        color: \"#6B7280\"\n    },\n    {\n        level: 2,\n        title: \"Активный клиент\",\n        description: \"Вы активно используете платформу\",\n        icon: \"⚡\",\n        xpRequired: 100,\n        benefits: [\n            \"Приоритет в поиске (+20%)\",\n            \"Быстрая поддержка\",\n            \"Уведомления о новых мастерах\",\n            \"Доступ к статистике\"\n        ],\n        color: \"#3B82F6\"\n    },\n    {\n        level: 3,\n        title: \"Постоянный клиент\",\n        description: \"Вы стали постоянным пользователем\",\n        icon: \"⭐\",\n        xpRequired: 300,\n        benefits: [\n            \"VIP поддержка\",\n            \"Эксклюзивные предложения\",\n            \"Приоритет в поиске (+40%)\",\n            \"Ранний доступ к новым функциям\",\n            \"Расширенная аналитика\"\n        ],\n        color: \"#10B981\"\n    },\n    {\n        level: 4,\n        title: \"VIP клиент\",\n        description: \"Вы VIP клиент платформы\",\n        icon: \"\\uD83D\\uDC51\",\n        xpRequired: 600,\n        benefits: [\n            \"Персональный менеджер\",\n            \"Эксклюзивные мастера\",\n            \"Приоритет в поиске (+60%)\",\n            \"Бета-тестирование функций\",\n            \"Приоритетная поддержка\"\n        ],\n        color: \"#8B5CF6\"\n    },\n    {\n        level: 5,\n        title: \"Амбассадор\",\n        description: \"Вы амбассадор платформы!\",\n        icon: \"\\uD83C\\uDFC6\",\n        xpRequired: 1000,\n        benefits: [\n            \"Все привилегии\",\n            \"Участие в программе развития\",\n            \"Эксклюзивные акции\",\n            \"Статус бета-тестера\",\n            \"Влияние на развитие платформы\"\n        ],\n        color: \"#F59E0B\"\n    }\n];\n// Конфигурация уровней для исполнителей\nconst EXECUTOR_LEVELS = [\n    {\n        level: 1,\n        title: \"Новичок\",\n        description: \"Добро пожаловать в ProDoAgency!\",\n        icon: \"\\uD83C\\uDF31\",\n        xpRequired: 0,\n        benefits: [\n            \"Базовые функции\",\n            \"Создание профиля\",\n            \"Просмотр заказов\"\n        ],\n        color: \"#6B7280\"\n    },\n    {\n        level: 2,\n        title: \"Активный мастер\",\n        description: \"Вы активно работаете на платформе\",\n        icon: \"⚡\",\n        xpRequired: 200,\n        benefits: [\n            \"Приоритет в поиске (+30%)\",\n            \"Быстрая верификация\",\n            \"Уведомления о новых заказах\",\n            \"Базовая аналитика\"\n        ],\n        color: \"#3B82F6\"\n    },\n    {\n        level: 3,\n        title: \"Профессионал\",\n        description: \"Вы стали профессионалом\",\n        icon: \"⭐\",\n        xpRequired: 500,\n        benefits: [\n            \"VIP поддержка\",\n            \"Эксклюзивные заказы\",\n            \"Приоритет в поиске (+50%)\",\n            \"Расширенная аналитика\",\n            \"Приоритетные уведомления\"\n        ],\n        color: \"#10B981\"\n    },\n    {\n        level: 4,\n        title: \"Мастер\",\n        description: \"Вы мастер своего дела\",\n        icon: \"\\uD83D\\uDC51\",\n        xpRequired: 1000,\n        benefits: [\n            \"Персональный менеджер\",\n            \"Премиум заказы\",\n            \"Приоритет в поиске (+70%)\",\n            \"Полная аналитика\",\n            \"Эксклюзивные возможности\"\n        ],\n        color: \"#8B5CF6\"\n    },\n    {\n        level: 5,\n        title: \"Эксперт\",\n        description: \"Вы эксперт платформы!\",\n        icon: \"\\uD83C\\uDFC6\",\n        xpRequired: 2000,\n        benefits: [\n            \"Все привилегии\",\n            \"Участие в программе развития\",\n            \"Эксклюзивные возможности\",\n            \"Статус партнера\",\n            \"Влияние на развитие платформы\"\n        ],\n        color: \"#F59E0B\"\n    }\n];\n// Универсальные уровни (для обратной совместимости)\nconst LEVELS = CLIENT_LEVELS;\n// Достижения для клиентов\nconst CLIENT_ACHIEVEMENTS = [\n    // Мотивация к активности\n    {\n        id: \"1\",\n        title: \"Первый поиск\",\n        description: \"Найдите своего первого мастера\",\n        icon: \"\\uD83D\\uDD0D\",\n        xpReward: 50,\n        category: \"activity\",\n        rarity: \"common\",\n        condition: (user)=>user.searchCount >= 1\n    },\n    {\n        id: \"2\",\n        title: \"Критик\",\n        description: \"Оставьте 10 отзывов\",\n        icon: \"⭐\",\n        xpReward: 100,\n        category: \"reviews\",\n        rarity: \"common\",\n        condition: (user)=>user.reviewsCount >= 10\n    },\n    {\n        id: \"3\",\n        title: \"Исследователь\",\n        description: \"Просмотрите 50 профилей мастеров\",\n        icon: \"\\uD83D\\uDD0D\",\n        xpReward: 150,\n        category: \"activity\",\n        rarity: \"rare\",\n        condition: (user)=>user.profilesViewed >= 50\n    },\n    {\n        id: \"4\",\n        title: \"Верный клиент\",\n        description: \"Используйте платформу 3 месяца\",\n        icon: \"\\uD83D\\uDC8E\",\n        xpReward: 200,\n        category: \"activity\",\n        rarity: \"rare\",\n        condition: (user)=>user.monthsActive >= 3\n    },\n    {\n        id: \"5\",\n        title: \"Друг платформы\",\n        description: \"Пригласите 5 друзей\",\n        icon: \"\\uD83D\\uDC65\",\n        xpReward: 300,\n        category: \"referrals\",\n        rarity: \"rare\",\n        condition: (user)=>user.referralCount >= 5\n    },\n    {\n        id: \"6\",\n        title: \"Амбассадор\",\n        description: \"Пригласите 20 друзей\",\n        icon: \"\\uD83C\\uDF96️\",\n        xpReward: 1000,\n        category: \"referrals\",\n        rarity: \"legendary\",\n        condition: (user)=>user.referralCount >= 20\n    }\n];\n// Достижения для исполнителей\nconst EXECUTOR_ACHIEVEMENTS = [\n    // Мотивация к подписке\n    {\n        id: \"1\",\n        title: \"Первая подписка\",\n        description: \"Оформите первую подписку\",\n        icon: \"\\uD83D\\uDCB3\",\n        xpReward: 200,\n        category: \"activity\",\n        rarity: \"common\",\n        condition: (user)=>user.hasActiveSubscription\n    },\n    {\n        id: \"2\",\n        title: \"Качественная работа\",\n        description: \"Получите 20 отзывов на 5 звезд\",\n        icon: \"\\uD83C\\uDF1F\",\n        xpReward: 300,\n        category: \"reviews\",\n        rarity: \"rare\",\n        condition: (user)=>user.fiveStarReviews >= 20\n    },\n    {\n        id: \"3\",\n        title: \"Активный мастер\",\n        description: \"Выполните 30 заказов за месяц\",\n        icon: \"⚡\",\n        xpReward: 400,\n        category: \"orders\",\n        rarity: \"rare\",\n        condition: (user)=>user.monthlyOrders >= 30\n    },\n    {\n        id: \"4\",\n        title: \"Скоростной демон\",\n        description: \"Отвечайте на заказы за 5 минут\",\n        icon: \"\\uD83D\\uDE80\",\n        xpReward: 150,\n        category: \"orders\",\n        rarity: \"common\",\n        condition: (user)=>user.averageResponseTime <= 5\n    },\n    {\n        id: \"5\",\n        title: \"Магнит коллег\",\n        description: \"Пригласите 3 исполнителей\",\n        icon: \"\\uD83E\\uDDF2\",\n        xpReward: 500,\n        category: \"referrals\",\n        rarity: \"rare\",\n        condition: (user)=>user.referralCount >= 3\n    },\n    {\n        id: \"6\",\n        title: \"Верный мастер\",\n        description: \"Работайте на платформе 6 месяцев\",\n        icon: \"\\uD83D\\uDC8E\",\n        xpReward: 1000,\n        category: \"activity\",\n        rarity: \"epic\",\n        condition: (user)=>user.monthsActive >= 6\n    },\n    {\n        id: \"7\",\n        title: \"Неуязвимый\",\n        description: \"Завершите 100 заказов подряд без отмен\",\n        icon: \"\\uD83D\\uDEE1️\",\n        xpReward: 1500,\n        category: \"orders\",\n        rarity: \"legendary\",\n        condition: (user)=>user.consecutiveOrders >= 100\n    }\n];\n// Универсальные достижения (для обратной совместимости)\nconst ACHIEVEMENTS = CLIENT_ACHIEVEMENTS;\n// XP за различные действия\nconst XP_REWARDS = {\n    // Клиенты - активность\n    DAILY_LOGIN: 2,\n    SEARCH_MASTER: 5,\n    VIEW_PROFILE: 1,\n    LEAVE_REVIEW: 10,\n    SHARE_SOCIAL: 3,\n    UPDATE_PROFILE: 5,\n    // Клиенты - рефералы\n    REFERRAL_REGISTRATION: 100,\n    REFERRAL_FIRST_SEARCH: 50,\n    REFERRAL_5_SEARCHES: 100,\n    REFERRAL_20_SEARCHES: 200,\n    // Исполнители - подписки (ГЛАВНАЯ МОТИВАЦИЯ!)\n    FIRST_SUBSCRIPTION: 200,\n    MONTHLY_SUBSCRIPTION: 100,\n    YEARLY_SUBSCRIPTION: 500,\n    SUBSCRIPTION_RENEWAL: 150,\n    // Исполнители - качество\n    GET_5_STAR_REVIEW: 25,\n    GET_4_STAR_REVIEW: 15,\n    GET_3_STAR_REVIEW: 5,\n    COMPLETE_ORDER: 15,\n    RESPOND_5_MIN: 8,\n    RESPOND_1_MIN: 15,\n    // Исполнители - активность\n    EXECUTOR_DAILY_LOGIN: 2,\n    EXECUTOR_UPDATE_PROFILE: 5,\n    UPLOAD_PHOTO: 3,\n    COMPLETE_FAST: 5,\n    // Рефералы исполнителей\n    REFERRAL_EXECUTOR_REGISTRATION: 200,\n    REFERRAL_EXECUTOR_SUBSCRIPTION: 300,\n    REFERRAL_EXECUTOR_5_ORDERS: 100,\n    // Достижения\n    ACHIEVEMENT_COMMON: 0,\n    ACHIEVEMENT_RARE: 25,\n    ACHIEVEMENT_EPIC: 50,\n    ACHIEVEMENT_LEGENDARY: 100\n};\n// Цвета для редкости достижений\nconst RARITY_COLORS = {\n    common: \"#6B7280\",\n    rare: \"#3B82F6\",\n    epic: \"#8B5CF6\",\n    legendary: \"#F59E0B\"\n};\n// Иконки для редкости\nconst RARITY_ICONS = {\n    common: \"⚪\",\n    rare: \"\\uD83D\\uDD35\",\n    epic: \"\\uD83D\\uDFE3\",\n    legendary: \"\\uD83D\\uDFE0\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTVCLGFBQWE7SUFDYkMsb0JBQW9CO0lBQ3BCQyxrQkFBa0I7SUFDbEJDLGtCQUFrQjtJQUNsQkMsdUJBQXVCO0FBQ3pCLEVBQUM7QUFFRCxnQ0FBZ0M7QUFDekIsTUFBTUMsZ0JBQWdCO0lBQzNCQyxRQUFRO0lBQ1JDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxXQUFXO0FBQ2IsRUFBQztBQUVELHNCQUFzQjtBQUNmLE1BQU1DLGVBQWU7SUFDMUJKLFFBQVE7SUFDUkMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFdBQVc7QUFDYixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvZG8tYWdlbmN5Ly4vbGliL2dhbWlmaWNhdGlvbi9jb25zdGFudHMudHM/NDM2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQmtC+0L3RgdGC0LDQvdGC0Ysg0LTQu9GPINGB0LjRgdGC0LXQvNGLINCz0LXQudC80LjRhNC40LrQsNGG0LjQuFxuXG5leHBvcnQgaW50ZXJmYWNlIExldmVsQ29uZmlnIHtcbiAgbGV2ZWw6IG51bWJlclxuICB0aXRsZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgaWNvbjogc3RyaW5nXG4gIHhwUmVxdWlyZWQ6IG51bWJlclxuICBiZW5lZml0czogc3RyaW5nW11cbiAgY29sb3I6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjaGlldmVtZW50Q29uZmlnIHtcbiAgaWQ6IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgaWNvbjogc3RyaW5nXG4gIHhwUmV3YXJkOiBudW1iZXJcbiAgY2F0ZWdvcnk6ICdvcmRlcnMnIHwgJ3Jldmlld3MnIHwgJ3JlZmVycmFscycgfCAnYWN0aXZpdHknIHwgJ3NwZWNpYWwnXG4gIHJhcml0eTogJ2NvbW1vbicgfCAncmFyZScgfCAnZXBpYycgfCAnbGVnZW5kYXJ5J1xuICBjb25kaXRpb246ICh1c2VyOiBhbnkpID0+IGJvb2xlYW5cbn1cblxuLy8g0JrQvtC90YTQuNCz0YPRgNCw0YbQuNGPINGD0YDQvtCy0L3QtdC5INC00LvRjyDQutC70LjQtdC90YLQvtCyXG5leHBvcnQgY29uc3QgQ0xJRU5UX0xFVkVMUzogTGV2ZWxDb25maWdbXSA9IFtcbiAge1xuICAgIGxldmVsOiAxLFxuICAgIHRpdGxlOiBcItCd0L7QstC40YfQvtC6XCIsXG4gICAgZGVzY3JpcHRpb246IFwi0JTQvtCx0YDQviDQv9C+0LbQsNC70L7QstCw0YLRjCDQsiBQcm9Eb0FnZW5jeSFcIixcbiAgICBpY29uOiBcIvCfjLFcIixcbiAgICB4cFJlcXVpcmVkOiAwLFxuICAgIGJlbmVmaXRzOiBbXG4gICAgICBcItCR0LDQt9C+0LLRi9C1INGE0YPQvdC60YbQuNC4XCIsXG4gICAgICBcItCf0L7QuNGB0Log0LzQsNGB0YLQtdGA0L7QslwiLFxuICAgICAgXCLQodC+0LfQtNCw0L3QuNC1INC30LDQutCw0LfQvtCyXCJcbiAgICBdLFxuICAgIGNvbG9yOiBcIiM2QjcyODBcIlxuICB9LFxuICB7XG4gICAgbGV2ZWw6IDIsXG4gICAgdGl0bGU6IFwi0JDQutGC0LjQstC90YvQuSDQutC70LjQtdC90YJcIixcbiAgICBkZXNjcmlwdGlvbjogXCLQktGLINCw0LrRgtC40LLQvdC+INC40YHQv9C+0LvRjNC30YPQtdGC0LUg0L/Qu9Cw0YLRhNC+0YDQvNGDXCIsXG4gICAgaWNvbjogXCLimqFcIixcbiAgICB4cFJlcXVpcmVkOiAxMDAsXG4gICAgYmVuZWZpdHM6IFtcbiAgICAgIFwi0J/RgNC40L7RgNC40YLQtdGCINCyINC/0L7QuNGB0LrQtSAoKzIwJSlcIixcbiAgICAgIFwi0JHRi9GB0YLRgNCw0Y8g0L/QvtC00LTQtdGA0LbQutCwXCIsXG4gICAgICBcItCj0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0L3QvtCy0YvRhSDQvNCw0YHRgtC10YDQsNGFXCIsXG4gICAgICBcItCU0L7RgdGC0YPQvyDQuiDRgdGC0LDRgtC40YHRgtC40LrQtVwiXG4gICAgXSxcbiAgICBjb2xvcjogXCIjM0I4MkY2XCJcbiAgfSxcbiAge1xuICAgIGxldmVsOiAzLFxuICAgIHRpdGxlOiBcItCf0L7RgdGC0L7Rj9C90L3Ri9C5INC60LvQuNC10L3RglwiLFxuICAgIGRlc2NyaXB0aW9uOiBcItCS0Ysg0YHRgtCw0LvQuCDQv9C+0YHRgtC+0Y/QvdC90YvQvCDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQvFwiLFxuICAgIGljb246IFwi4q2QXCIsXG4gICAgeHBSZXF1aXJlZDogMzAwLFxuICAgIGJlbmVmaXRzOiBbXG4gICAgICBcIlZJUCDQv9C+0LTQtNC10YDQttC60LBcIixcbiAgICAgIFwi0K3QutGB0LrQu9GO0LfQuNCy0L3Ri9C1INC/0YDQtdC00LvQvtC20LXQvdC40Y9cIixcbiAgICAgIFwi0J/RgNC40L7RgNC40YLQtdGCINCyINC/0L7QuNGB0LrQtSAoKzQwJSlcIixcbiAgICAgIFwi0KDQsNC90L3QuNC5INC00L7RgdGC0YPQvyDQuiDQvdC+0LLRi9C8INGE0YPQvdC60YbQuNGP0LxcIixcbiAgICAgIFwi0KDQsNGB0YjQuNGA0LXQvdC90LDRjyDQsNC90LDQu9C40YLQuNC60LBcIlxuICAgIF0sXG4gICAgY29sb3I6IFwiIzEwQjk4MVwiXG4gIH0sXG4gIHtcbiAgICBsZXZlbDogNCxcbiAgICB0aXRsZTogXCJWSVAg0LrQu9C40LXQvdGCXCIsXG4gICAgZGVzY3JpcHRpb246IFwi0JLRiyBWSVAg0LrQu9C40LXQvdGCINC/0LvQsNGC0YTQvtGA0LzRi1wiLFxuICAgIGljb246IFwi8J+RkVwiLFxuICAgIHhwUmVxdWlyZWQ6IDYwMCxcbiAgICBiZW5lZml0czogW1xuICAgICAgXCLQn9C10YDRgdC+0L3QsNC70YzQvdGL0Lkg0LzQtdC90LXQtNC20LXRgFwiLFxuICAgICAgXCLQrdC60YHQutC70Y7Qt9C40LLQvdGL0LUg0LzQsNGB0YLQtdGA0LBcIixcbiAgICAgIFwi0J/RgNC40L7RgNC40YLQtdGCINCyINC/0L7QuNGB0LrQtSAoKzYwJSlcIixcbiAgICAgIFwi0JHQtdGC0LAt0YLQtdGB0YLQuNGA0L7QstCw0L3QuNC1INGE0YPQvdC60YbQuNC5XCIsXG4gICAgICBcItCf0YDQuNC+0YDQuNGC0LXRgtC90LDRjyDQv9C+0LTQtNC10YDQttC60LBcIlxuICAgIF0sXG4gICAgY29sb3I6IFwiIzhCNUNGNlwiXG4gIH0sXG4gIHtcbiAgICBsZXZlbDogNSxcbiAgICB0aXRsZTogXCLQkNC80LHQsNGB0YHQsNC00L7RgFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcItCS0Ysg0LDQvNCx0LDRgdGB0LDQtNC+0YAg0L/Qu9Cw0YLRhNC+0YDQvNGLIVwiLFxuICAgIGljb246IFwi8J+PhlwiLFxuICAgIHhwUmVxdWlyZWQ6IDEwMDAsXG4gICAgYmVuZWZpdHM6IFtcbiAgICAgIFwi0JLRgdC1INC/0YDQuNCy0LjQu9C10LPQuNC4XCIsXG4gICAgICBcItCj0YfQsNGB0YLQuNC1INCyINC/0YDQvtCz0YDQsNC80LzQtSDRgNCw0LfQstC40YLQuNGPXCIsXG4gICAgICBcItCt0LrRgdC60LvRjtC30LjQstC90YvQtSDQsNC60YbQuNC4XCIsXG4gICAgICBcItCh0YLQsNGC0YPRgSDQsdC10YLQsC3RgtC10YHRgtC10YDQsFwiLFxuICAgICAgXCLQktC70LjRj9C90LjQtSDQvdCwINGA0LDQt9Cy0LjRgtC40LUg0L/Qu9Cw0YLRhNC+0YDQvNGLXCJcbiAgICBdLFxuICAgIGNvbG9yOiBcIiNGNTlFMEJcIlxuICB9XG5dXG5cbi8vINCa0L7QvdGE0LjQs9GD0YDQsNGG0LjRjyDRg9GA0L7QstC90LXQuSDQtNC70Y8g0LjRgdC/0L7Qu9C90LjRgtC10LvQtdC5XG5leHBvcnQgY29uc3QgRVhFQ1VUT1JfTEVWRUxTOiBMZXZlbENvbmZpZ1tdID0gW1xuICB7XG4gICAgbGV2ZWw6IDEsXG4gICAgdGl0bGU6IFwi0J3QvtCy0LjRh9C+0LpcIixcbiAgICBkZXNjcmlwdGlvbjogXCLQlNC+0LHRgNC+INC/0L7QttCw0LvQvtCy0LDRgtGMINCyIFByb0RvQWdlbmN5IVwiLFxuICAgIGljb246IFwi8J+MsVwiLFxuICAgIHhwUmVxdWlyZWQ6IDAsXG4gICAgYmVuZWZpdHM6IFtcbiAgICAgIFwi0JHQsNC30L7QstGL0LUg0YTRg9C90LrRhtC40LhcIixcbiAgICAgIFwi0KHQvtC30LTQsNC90LjQtSDQv9GA0L7RhNC40LvRj1wiLFxuICAgICAgXCLQn9GA0L7RgdC80L7RgtGAINC30LDQutCw0LfQvtCyXCJcbiAgICBdLFxuICAgIGNvbG9yOiBcIiM2QjcyODBcIlxuICB9LFxuICB7XG4gICAgbGV2ZWw6IDIsXG4gICAgdGl0bGU6IFwi0JDQutGC0LjQstC90YvQuSDQvNCw0YHRgtC10YBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLQktGLINCw0LrRgtC40LLQvdC+INGA0LDQsdC+0YLQsNC10YLQtSDQvdCwINC/0LvQsNGC0YTQvtGA0LzQtVwiLFxuICAgIGljb246IFwi4pqhXCIsXG4gICAgeHBSZXF1aXJlZDogMjAwLFxuICAgIGJlbmVmaXRzOiBbXG4gICAgICBcItCf0YDQuNC+0YDQuNGC0LXRgiDQsiDQv9C+0LjRgdC60LUgKCszMCUpXCIsXG4gICAgICBcItCR0YvRgdGC0YDQsNGPINCy0LXRgNC40YTQuNC60LDRhtC40Y9cIixcbiAgICAgIFwi0KPQstC10LTQvtC80LvQtdC90LjRjyDQviDQvdC+0LLRi9GFINC30LDQutCw0LfQsNGFXCIsXG4gICAgICBcItCR0LDQt9C+0LLQsNGPINCw0L3QsNC70LjRgtC40LrQsFwiXG4gICAgXSxcbiAgICBjb2xvcjogXCIjM0I4MkY2XCJcbiAgfSxcbiAge1xuICAgIGxldmVsOiAzLFxuICAgIHRpdGxlOiBcItCf0YDQvtGE0LXRgdGB0LjQvtC90LDQu1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcItCS0Ysg0YHRgtCw0LvQuCDQv9GA0L7RhNC10YHRgdC40L7QvdCw0LvQvtC8XCIsXG4gICAgaWNvbjogXCLirZBcIixcbiAgICB4cFJlcXVpcmVkOiA1MDAsXG4gICAgYmVuZWZpdHM6IFtcbiAgICAgIFwiVklQINC/0L7QtNC00LXRgNC20LrQsFwiLFxuICAgICAgXCLQrdC60YHQutC70Y7Qt9C40LLQvdGL0LUg0LfQsNC60LDQt9GLXCIsXG4gICAgICBcItCf0YDQuNC+0YDQuNGC0LXRgiDQsiDQv9C+0LjRgdC60LUgKCs1MCUpXCIsXG4gICAgICBcItCg0LDRgdGI0LjRgNC10L3QvdCw0Y8g0LDQvdCw0LvQuNGC0LjQutCwXCIsXG4gICAgICBcItCf0YDQuNC+0YDQuNGC0LXRgtC90YvQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPXCJcbiAgICBdLFxuICAgIGNvbG9yOiBcIiMxMEI5ODFcIlxuICB9LFxuICB7XG4gICAgbGV2ZWw6IDQsXG4gICAgdGl0bGU6IFwi0JzQsNGB0YLQtdGAXCIsXG4gICAgZGVzY3JpcHRpb246IFwi0JLRiyDQvNCw0YHRgtC10YAg0YHQstC+0LXQs9C+INC00LXQu9CwXCIsXG4gICAgaWNvbjogXCLwn5GRXCIsXG4gICAgeHBSZXF1aXJlZDogMTAwMCxcbiAgICBiZW5lZml0czogW1xuICAgICAgXCLQn9C10YDRgdC+0L3QsNC70YzQvdGL0Lkg0LzQtdC90LXQtNC20LXRgFwiLFxuICAgICAgXCLQn9GA0LXQvNC40YPQvCDQt9Cw0LrQsNC30YtcIixcbiAgICAgIFwi0J/RgNC40L7RgNC40YLQtdGCINCyINC/0L7QuNGB0LrQtSAoKzcwJSlcIixcbiAgICAgIFwi0J/QvtC70L3QsNGPINCw0L3QsNC70LjRgtC40LrQsFwiLFxuICAgICAgXCLQrdC60YHQutC70Y7Qt9C40LLQvdGL0LUg0LLQvtC30LzQvtC20L3QvtGB0YLQuFwiXG4gICAgXSxcbiAgICBjb2xvcjogXCIjOEI1Q0Y2XCJcbiAgfSxcbiAge1xuICAgIGxldmVsOiA1LFxuICAgIHRpdGxlOiBcItCt0LrRgdC/0LXRgNGCXCIsXG4gICAgZGVzY3JpcHRpb246IFwi0JLRiyDRjdC60YHQv9C10YDRgiDQv9C70LDRgtGE0L7RgNC80YshXCIsXG4gICAgaWNvbjogXCLwn4+GXCIsXG4gICAgeHBSZXF1aXJlZDogMjAwMCxcbiAgICBiZW5lZml0czogW1xuICAgICAgXCLQktGB0LUg0L/RgNC40LLQuNC70LXQs9C40LhcIixcbiAgICAgIFwi0KPRh9Cw0YHRgtC40LUg0LIg0L/RgNC+0LPRgNCw0LzQvNC1INGA0LDQt9Cy0LjRgtC40Y9cIixcbiAgICAgIFwi0K3QutGB0LrQu9GO0LfQuNCy0L3Ri9C1INCy0L7Qt9C80L7QttC90L7RgdGC0LhcIixcbiAgICAgIFwi0KHRgtCw0YLRg9GBINC/0LDRgNGC0L3QtdGA0LBcIixcbiAgICAgIFwi0JLQu9C40Y/QvdC40LUg0L3QsCDRgNCw0LfQstC40YLQuNC1INC/0LvQsNGC0YTQvtGA0LzRi1wiXG4gICAgXSxcbiAgICBjb2xvcjogXCIjRjU5RTBCXCJcbiAgfVxuXVxuXG4vLyDQo9C90LjQstC10YDRgdCw0LvRjNC90YvQtSDRg9GA0L7QstC90LggKNC00LvRjyDQvtCx0YDQsNGC0L3QvtC5INGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4KVxuZXhwb3J0IGNvbnN0IExFVkVMUyA9IENMSUVOVF9MRVZFTFNcblxuLy8g0JTQvtGB0YLQuNC20LXQvdC40Y8g0LTQu9GPINC60LvQuNC10L3RgtC+0LJcbmV4cG9ydCBjb25zdCBDTElFTlRfQUNISUVWRU1FTlRTOiBBY2hpZXZlbWVudENvbmZpZ1tdID0gW1xuICAvLyDQnNC+0YLQuNCy0LDRhtC40Y8g0Log0LDQutGC0LjQstC90L7RgdGC0LhcbiAge1xuICAgIGlkOiAnMScsXG4gICAgdGl0bGU6ICfQn9C10YDQstGL0Lkg0L/QvtC40YHQuicsXG4gICAgZGVzY3JpcHRpb246ICfQndCw0LnQtNC40YLQtSDRgdCy0L7QtdCz0L4g0L/QtdGA0LLQvtCz0L4g0LzQsNGB0YLQtdGA0LAnLFxuICAgIGljb246ICfwn5SNJyxcbiAgICB4cFJld2FyZDogNTAsXG4gICAgY2F0ZWdvcnk6ICdhY3Rpdml0eScsXG4gICAgcmFyaXR5OiAnY29tbW9uJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnNlYXJjaENvdW50ID49IDFcbiAgfSxcbiAge1xuICAgIGlkOiAnMicsXG4gICAgdGl0bGU6ICfQmtGA0LjRgtC40LonLFxuICAgIGRlc2NyaXB0aW9uOiAn0J7RgdGC0LDQstGM0YLQtSAxMCDQvtGC0LfRi9Cy0L7QsicsXG4gICAgaWNvbjogJ+KtkCcsXG4gICAgeHBSZXdhcmQ6IDEwMCxcbiAgICBjYXRlZ29yeTogJ3Jldmlld3MnLFxuICAgIHJhcml0eTogJ2NvbW1vbicsXG4gICAgY29uZGl0aW9uOiAodXNlcikgPT4gdXNlci5yZXZpZXdzQ291bnQgPj0gMTBcbiAgfSxcbiAge1xuICAgIGlkOiAnMycsXG4gICAgdGl0bGU6ICfQmNGB0YHQu9C10LTQvtCy0LDRgtC10LvRjCcsXG4gICAgZGVzY3JpcHRpb246ICfQn9GA0L7RgdC80L7RgtGA0LjRgtC1IDUwINC/0YDQvtGE0LjQu9C10Lkg0LzQsNGB0YLQtdGA0L7QsicsXG4gICAgaWNvbjogJ/CflI0nLFxuICAgIHhwUmV3YXJkOiAxNTAsXG4gICAgY2F0ZWdvcnk6ICdhY3Rpdml0eScsXG4gICAgcmFyaXR5OiAncmFyZScsXG4gICAgY29uZGl0aW9uOiAodXNlcikgPT4gdXNlci5wcm9maWxlc1ZpZXdlZCA+PSA1MFxuICB9LFxuICB7XG4gICAgaWQ6ICc0JyxcbiAgICB0aXRsZTogJ9CS0LXRgNC90YvQuSDQutC70LjQtdC90YInLFxuICAgIGRlc2NyaXB0aW9uOiAn0JjRgdC/0L7Qu9GM0LfRg9C50YLQtSDQv9C70LDRgtGE0L7RgNC80YMgMyDQvNC10YHRj9GG0LAnLFxuICAgIGljb246ICfwn5KOJyxcbiAgICB4cFJld2FyZDogMjAwLFxuICAgIGNhdGVnb3J5OiAnYWN0aXZpdHknLFxuICAgIHJhcml0eTogJ3JhcmUnLFxuICAgIGNvbmRpdGlvbjogKHVzZXIpID0+IHVzZXIubW9udGhzQWN0aXZlID49IDNcbiAgfSxcbiAge1xuICAgIGlkOiAnNScsXG4gICAgdGl0bGU6ICfQlNGA0YPQsyDQv9C70LDRgtGE0L7RgNC80YsnLFxuICAgIGRlc2NyaXB0aW9uOiAn0J/RgNC40LPQu9Cw0YHQuNGC0LUgNSDQtNGA0YPQt9C10LknLFxuICAgIGljb246ICfwn5GlJyxcbiAgICB4cFJld2FyZDogMzAwLFxuICAgIGNhdGVnb3J5OiAncmVmZXJyYWxzJyxcbiAgICByYXJpdHk6ICdyYXJlJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJlZmVycmFsQ291bnQgPj0gNVxuICB9LFxuICB7XG4gICAgaWQ6ICc2JyxcbiAgICB0aXRsZTogJ9CQ0LzQsdCw0YHRgdCw0LTQvtGAJyxcbiAgICBkZXNjcmlwdGlvbjogJ9Cf0YDQuNCz0LvQsNGB0LjRgtC1IDIwINC00YDRg9C30LXQuScsXG4gICAgaWNvbjogJ/CfjpbvuI8nLFxuICAgIHhwUmV3YXJkOiAxMDAwLFxuICAgIGNhdGVnb3J5OiAncmVmZXJyYWxzJyxcbiAgICByYXJpdHk6ICdsZWdlbmRhcnknLFxuICAgIGNvbmRpdGlvbjogKHVzZXIpID0+IHVzZXIucmVmZXJyYWxDb3VudCA+PSAyMFxuICB9XG5dXG5cbi8vINCU0L7RgdGC0LjQttC10L3QuNGPINC00LvRjyDQuNGB0L/QvtC70L3QuNGC0LXQu9C10LlcbmV4cG9ydCBjb25zdCBFWEVDVVRPUl9BQ0hJRVZFTUVOVFM6IEFjaGlldmVtZW50Q29uZmlnW10gPSBbXG4gIC8vINCc0L7RgtC40LLQsNGG0LjRjyDQuiDQv9C+0LTQv9C40YHQutC1XG4gIHtcbiAgICBpZDogJzEnLFxuICAgIHRpdGxlOiAn0J/QtdGA0LLQsNGPINC/0L7QtNC/0LjRgdC60LAnLFxuICAgIGRlc2NyaXB0aW9uOiAn0J7RhNC+0YDQvNC40YLQtSDQv9C10YDQstGD0Y4g0L/QvtC00L/QuNGB0LrRgycsXG4gICAgaWNvbjogJ/CfkrMnLFxuICAgIHhwUmV3YXJkOiAyMDAsXG4gICAgY2F0ZWdvcnk6ICdhY3Rpdml0eScsXG4gICAgcmFyaXR5OiAnY29tbW9uJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLmhhc0FjdGl2ZVN1YnNjcmlwdGlvblxuICB9LFxuICB7XG4gICAgaWQ6ICcyJyxcbiAgICB0aXRsZTogJ9Ca0LDRh9C10YHRgtCy0LXQvdC90LDRjyDRgNCw0LHQvtGC0LAnLFxuICAgIGRlc2NyaXB0aW9uOiAn0J/QvtC70YPRh9C40YLQtSAyMCDQvtGC0LfRi9Cy0L7QsiDQvdCwIDUg0LfQstC10LfQtCcsXG4gICAgaWNvbjogJ/CfjJ8nLFxuICAgIHhwUmV3YXJkOiAzMDAsXG4gICAgY2F0ZWdvcnk6ICdyZXZpZXdzJyxcbiAgICByYXJpdHk6ICdyYXJlJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLmZpdmVTdGFyUmV2aWV3cyA+PSAyMFxuICB9LFxuICB7XG4gICAgaWQ6ICczJyxcbiAgICB0aXRsZTogJ9CQ0LrRgtC40LLQvdGL0Lkg0LzQsNGB0YLQtdGAJyxcbiAgICBkZXNjcmlwdGlvbjogJ9CS0YvQv9C+0LvQvdC40YLQtSAzMCDQt9Cw0LrQsNC30L7QsiDQt9CwINC80LXRgdGP0YYnLFxuICAgIGljb246ICfimqEnLFxuICAgIHhwUmV3YXJkOiA0MDAsXG4gICAgY2F0ZWdvcnk6ICdvcmRlcnMnLFxuICAgIHJhcml0eTogJ3JhcmUnLFxuICAgIGNvbmRpdGlvbjogKHVzZXIpID0+IHVzZXIubW9udGhseU9yZGVycyA+PSAzMFxuICB9LFxuICB7XG4gICAgaWQ6ICc0JyxcbiAgICB0aXRsZTogJ9Ch0LrQvtGA0L7RgdGC0L3QvtC5INC00LXQvNC+0L0nLFxuICAgIGRlc2NyaXB0aW9uOiAn0J7RgtCy0LXRh9Cw0LnRgtC1INC90LAg0LfQsNC60LDQt9GLINC30LAgNSDQvNC40L3Rg9GCJyxcbiAgICBpY29uOiAn8J+agCcsXG4gICAgeHBSZXdhcmQ6IDE1MCxcbiAgICBjYXRlZ29yeTogJ29yZGVycycsXG4gICAgcmFyaXR5OiAnY29tbW9uJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLmF2ZXJhZ2VSZXNwb25zZVRpbWUgPD0gNVxuICB9LFxuICB7XG4gICAgaWQ6ICc1JyxcbiAgICB0aXRsZTogJ9Cc0LDQs9C90LjRgiDQutC+0LvQu9C10LMnLFxuICAgIGRlc2NyaXB0aW9uOiAn0J/RgNC40LPQu9Cw0YHQuNGC0LUgMyDQuNGB0L/QvtC70L3QuNGC0LXQu9C10LknLFxuICAgIGljb246ICfwn6eyJyxcbiAgICB4cFJld2FyZDogNTAwLFxuICAgIGNhdGVnb3J5OiAncmVmZXJyYWxzJyxcbiAgICByYXJpdHk6ICdyYXJlJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJlZmVycmFsQ291bnQgPj0gM1xuICB9LFxuICB7XG4gICAgaWQ6ICc2JyxcbiAgICB0aXRsZTogJ9CS0LXRgNC90YvQuSDQvNCw0YHRgtC10YAnLFxuICAgIGRlc2NyaXB0aW9uOiAn0KDQsNCx0L7RgtCw0LnRgtC1INC90LAg0L/Qu9Cw0YLRhNC+0YDQvNC1IDYg0LzQtdGB0Y/RhtC10LInLFxuICAgIGljb246ICfwn5KOJyxcbiAgICB4cFJld2FyZDogMTAwMCxcbiAgICBjYXRlZ29yeTogJ2FjdGl2aXR5JyxcbiAgICByYXJpdHk6ICdlcGljJyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLm1vbnRoc0FjdGl2ZSA+PSA2XG4gIH0sXG4gIHtcbiAgICBpZDogJzcnLFxuICAgIHRpdGxlOiAn0J3QtdGD0Y/Qt9Cy0LjQvNGL0LknLFxuICAgIGRlc2NyaXB0aW9uOiAn0JfQsNCy0LXRgNGI0LjRgtC1IDEwMCDQt9Cw0LrQsNC30L7QsiDQv9C+0LTRgNGP0LQg0LHQtdC3INC+0YLQvNC10L0nLFxuICAgIGljb246ICfwn5uh77iPJyxcbiAgICB4cFJld2FyZDogMTUwMCxcbiAgICBjYXRlZ29yeTogJ29yZGVycycsXG4gICAgcmFyaXR5OiAnbGVnZW5kYXJ5JyxcbiAgICBjb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLmNvbnNlY3V0aXZlT3JkZXJzID49IDEwMFxuICB9XG5dXG5cbi8vINCj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C1INC00L7RgdGC0LjQttC10L3QuNGPICjQtNC70Y8g0L7QsdGA0LDRgtC90L7QuSDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuClcbmV4cG9ydCBjb25zdCBBQ0hJRVZFTUVOVFMgPSBDTElFTlRfQUNISUVWRU1FTlRTXG5cbi8vIFhQINC30LAg0YDQsNC30LvQuNGH0L3Ri9C1INC00LXQudGB0YLQstC40Y9cbmV4cG9ydCBjb25zdCBYUF9SRVdBUkRTID0ge1xuICAvLyDQmtC70LjQtdC90YLRiyAtINCw0LrRgtC40LLQvdC+0YHRgtGMXG4gIERBSUxZX0xPR0lOOiAyLFxuICBTRUFSQ0hfTUFTVEVSOiA1LFxuICBWSUVXX1BST0ZJTEU6IDEsXG4gIExFQVZFX1JFVklFVzogMTAsXG4gIFNIQVJFX1NPQ0lBTDogMyxcbiAgVVBEQVRFX1BST0ZJTEU6IDUsXG4gIFxuICAvLyDQmtC70LjQtdC90YLRiyAtINGA0LXRhNC10YDQsNC70YtcbiAgUkVGRVJSQUxfUkVHSVNUUkFUSU9OOiAxMDAsXG4gIFJFRkVSUkFMX0ZJUlNUX1NFQVJDSDogNTAsXG4gIFJFRkVSUkFMXzVfU0VBUkNIRVM6IDEwMCxcbiAgUkVGRVJSQUxfMjBfU0VBUkNIRVM6IDIwMCxcbiAgXG4gIC8vINCY0YHQv9C+0LvQvdC40YLQtdC70LggLSDQv9C+0LTQv9C40YHQutC4ICjQk9Cb0JDQktCd0JDQryDQnNCe0KLQmNCS0JDQptCY0K8hKVxuICBGSVJTVF9TVUJTQ1JJUFRJT046IDIwMCxcbiAgTU9OVEhMWV9TVUJTQ1JJUFRJT046IDEwMCxcbiAgWUVBUkxZX1NVQlNDUklQVElPTjogNTAwLFxuICBTVUJTQ1JJUFRJT05fUkVORVdBTDogMTUwLFxuICBcbiAgLy8g0JjRgdC/0L7Qu9C90LjRgtC10LvQuCAtINC60LDRh9C10YHRgtCy0L5cbiAgR0VUXzVfU1RBUl9SRVZJRVc6IDI1LFxuICBHRVRfNF9TVEFSX1JFVklFVzogMTUsXG4gIEdFVF8zX1NUQVJfUkVWSUVXOiA1LFxuICBDT01QTEVURV9PUkRFUjogMTUsXG4gIFJFU1BPTkRfNV9NSU46IDgsXG4gIFJFU1BPTkRfMV9NSU46IDE1LFxuICBcbiAgLy8g0JjRgdC/0L7Qu9C90LjRgtC10LvQuCAtINCw0LrRgtC40LLQvdC+0YHRgtGMXG4gIEVYRUNVVE9SX0RBSUxZX0xPR0lOOiAyLFxuICBFWEVDVVRPUl9VUERBVEVfUFJPRklMRTogNSxcbiAgVVBMT0FEX1BIT1RPOiAzLFxuICBDT01QTEVURV9GQVNUOiA1LFxuICBcbiAgLy8g0KDQtdGE0LXRgNCw0LvRiyDQuNGB0L/QvtC70L3QuNGC0LXQu9C10LlcbiAgUkVGRVJSQUxfRVhFQ1VUT1JfUkVHSVNUUkFUSU9OOiAyMDAsXG4gIFJFRkVSUkFMX0VYRUNVVE9SX1NVQlNDUklQVElPTjogMzAwLFxuICBSRUZFUlJBTF9FWEVDVVRPUl81X09SREVSUzogMTAwLFxuICBcbiAgLy8g0JTQvtGB0YLQuNC20LXQvdC40Y9cbiAgQUNISUVWRU1FTlRfQ09NTU9OOiAwLFxuICBBQ0hJRVZFTUVOVF9SQVJFOiAyNSxcbiAgQUNISUVWRU1FTlRfRVBJQzogNTAsXG4gIEFDSElFVkVNRU5UX0xFR0VOREFSWTogMTAwXG59XG5cbi8vINCm0LLQtdGC0LAg0LTQu9GPINGA0LXQtNC60L7RgdGC0Lgg0LTQvtGB0YLQuNC20LXQvdC40LlcbmV4cG9ydCBjb25zdCBSQVJJVFlfQ09MT1JTID0ge1xuICBjb21tb246ICcjNkI3MjgwJyxcbiAgcmFyZTogJyMzQjgyRjYnLFxuICBlcGljOiAnIzhCNUNGNicsXG4gIGxlZ2VuZGFyeTogJyNGNTlFMEInXG59XG5cbi8vINCY0LrQvtC90LrQuCDQtNC70Y8g0YDQtdC00LrQvtGB0YLQuFxuZXhwb3J0IGNvbnN0IFJBUklUWV9JQ09OUyA9IHtcbiAgY29tbW9uOiAn4pqqJyxcbiAgcmFyZTogJ/CflLUnLFxuICBlcGljOiAn8J+foycsXG4gIGxlZ2VuZGFyeTogJ/Cfn6AnXG59XG4iXSwibmFtZXMiOlsiQ0xJRU5UX0xFVkVMUyIsImxldmVsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImljb24iLCJ4cFJlcXVpcmVkIiwiYmVuZWZpdHMiLCJjb2xvciIsIkVYRUNVVE9SX0xFVkVMUyIsIkxFVkVMUyIsIkNMSUVOVF9BQ0hJRVZFTUVOVFMiLCJpZCIsInhwUmV3YXJkIiwiY2F0ZWdvcnkiLCJyYXJpdHkiLCJjb25kaXRpb24iLCJ1c2VyIiwic2VhcmNoQ291bnQiLCJyZXZpZXdzQ291bnQiLCJwcm9maWxlc1ZpZXdlZCIsIm1vbnRoc0FjdGl2ZSIsInJlZmVycmFsQ291bnQiLCJFWEVDVVRPUl9BQ0hJRVZFTUVOVFMiLCJoYXNBY3RpdmVTdWJzY3JpcHRpb24iLCJmaXZlU3RhclJldmlld3MiLCJtb250aGx5T3JkZXJzIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsImNvbnNlY3V0aXZlT3JkZXJzIiwiQUNISUVWRU1FTlRTIiwiWFBfUkVXQVJEUyIsIkRBSUxZX0xPR0lOIiwiU0VBUkNIX01BU1RFUiIsIlZJRVdfUFJPRklMRSIsIkxFQVZFX1JFVklFVyIsIlNIQVJFX1NPQ0lBTCIsIlVQREFURV9QUk9GSUxFIiwiUkVGRVJSQUxfUkVHSVNUUkFUSU9OIiwiUkVGRVJSQUxfRklSU1RfU0VBUkNIIiwiUkVGRVJSQUxfNV9TRUFSQ0hFUyIsIlJFRkVSUkFMXzIwX1NFQVJDSEVTIiwiRklSU1RfU1VCU0NSSVBUSU9OIiwiTU9OVEhMWV9TVUJTQ1JJUFRJT04iLCJZRUFSTFlfU1VCU0NSSVBUSU9OIiwiU1VCU0NSSVBUSU9OX1JFTkVXQUwiLCJHRVRfNV9TVEFSX1JFVklFVyIsIkdFVF80X1NUQVJfUkVWSUVXIiwiR0VUXzNfU1RBUl9SRVZJRVciLCJDT01QTEVURV9PUkRFUiIsIlJFU1BPTkRfNV9NSU4iLCJSRVNQT05EXzFfTUlOIiwiRVhFQ1VUT1JfREFJTFlfTE9HSU4iLCJFWEVDVVRPUl9VUERBVEVfUFJPRklMRSIsIlVQTE9BRF9QSE9UTyIsIkNPTVBMRVRFX0ZBU1QiLCJSRUZFUlJBTF9FWEVDVVRPUl9SRUdJU1RSQVRJT04iLCJSRUZFUlJBTF9FWEVDVVRPUl9TVUJTQ1JJUFRJT04iLCJSRUZFUlJBTF9FWEVDVVRPUl81X09SREVSUyIsIkFDSElFVkVNRU5UX0NPTU1PTiIsIkFDSElFVkVNRU5UX1JBUkUiLCJBQ0hJRVZFTUVOVF9FUElDIiwiQUNISUVWRU1FTlRfTEVHRU5EQVJZIiwiUkFSSVRZX0NPTE9SUyIsImNvbW1vbiIsInJhcmUiLCJlcGljIiwibGVnZW5kYXJ5IiwiUkFSSVRZX0lDT05TIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/constants.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/gamificationService.ts":
/*!*************************************************!*\
  !*** ./lib/gamification/gamificationService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GamificationService: () => (/* binding */ GamificationService),\n/* harmony export */   gamificationService: () => (/* binding */ gamificationService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"(rsc)/./lib/gamification/constants.ts\");\n/* harmony import */ var _notificationService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./notificationService */ \"(rsc)/./lib/gamification/notificationService.ts\");\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nconst notificationService = new _notificationService__WEBPACK_IMPORTED_MODULE_2__.NotificationService();\nclass GamificationService {\n    // Получение текущего уровня пользователя\n    async getUserLevel(userId) {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                experiencePoints: true,\n                currentLevel: true,\n                role: true\n            }\n        });\n        if (!user) {\n            throw new Error(\"Пользователь не найден\");\n        }\n        // Выбираем уровни в зависимости от роли\n        const levels = user.role === \"executor\" ? _constants__WEBPACK_IMPORTED_MODULE_1__.EXECUTOR_LEVELS : _constants__WEBPACK_IMPORTED_MODULE_1__.CLIENT_LEVELS;\n        const levelConfig = levels.find((l)=>l.level === user.currentLevel) || levels[0];\n        return {\n            level: levelConfig.level,\n            title: levelConfig.title,\n            icon: levelConfig.icon,\n            color: levelConfig.color\n        };\n    }\n    // Добавление XP пользователю\n    async addXp(userId, reward) {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                experiencePoints: true,\n                currentLevel: true,\n                totalXpEarned: true,\n                dailyXpEarned: true,\n                weeklyXpEarned: true,\n                monthlyXpEarned: true\n            }\n        });\n        if (!user) {\n            throw new Error(\"Пользователь не найден\");\n        }\n        const newXp = user.experiencePoints + reward.amount;\n        const newTotalXp = user.totalXpEarned + reward.amount;\n        // Обновляем статистику\n        const now = new Date();\n        const isNewDay = !user.dailyXpEarned || this.isNewDay(now);\n        const isNewWeek = !user.weeklyXpEarned || this.isNewWeek(now);\n        const isNewMonth = !user.monthlyXpEarned || this.isNewMonth(now);\n        const updateData = {\n            experiencePoints: newXp,\n            totalXpEarned: newTotalXp,\n            lastXpEarned: now,\n            dailyXpEarned: isNewDay ? reward.amount : user.dailyXpEarned + reward.amount,\n            weeklyXpEarned: isNewWeek ? reward.amount : user.weeklyXpEarned + reward.amount,\n            monthlyXpEarned: isNewMonth ? reward.amount : user.monthlyXpEarned + reward.amount\n        };\n        // Проверяем повышение уровня\n        const newLevel = this.calculateLevel(newXp, user.role);\n        let levelUp = null;\n        if (newLevel > user.currentLevel) {\n            updateData.currentLevel = newLevel;\n            const levels = user.role === \"executor\" ? _constants__WEBPACK_IMPORTED_MODULE_1__.EXECUTOR_LEVELS : _constants__WEBPACK_IMPORTED_MODULE_1__.CLIENT_LEVELS;\n            levelUp = {\n                oldLevel: user.currentLevel,\n                newLevel: newLevel,\n                levelConfig: levels.find((l)=>l.level === newLevel)\n            };\n            // Отправляем уведомление о повышении уровня\n            if (levelUp.levelConfig) {\n                await notificationService.notifyLevelUp(userId, user.currentLevel, newLevel, levelUp.levelConfig);\n            }\n        } else {\n            // Даже если уровень не повысился, обновляем currentLevel для синхронизации\n            updateData.currentLevel = newLevel;\n        }\n        // Сохраняем изменения\n        await prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: updateData\n        });\n        // Записываем в историю XP\n        await prisma.xpHistory.create({\n            data: {\n                userId: userId,\n                xpAmount: reward.amount,\n                source: reward.source,\n                description: reward.description,\n                metadata: reward.metadata\n            }\n        });\n        // Проверяем достижения\n        await this.checkAchievements(userId);\n        return {\n            newLevel: !!levelUp,\n            levelUp\n        };\n    }\n    // Проверка и выдача достижений\n    async checkAchievements(userId) {\n        const user = await this.getUserWithStats(userId);\n        const newAchievements = [];\n        // Выбираем достижения в зависимости от роли\n        const achievements = user.role === \"executor\" ? _constants__WEBPACK_IMPORTED_MODULE_1__.EXECUTOR_ACHIEVEMENTS : _constants__WEBPACK_IMPORTED_MODULE_1__.CLIENT_ACHIEVEMENTS;\n        for (const achievement of achievements){\n            // Проверяем, есть ли уже это достижение у пользователя\n            const existingAchievement = await prisma.userAchievement.findUnique({\n                where: {\n                    userId_achievementId: {\n                        userId: userId,\n                        achievementId: parseInt(achievement.id)\n                    }\n                }\n            });\n            if (existingAchievement) continue;\n            // Проверяем условие достижения\n            if (achievement.condition(user)) {\n                // Выдаем достижение\n                await prisma.userAchievement.create({\n                    data: {\n                        userId: userId,\n                        achievementId: parseInt(achievement.id),\n                        xpEarned: achievement.xpReward\n                    }\n                });\n                // Добавляем XP за достижение\n                if (achievement.xpReward > 0) {\n                    await this.addXp(userId, {\n                        amount: achievement.xpReward,\n                        source: \"achievement\",\n                        description: `Достижение: ${achievement.title}`,\n                        metadata: {\n                            achievementId: achievement.id\n                        }\n                    });\n                }\n                // Отправляем уведомление о достижении\n                await notificationService.notifyAchievement(userId, achievement);\n                newAchievements.push({\n                    id: achievement.id,\n                    title: achievement.title,\n                    description: achievement.description,\n                    icon: achievement.icon,\n                    rarity: achievement.rarity,\n                    xpReward: achievement.xpReward\n                });\n            }\n        }\n        return newAchievements;\n    }\n    // Получение достижений пользователя\n    async getUserAchievements(userId) {\n        const achievements = await prisma.userAchievement.findMany({\n            where: {\n                userId\n            },\n            include: {\n                achievement: true\n            },\n            orderBy: {\n                earnedAt: \"desc\"\n            }\n        });\n        return achievements.map((ua)=>({\n                id: ua.achievement.id,\n                title: ua.achievement.title,\n                description: ua.achievement.description,\n                icon: ua.achievement.icon,\n                rarity: ua.achievement.rarity,\n                xpReward: ua.xpEarned,\n                earnedAt: ua.earnedAt,\n                isNotified: ua.isNotified\n            }));\n    }\n    // Получение истории XP\n    async getXpHistory(userId, limit = 50) {\n        const history = await prisma.xpHistory.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                earnedAt: \"desc\"\n            },\n            take: limit\n        });\n        return history.map((entry)=>({\n                id: entry.id,\n                xpAmount: entry.xpAmount,\n                source: entry.source,\n                description: entry.description,\n                metadata: entry.metadata,\n                earnedAt: entry.earnedAt\n            }));\n    }\n    // Получение статистики пользователя\n    async getUserStats(userId) {\n        const user = await this.getUserWithStats(userId);\n        const level = await this.getUserLevel(userId);\n        const achievements = await this.getUserAchievements(userId);\n        const xpHistory = await this.getXpHistory(userId, 10);\n        return {\n            user: {\n                id: user.id,\n                name: user.name,\n                email: user.email,\n                role: user.role\n            },\n            level,\n            xp: {\n                current: user.experiencePoints,\n                total: user.totalXpEarned,\n                daily: user.dailyXpEarned,\n                weekly: user.weeklyXpEarned,\n                monthly: user.monthlyXpEarned\n            },\n            achievements: {\n                total: achievements.length,\n                recent: achievements.slice(0, 5),\n                byRarity: this.groupAchievementsByRarity(achievements)\n            },\n            xpHistory: xpHistory.slice(0, 10),\n            nextLevel: this.getNextLevelInfo(user.experiencePoints, user.role)\n        };\n    }\n    // Создание реферального кода\n    async createReferralCode(userId) {\n        const code = this.generateReferralCode();\n        await prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: {\n                referralCode: code\n            }\n        });\n        return code;\n    }\n    // Обработка реферала\n    async processReferral(referralCode, newUserId) {\n        const referrer = await prisma.user.findUnique({\n            where: {\n                referralCode\n            }\n        });\n        if (!referrer) {\n            throw new Error(\"Неверный реферальный код\");\n        }\n        // Обновляем данные нового пользователя\n        await prisma.user.update({\n            where: {\n                id: newUserId\n            },\n            data: {\n                referredBy: referrer.id\n            }\n        });\n        // Обновляем счетчик рефералов\n        await prisma.user.update({\n            where: {\n                id: referrer.id\n            },\n            data: {\n                referralCount: {\n                    increment: 1\n                }\n            }\n        });\n        // Выдаем награды\n        const referrerReward = await this.addXp(referrer.id, {\n            amount: _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_REGISTRATION,\n            source: \"referral\",\n            description: \"Приглашение друга\",\n            metadata: {\n                referredUserId: newUserId\n            }\n        });\n        const newUserReward = await this.addXp(newUserId, {\n            amount: 50,\n            source: \"referral_bonus\",\n            description: \"Бонус за регистрацию по приглашению\",\n            metadata: {\n                referrerId: referrer.id\n            }\n        });\n        return {\n            referrerReward,\n            newUserReward,\n            referrer: {\n                id: referrer.id,\n                name: referrer.name\n            }\n        };\n    }\n    // Вспомогательные методы\n    calculateLevel(xp, role) {\n        const levels = role === \"executor\" ? _constants__WEBPACK_IMPORTED_MODULE_1__.EXECUTOR_LEVELS : _constants__WEBPACK_IMPORTED_MODULE_1__.CLIENT_LEVELS;\n        for(let i = levels.length - 1; i >= 0; i--){\n            if (xp >= levels[i].xpRequired) {\n                return levels[i].level;\n            }\n        }\n        return 1;\n    }\n    getNextLevelInfo(currentXp, role) {\n        const levels = role === \"executor\" ? _constants__WEBPACK_IMPORTED_MODULE_1__.EXECUTOR_LEVELS : _constants__WEBPACK_IMPORTED_MODULE_1__.CLIENT_LEVELS;\n        const currentLevel = this.calculateLevel(currentXp, role);\n        const nextLevel = levels.find((l)=>l.level === currentLevel + 1);\n        if (!nextLevel) {\n            return null // Максимальный уровень\n            ;\n        }\n        const xpNeeded = nextLevel.xpRequired - currentXp;\n        const progress = (currentXp - levels[currentLevel - 1].xpRequired) / (nextLevel.xpRequired - levels[currentLevel - 1].xpRequired) * 100;\n        return {\n            level: nextLevel.level,\n            title: nextLevel.title,\n            icon: nextLevel.icon,\n            xpNeeded,\n            progress: Math.round(progress)\n        };\n    }\n    async getUserWithStats(userId) {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                clientOrders: true,\n                executorOrders: true,\n                clientReviews: true,\n                executorReviews: true,\n                achievements: {\n                    include: {\n                        achievement: true\n                    }\n                }\n            }\n        });\n        if (!user) {\n            throw new Error(\"Пользователь не найден\");\n        }\n        // Вычисляем статистику\n        const ordersCount = user.role === \"client\" ? user.clientOrders.length : user.executorOrders.length;\n        const reviewsCount = user.role === \"client\" ? user.clientReviews.length : user.executorReviews.length;\n        // Вычисляем рейтинг\n        let rating = 0;\n        if (user.role === \"executor\" && user.executorReviews.length > 0) {\n            const totalRating = user.executorReviews.reduce((sum, review)=>sum + review.rating, 0);\n            rating = totalRating / user.executorReviews.length;\n        }\n        return {\n            id: user.id,\n            experiencePoints: user.experiencePoints,\n            currentLevel: user.currentLevel,\n            totalXpEarned: user.totalXpEarned,\n            dailyXpEarned: user.dailyXpEarned,\n            weeklyXpEarned: user.weeklyXpEarned,\n            monthlyXpEarned: user.monthlyXpEarned,\n            referralCount: user.referralCount,\n            referralEarnings: Number(user.referralEarnings),\n            ordersCount,\n            reviewsCount,\n            rating,\n            averageResponseTime: 0,\n            dailyLoginStreak: 0,\n            nightOrdersCount: 0,\n            weekendOrdersCount: 0,\n            consecutiveOrders: 0,\n            isEarlyUser: user.createdAt < new Date(\"2024-01-01\"),\n            mentorCount: 0,\n            totalOrders: ordersCount,\n            monthlyRating: rating // TODO: вычислить за месяц\n        };\n    }\n    groupAchievementsByRarity(achievements) {\n        const grouped = {\n            common: 0,\n            rare: 0,\n            epic: 0,\n            legendary: 0\n        };\n        achievements.forEach((achievement)=>{\n            grouped[achievement.rarity]++;\n        });\n        return grouped;\n    }\n    generateReferralCode() {\n        const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        let result = \"\";\n        for(let i = 0; i < 8; i++){\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n    isNewDay(now) {\n        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n        const yesterday = new Date(today);\n        yesterday.setDate(yesterday.getDate() - 1);\n        return now >= today;\n    }\n    isNewWeek(now) {\n        const startOfWeek = new Date(now);\n        startOfWeek.setDate(now.getDate() - now.getDay());\n        startOfWeek.setHours(0, 0, 0, 0);\n        return now >= startOfWeek;\n    }\n    isNewMonth(now) {\n        const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n        return now >= startOfMonth;\n    }\n}\nconst gamificationService = new GamificationService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2FtaWZpY2F0aW9uL2dhbWlmaWNhdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTZDO0FBQ3VFO0FBQ3pEO0FBRTNELE1BQU1PLFNBQVMsSUFBSVAsd0RBQVlBO0FBQy9CLE1BQU1RLHNCQUFzQixJQUFJRixxRUFBbUJBO0FBaUM1QyxNQUFNRztJQUNYLHlDQUF5QztJQUN6QyxNQUFNQyxhQUFhQyxNQUFjLEVBQTBFO1FBQ3pHLE1BQU1DLE9BQU8sTUFBTUwsT0FBT0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDeENDLE9BQU87Z0JBQUVDLElBQUlKO1lBQU87WUFDcEJLLFFBQVE7Z0JBQUVDLGtCQUFrQjtnQkFBTUMsY0FBYztnQkFBTUMsTUFBTTtZQUFLO1FBQ25FO1FBRUEsSUFBSSxDQUFDUCxNQUFNO1lBQ1QsTUFBTSxJQUFJUSxNQUFNO1FBQ2xCO1FBRUEsd0NBQXdDO1FBQ3hDLE1BQU1DLFNBQVNULEtBQUtPLElBQUksS0FBSyxhQUFhakIsdURBQWVBLEdBQUdELHFEQUFhQTtRQUN6RSxNQUFNcUIsY0FBY0QsT0FBT0UsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxLQUFLLEtBQUtiLEtBQUtNLFlBQVksS0FBS0csTUFBTSxDQUFDLEVBQUU7UUFFaEYsT0FBTztZQUNMSSxPQUFPSCxZQUFZRyxLQUFLO1lBQ3hCQyxPQUFPSixZQUFZSSxLQUFLO1lBQ3hCQyxNQUFNTCxZQUFZSyxJQUFJO1lBQ3RCQyxPQUFPTixZQUFZTSxLQUFLO1FBQzFCO0lBQ0Y7SUFFQSw2QkFBNkI7SUFDN0IsTUFBTUMsTUFBTWxCLE1BQWMsRUFBRW1CLE1BQWdCLEVBQWlEO1FBQzNGLE1BQU1sQixPQUFPLE1BQU1MLE9BQU9LLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQ3hDQyxPQUFPO2dCQUFFQyxJQUFJSjtZQUFPO1lBQ3BCSyxRQUFRO2dCQUNOQyxrQkFBa0I7Z0JBQ2xCQyxjQUFjO2dCQUNkYSxlQUFlO2dCQUNmQyxlQUFl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QyxNQUFNK0gsY0FBYyxJQUFJOUgsS0FBS0Q7UUFDN0IrSCxZQUFZRCxPQUFPLENBQUM5SCxJQUFJNEgsT0FBTyxLQUFLNUgsSUFBSWdJLE1BQU07UUFDOUNELFlBQVlFLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRztRQUM5QixPQUFPakksT0FBTytIO0lBQ2hCO0lBRVEzSCxXQUFXSixHQUFTLEVBQVc7UUFDckMsTUFBTWtJLGVBQWUsSUFBSWpJLEtBQUtELElBQUkwSCxXQUFXLElBQUkxSCxJQUFJMkgsUUFBUSxJQUFJO1FBQ2pFLE9BQU8zSCxPQUFPa0k7SUFDaEI7QUFDRjtBQUVPLE1BQU1DLHNCQUFzQixJQUFJaEssc0JBQXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvZG8tYWdlbmN5Ly4vbGliL2dhbWlmaWNhdGlvbi9nYW1pZmljYXRpb25TZXJ2aWNlLnRzP2EwMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5pbXBvcnQgeyBDTElFTlRfTEVWRUxTLCBFWEVDVVRPUl9MRVZFTFMsIENMSUVOVF9BQ0hJRVZFTUVOVFMsIEVYRUNVVE9SX0FDSElFVkVNRU5UUywgWFBfUkVXQVJEUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJy4vbm90aWZpY2F0aW9uU2VydmljZSdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5jb25zdCBub3RpZmljYXRpb25TZXJ2aWNlID0gbmV3IE5vdGlmaWNhdGlvblNlcnZpY2UoKVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhbWlmaWNhdGlvblVzZXIge1xuICBpZDogbnVtYmVyXG4gIGV4cGVyaWVuY2VQb2ludHM6IG51bWJlclxuICBjdXJyZW50TGV2ZWw6IG51bWJlclxuICB0b3RhbFhwRWFybmVkOiBudW1iZXJcbiAgZGFpbHlYcEVhcm5lZDogbnVtYmVyXG4gIHdlZWtseVhwRWFybmVkOiBudW1iZXJcbiAgbW9udGhseVhwRWFybmVkOiBudW1iZXJcbiAgcmVmZXJyYWxDb3VudDogbnVtYmVyXG4gIHJlZmVycmFsRWFybmluZ3M6IG51bWJlclxuICBvcmRlcnNDb3VudD86IG51bWJlclxuICByZXZpZXdzQ291bnQ/OiBudW1iZXJcbiAgcmF0aW5nPzogbnVtYmVyXG4gIGF2ZXJhZ2VSZXNwb25zZVRpbWU/OiBudW1iZXJcbiAgZGFpbHlMb2dpblN0cmVhaz86IG51bWJlclxuICBuaWdodE9yZGVyc0NvdW50PzogbnVtYmVyXG4gIHdlZWtlbmRPcmRlcnNDb3VudD86IG51bWJlclxuICBjb25zZWN1dGl2ZU9yZGVycz86IG51bWJlclxuICBpc0Vhcmx5VXNlcj86IGJvb2xlYW5cbiAgbWVudG9yQ291bnQ/OiBudW1iZXJcbiAgdG90YWxPcmRlcnM/OiBudW1iZXJcbiAgbW9udGhseVJhdGluZz86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFhwUmV3YXJkIHtcbiAgYW1vdW50OiBudW1iZXJcbiAgc291cmNlOiBzdHJpbmdcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xuICBtZXRhZGF0YT86IGFueVxufVxuXG5leHBvcnQgY2xhc3MgR2FtaWZpY2F0aW9uU2VydmljZSB7XG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDRgtC10LrRg9GJ0LXQs9C+INGD0YDQvtCy0L3RjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgYXN5bmMgZ2V0VXNlckxldmVsKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTx7IGxldmVsOiBudW1iZXI7IHRpdGxlOiBzdHJpbmc7IGljb246IHN0cmluZzsgY29sb3I6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgc2VsZWN0OiB7IGV4cGVyaWVuY2VQb2ludHM6IHRydWUsIGN1cnJlbnRMZXZlbDogdHJ1ZSwgcm9sZTogdHJ1ZSB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nKVxuICAgIH1cblxuICAgIC8vINCS0YvQsdC40YDQsNC10Lwg0YPRgNC+0LLQvdC4INCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgNC+0LvQuFxuICAgIGNvbnN0IGxldmVscyA9IHVzZXIucm9sZSA9PT0gJ2V4ZWN1dG9yJyA/IEVYRUNVVE9SX0xFVkVMUyA6IENMSUVOVF9MRVZFTFNcbiAgICBjb25zdCBsZXZlbENvbmZpZyA9IGxldmVscy5maW5kKGwgPT4gbC5sZXZlbCA9PT0gdXNlci5jdXJyZW50TGV2ZWwpIHx8IGxldmVsc1swXVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogbGV2ZWxDb25maWcubGV2ZWwsXG4gICAgICB0aXRsZTogbGV2ZWxDb25maWcudGl0bGUsXG4gICAgICBpY29uOiBsZXZlbENvbmZpZy5pY29uLFxuICAgICAgY29sb3I6IGxldmVsQ29uZmlnLmNvbG9yXG4gICAgfVxuICB9XG5cbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUgWFAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOXG4gIGFzeW5jIGFkZFhwKHVzZXJJZDogbnVtYmVyLCByZXdhcmQ6IFhwUmV3YXJkKTogUHJvbWlzZTx7IG5ld0xldmVsOiBib29sZWFuOyBsZXZlbFVwPzogYW55IH0+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50czogdHJ1ZSxcbiAgICAgICAgY3VycmVudExldmVsOiB0cnVlLFxuICAgICAgICB0b3RhbFhwRWFybmVkOiB0cnVlLFxuICAgICAgICBkYWlseVhwRWFybmVkOiB0cnVlLFxuICAgICAgICB3ZWVrbHlYcEVhcm5lZDogdHJ1ZSxcbiAgICAgICAgbW9udGhseVhwRWFybmVkOiB0cnVlXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nKVxuICAgIH1cblxuICAgIGNvbnN0IG5ld1hwID0gdXNlci5leHBlcmllbmNlUG9pbnRzICsgcmV3YXJkLmFtb3VudFxuICAgIGNvbnN0IG5ld1RvdGFsWHAgPSB1c2VyLnRvdGFsWHBFYXJuZWQgKyByZXdhcmQuYW1vdW50XG5cbiAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YHRgtCw0YLQuNGB0YLQuNC60YNcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgaXNOZXdEYXkgPSAhdXNlci5kYWlseVhwRWFybmVkIHx8IHRoaXMuaXNOZXdEYXkobm93KVxuICAgIGNvbnN0IGlzTmV3V2VlayA9ICF1c2VyLndlZWtseVhwRWFybmVkIHx8IHRoaXMuaXNOZXdXZWVrKG5vdylcbiAgICBjb25zdCBpc05ld01vbnRoID0gIXVzZXIubW9udGhseVhwRWFybmVkIHx8IHRoaXMuaXNOZXdNb250aChub3cpXG5cbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICBleHBlcmllbmNlUG9pbnRzOiBuZXdYcCxcbiAgICAgIHRvdGFsWHBFYXJuZWQ6IG5ld1RvdGFsWHAsXG4gICAgICBsYXN0WHBFYXJuZWQ6IG5vdyxcbiAgICAgIGRhaWx5WHBFYXJuZWQ6IGlzTmV3RGF5ID8gcmV3YXJkLmFtb3VudCA6IHVzZXIuZGFpbHlYcEVhcm5lZCArIHJld2FyZC5hbW91bnQsXG4gICAgICB3ZWVrbHlYcEVhcm5lZDogaXNOZXdXZWVrID8gcmV3YXJkLmFtb3VudCA6IHVzZXIud2Vla2x5WHBFYXJuZWQgKyByZXdhcmQuYW1vdW50LFxuICAgICAgbW9udGhseVhwRWFybmVkOiBpc05ld01vbnRoID8gcmV3YXJkLmFtb3VudCA6IHVzZXIubW9udGhseVhwRWFybmVkICsgcmV3YXJkLmFtb3VudFxuICAgIH1cblxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQv9C+0LLRi9GI0LXQvdC40LUg0YPRgNC+0LLQvdGPXG4gICAgY29uc3QgbmV3TGV2ZWwgPSB0aGlzLmNhbGN1bGF0ZUxldmVsKG5ld1hwLCAodXNlciBhcyBhbnkpLnJvbGUpXG4gICAgbGV0IGxldmVsVXAgPSBudWxsXG5cbiAgICBpZiAobmV3TGV2ZWwgPiB1c2VyLmN1cnJlbnRMZXZlbCkge1xuICAgICAgdXBkYXRlRGF0YS5jdXJyZW50TGV2ZWwgPSBuZXdMZXZlbFxuICAgICAgY29uc3QgbGV2ZWxzID0gKHVzZXIgYXMgYW55KS5yb2xlID09PSAnZXhlY3V0b3InID8gRVhFQ1VUT1JfTEVWRUxTIDogQ0xJRU5UX0xFVkVMU1xuICAgICAgbGV2ZWxVcCA9IHtcbiAgICAgICAgb2xkTGV2ZWw6IHVzZXIuY3VycmVudExldmVsLFxuICAgICAgICBuZXdMZXZlbDogbmV3TGV2ZWwsXG4gICAgICAgIGxldmVsQ29uZmlnOiBsZXZlbHMuZmluZChsID0+IGwubGV2ZWwgPT09IG5ld0xldmVsKVxuICAgICAgfVxuXG4gICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INC+INC/0L7QstGL0YjQtdC90LjQuCDRg9GA0L7QstC90Y9cbiAgICAgIGlmIChsZXZlbFVwLmxldmVsQ29uZmlnKSB7XG4gICAgICAgIGF3YWl0IG5vdGlmaWNhdGlvblNlcnZpY2Uubm90aWZ5TGV2ZWxVcChcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgdXNlci5jdXJyZW50TGV2ZWwsXG4gICAgICAgICAgbmV3TGV2ZWwsXG4gICAgICAgICAgbGV2ZWxVcC5sZXZlbENvbmZpZ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vINCU0LDQttC1INC10YHQu9C4INGD0YDQvtCy0LXQvdGMINC90LUg0L/QvtCy0YvRgdC40LvRgdGPLCDQvtCx0L3QvtCy0LvRj9C10LwgY3VycmVudExldmVsINC00LvRjyDRgdC40L3RhdGA0L7QvdC40LfQsNGG0LjQuFxuICAgICAgdXBkYXRlRGF0YS5jdXJyZW50TGV2ZWwgPSBuZXdMZXZlbFxuICAgIH1cblxuICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQuNC30LzQtdC90LXQvdC40Y9cbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YTogdXBkYXRlRGF0YVxuICAgIH0pXG5cbiAgICAvLyDQl9Cw0L/QuNGB0YvQstCw0LXQvCDQsiDQuNGB0YLQvtGA0LjRjiBYUFxuICAgIGF3YWl0IHByaXNtYS54cEhpc3RvcnkuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIHhwQW1vdW50OiByZXdhcmQuYW1vdW50LFxuICAgICAgICBzb3VyY2U6IHJld2FyZC5zb3VyY2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZXdhcmQuZGVzY3JpcHRpb24sXG4gICAgICAgIG1ldGFkYXRhOiByZXdhcmQubWV0YWRhdGFcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC00L7RgdGC0LjQttC10L3QuNGPXG4gICAgYXdhaXQgdGhpcy5jaGVja0FjaGlldmVtZW50cyh1c2VySWQpXG5cbiAgICByZXR1cm4ge1xuICAgICAgbmV3TGV2ZWw6ICEhbGV2ZWxVcCxcbiAgICAgIGxldmVsVXBcbiAgICB9XG4gIH1cblxuICAvLyDQn9GA0L7QstC10YDQutCwINC4INCy0YvQtNCw0YfQsCDQtNC+0YHRgtC40LbQtdC90LjQuVxuICBhc3luYyBjaGVja0FjaGlldmVtZW50cyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5nZXRVc2VyV2l0aFN0YXRzKHVzZXJJZClcbiAgICBjb25zdCBuZXdBY2hpZXZlbWVudHMgPSBbXVxuXG4gICAgLy8g0JLRi9Cx0LjRgNCw0LXQvCDQtNC+0YHRgtC40LbQtdC90LjRjyDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YDQvtC70LhcbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSAodXNlciBhcyBhbnkpLnJvbGUgPT09ICdleGVjdXRvcicgPyBFWEVDVVRPUl9BQ0hJRVZFTUVOVFMgOiBDTElFTlRfQUNISUVWRU1FTlRTXG5cbiAgICBmb3IgKGNvbnN0IGFjaGlldmVtZW50IG9mIGFjaGlldmVtZW50cykge1xuICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDQtdGB0YLRjCDQu9C4INGD0LbQtSDRjdGC0L4g0LTQvtGB0YLQuNC20LXQvdC40LUg0YMg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgICBjb25zdCBleGlzdGluZ0FjaGlldmVtZW50ID0gYXdhaXQgcHJpc21hLnVzZXJBY2hpZXZlbWVudC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB1c2VySWRfYWNoaWV2ZW1lbnRJZDoge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBhY2hpZXZlbWVudElkOiBwYXJzZUludChhY2hpZXZlbWVudC5pZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmIChleGlzdGluZ0FjaGlldmVtZW50KSBjb250aW51ZVxuXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YPRgdC70L7QstC40LUg0LTQvtGB0YLQuNC20LXQvdC40Y9cbiAgICAgIGlmIChhY2hpZXZlbWVudC5jb25kaXRpb24odXNlcikpIHtcbiAgICAgICAgLy8g0JLRi9C00LDQtdC8INC00L7RgdGC0LjQttC10L3QuNC1XG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyQWNoaWV2ZW1lbnQuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIGFjaGlldmVtZW50SWQ6IHBhcnNlSW50KGFjaGlldmVtZW50LmlkKSxcbiAgICAgICAgICAgIHhwRWFybmVkOiBhY2hpZXZlbWVudC54cFJld2FyZFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10LwgWFAg0LfQsCDQtNC+0YHRgtC40LbQtdC90LjQtVxuICAgICAgICBpZiAoYWNoaWV2ZW1lbnQueHBSZXdhcmQgPiAwKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRYcCh1c2VySWQsIHtcbiAgICAgICAgICAgIGFtb3VudDogYWNoaWV2ZW1lbnQueHBSZXdhcmQsXG4gICAgICAgICAgICBzb3VyY2U6ICdhY2hpZXZlbWVudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYNCU0L7RgdGC0LjQttC10L3QuNC1OiAke2FjaGlldmVtZW50LnRpdGxlfWAsXG4gICAgICAgICAgICBtZXRhZGF0YTogeyBhY2hpZXZlbWVudElkOiBhY2hpZXZlbWVudC5pZCB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8INGD0LLQtdC00L7QvNC70LXQvdC40LUg0L4g0LTQvtGB0YLQuNC20LXQvdC40LhcbiAgICAgICAgYXdhaXQgbm90aWZpY2F0aW9uU2VydmljZS5ub3RpZnlBY2hpZXZlbWVudCh1c2VySWQsIGFjaGlldmVtZW50KVxuXG4gICAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgICBpZDogYWNoaWV2ZW1lbnQuaWQsXG4gICAgICAgICAgdGl0bGU6IGFjaGlldmVtZW50LnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBhY2hpZXZlbWVudC5kZXNjcmlwdGlvbixcbiAgICAgICAgICBpY29uOiBhY2hpZXZlbWVudC5pY29uLFxuICAgICAgICAgIHJhcml0eTogYWNoaWV2ZW1lbnQucmFyaXR5LFxuICAgICAgICAgIHhwUmV3YXJkOiBhY2hpZXZlbWVudC54cFJld2FyZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdBY2hpZXZlbWVudHNcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDQtNC+0YHRgtC40LbQtdC90LjQuSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgYXN5bmMgZ2V0VXNlckFjaGlldmVtZW50cyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCBwcmlzbWEudXNlckFjaGlldmVtZW50LmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBhY2hpZXZlbWVudDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHsgZWFybmVkQXQ6ICdkZXNjJyB9XG4gICAgfSlcblxuICAgIHJldHVybiBhY2hpZXZlbWVudHMubWFwKHVhID0+ICh7XG4gICAgICBpZDogdWEuYWNoaWV2ZW1lbnQuaWQsXG4gICAgICB0aXRsZTogdWEuYWNoaWV2ZW1lbnQudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogdWEuYWNoaWV2ZW1lbnQuZGVzY3JpcHRpb24sXG4gICAgICBpY29uOiB1YS5hY2hpZXZlbWVudC5pY29uLFxuICAgICAgcmFyaXR5OiB1YS5hY2hpZXZlbWVudC5yYXJpdHksXG4gICAgICB4cFJld2FyZDogdWEueHBFYXJuZWQsXG4gICAgICBlYXJuZWRBdDogdWEuZWFybmVkQXQsXG4gICAgICBpc05vdGlmaWVkOiB1YS5pc05vdGlmaWVkXG4gICAgfSkpXG4gIH1cblxuICAvLyDQn9C+0LvRg9GH0LXQvdC40LUg0LjRgdGC0L7RgNC40LggWFBcbiAgYXN5bmMgZ2V0WHBIaXN0b3J5KHVzZXJJZDogbnVtYmVyLCBsaW1pdDogbnVtYmVyID0gNTApOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHByaXNtYS54cEhpc3RvcnkuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IGVhcm5lZEF0OiAnZGVzYycgfSxcbiAgICAgIHRha2U6IGxpbWl0XG4gICAgfSlcblxuICAgIHJldHVybiBoaXN0b3J5Lm1hcChlbnRyeSA9PiAoe1xuICAgICAgaWQ6IGVudHJ5LmlkLFxuICAgICAgeHBBbW91bnQ6IGVudHJ5LnhwQW1vdW50LFxuICAgICAgc291cmNlOiBlbnRyeS5zb3VyY2UsXG4gICAgICBkZXNjcmlwdGlvbjogZW50cnkuZGVzY3JpcHRpb24sXG4gICAgICBtZXRhZGF0YTogZW50cnkubWV0YWRhdGEsXG4gICAgICBlYXJuZWRBdDogZW50cnkuZWFybmVkQXRcbiAgICB9KSlcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDRgdGC0LDRgtC40YHRgtC40LrQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgYXN5bmMgZ2V0VXNlclN0YXRzKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5nZXRVc2VyV2l0aFN0YXRzKHVzZXJJZClcbiAgICBjb25zdCBsZXZlbCA9IGF3YWl0IHRoaXMuZ2V0VXNlckxldmVsKHVzZXJJZClcbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2hpZXZlbWVudHModXNlcklkKVxuICAgIGNvbnN0IHhwSGlzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0WHBIaXN0b3J5KHVzZXJJZCwgMTApXG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgbmFtZTogKHVzZXIgYXMgYW55KS5uYW1lLFxuICAgICAgICBlbWFpbDogKHVzZXIgYXMgYW55KS5lbWFpbCxcbiAgICAgICAgcm9sZTogKHVzZXIgYXMgYW55KS5yb2xlXG4gICAgICB9LFxuICAgICAgbGV2ZWwsXG4gICAgICB4cDoge1xuICAgICAgICBjdXJyZW50OiB1c2VyLmV4cGVyaWVuY2VQb2ludHMsXG4gICAgICAgIHRvdGFsOiB1c2VyLnRvdGFsWHBFYXJuZWQsXG4gICAgICAgIGRhaWx5OiB1c2VyLmRhaWx5WHBFYXJuZWQsXG4gICAgICAgIHdlZWtseTogdXNlci53ZWVrbHlYcEVhcm5lZCxcbiAgICAgICAgbW9udGhseTogdXNlci5tb250aGx5WHBFYXJuZWRcbiAgICAgIH0sXG4gICAgICBhY2hpZXZlbWVudHM6IHtcbiAgICAgICAgdG90YWw6IGFjaGlldmVtZW50cy5sZW5ndGgsXG4gICAgICAgIHJlY2VudDogYWNoaWV2ZW1lbnRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBieVJhcml0eTogdGhpcy5ncm91cEFjaGlldmVtZW50c0J5UmFyaXR5KGFjaGlldmVtZW50cylcbiAgICAgIH0sXG4gICAgICB4cEhpc3Rvcnk6IHhwSGlzdG9yeS5zbGljZSgwLCAxMCksXG4gICAgICBuZXh0TGV2ZWw6IHRoaXMuZ2V0TmV4dExldmVsSW5mbyh1c2VyLmV4cGVyaWVuY2VQb2ludHMsICh1c2VyIGFzIGFueSkucm9sZSlcbiAgICB9XG4gIH1cblxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGA0LXRhNC10YDQsNC70YzQvdC+0LPQviDQutC+0LTQsFxuICBhc3luYyBjcmVhdGVSZWZlcnJhbENvZGUodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGNvZGUgPSB0aGlzLmdlbmVyYXRlUmVmZXJyYWxDb2RlKClcbiAgICBcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YTogeyByZWZlcnJhbENvZGU6IGNvZGUgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gY29kZVxuICB9XG5cbiAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINGA0LXRhNC10YDQsNC70LBcbiAgYXN5bmMgcHJvY2Vzc1JlZmVycmFsKHJlZmVycmFsQ29kZTogc3RyaW5nLCBuZXdVc2VySWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcmVmZXJyZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHJlZmVycmFsQ29kZSB9XG4gICAgfSlcblxuICAgIGlmICghcmVmZXJyZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign0J3QtdCy0LXRgNC90YvQuSDRgNC10YTQtdGA0LDQu9GM0L3Ri9C5INC60L7QtCcpXG4gICAgfVxuXG4gICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INC00LDQvdC90YvQtSDQvdC+0LLQvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBuZXdVc2VySWQgfSxcbiAgICAgIGRhdGE6IHsgcmVmZXJyZWRCeTogcmVmZXJyZXIuaWQgfVxuICAgIH0pXG5cbiAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YHRh9C10YLRh9C40Log0YDQtdGE0LXRgNCw0LvQvtCyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiByZWZlcnJlci5pZCB9LFxuICAgICAgZGF0YTogeyByZWZlcnJhbENvdW50OiB7IGluY3JlbWVudDogMSB9IH1cbiAgICB9KVxuXG4gICAgLy8g0JLRi9C00LDQtdC8INC90LDQs9GA0LDQtNGLXG4gICAgY29uc3QgcmVmZXJyZXJSZXdhcmQgPSBhd2FpdCB0aGlzLmFkZFhwKHJlZmVycmVyLmlkLCB7XG4gICAgICBhbW91bnQ6IFhQX1JFV0FSRFMuUkVGRVJSQUxfUkVHSVNUUkFUSU9OLFxuICAgICAgc291cmNlOiAncmVmZXJyYWwnLFxuICAgICAgZGVzY3JpcHRpb246ICfQn9GA0LjQs9C70LDRiNC10L3QuNC1INC00YDRg9Cz0LAnLFxuICAgICAgbWV0YWRhdGE6IHsgcmVmZXJyZWRVc2VySWQ6IG5ld1VzZXJJZCB9XG4gICAgfSlcblxuICAgIGNvbnN0IG5ld1VzZXJSZXdhcmQgPSBhd2FpdCB0aGlzLmFkZFhwKG5ld1VzZXJJZCwge1xuICAgICAgYW1vdW50OiA1MCxcbiAgICAgIHNvdXJjZTogJ3JlZmVycmFsX2JvbnVzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAn0JHQvtC90YPRgSDQt9CwINGA0LXQs9C40YHRgtGA0LDRhtC40Y4g0L/QviDQv9GA0LjQs9C70LDRiNC10L3QuNGOJyxcbiAgICAgIG1ldGFkYXRhOiB7IHJlZmVycmVySWQ6IHJlZmVycmVyLmlkIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZmVycmVyUmV3YXJkLFxuICAgICAgbmV3VXNlclJld2FyZCxcbiAgICAgIHJlZmVycmVyOiB7XG4gICAgICAgIGlkOiByZWZlcnJlci5pZCxcbiAgICAgICAgbmFtZTogcmVmZXJyZXIubmFtZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vINCS0YHQv9C+0LzQvtCz0LDRgtC10LvRjNC90YvQtSDQvNC10YLQvtC00YtcbiAgY2FsY3VsYXRlTGV2ZWwoeHA6IG51bWJlciwgcm9sZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBsZXZlbHMgPSByb2xlID09PSAnZXhlY3V0b3InID8gRVhFQ1VUT1JfTEVWRUxTIDogQ0xJRU5UX0xFVkVMU1xuICAgIGZvciAobGV0IGkgPSBsZXZlbHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmICh4cCA+PSBsZXZlbHNbaV0ueHBSZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4gbGV2ZWxzW2ldLmxldmVsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAxXG4gIH1cblxuICBnZXROZXh0TGV2ZWxJbmZvKGN1cnJlbnRYcDogbnVtYmVyLCByb2xlOiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IGxldmVscyA9IHJvbGUgPT09ICdleGVjdXRvcicgPyBFWEVDVVRPUl9MRVZFTFMgOiBDTElFTlRfTEVWRUxTXG4gICAgY29uc3QgY3VycmVudExldmVsID0gdGhpcy5jYWxjdWxhdGVMZXZlbChjdXJyZW50WHAsIHJvbGUpXG4gICAgY29uc3QgbmV4dExldmVsID0gbGV2ZWxzLmZpbmQobCA9PiBsLmxldmVsID09PSBjdXJyZW50TGV2ZWwgKyAxKVxuICAgIFxuICAgIGlmICghbmV4dExldmVsKSB7XG4gICAgICByZXR1cm4gbnVsbCAvLyDQnNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0YPRgNC+0LLQtdC90YxcbiAgICB9XG5cbiAgICBjb25zdCB4cE5lZWRlZCA9IG5leHRMZXZlbC54cFJlcXVpcmVkIC0gY3VycmVudFhwXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSAoKGN1cnJlbnRYcCAtIGxldmVsc1tjdXJyZW50TGV2ZWwgLSAxXS54cFJlcXVpcmVkKSAvIFxuICAgICAgICAgICAgICAgICAgICAgKG5leHRMZXZlbC54cFJlcXVpcmVkIC0gbGV2ZWxzW2N1cnJlbnRMZXZlbCAtIDFdLnhwUmVxdWlyZWQpKSAqIDEwMFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBuZXh0TGV2ZWwubGV2ZWwsXG4gICAgICB0aXRsZTogbmV4dExldmVsLnRpdGxlLFxuICAgICAgaWNvbjogbmV4dExldmVsLmljb24sXG4gICAgICB4cE5lZWRlZCxcbiAgICAgIHByb2dyZXNzOiBNYXRoLnJvdW5kKHByb2dyZXNzKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VXNlcldpdGhTdGF0cyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8R2FtaWZpY2F0aW9uVXNlcj4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgY2xpZW50T3JkZXJzOiB0cnVlLFxuICAgICAgICBleGVjdXRvck9yZGVyczogdHJ1ZSxcbiAgICAgICAgY2xpZW50UmV2aWV3czogdHJ1ZSxcbiAgICAgICAgZXhlY3V0b3JSZXZpZXdzOiB0cnVlLFxuICAgICAgICBhY2hpZXZlbWVudHM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7IGFjaGlldmVtZW50OiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9JylcbiAgICB9XG5cbiAgICAvLyDQktGL0YfQuNGB0LvRj9C10Lwg0YHRgtCw0YLQuNGB0YLQuNC60YNcbiAgICBjb25zdCBvcmRlcnNDb3VudCA9IHVzZXIucm9sZSA9PT0gJ2NsaWVudCcgPyB1c2VyLmNsaWVudE9yZGVycy5sZW5ndGggOiB1c2VyLmV4ZWN1dG9yT3JkZXJzLmxlbmd0aFxuICAgIGNvbnN0IHJldmlld3NDb3VudCA9IHVzZXIucm9sZSA9PT0gJ2NsaWVudCcgPyB1c2VyLmNsaWVudFJldmlld3MubGVuZ3RoIDogdXNlci5leGVjdXRvclJldmlld3MubGVuZ3RoXG4gICAgXG4gICAgLy8g0JLRi9GH0LjRgdC70Y/QtdC8INGA0LXQudGC0LjQvdCzXG4gICAgbGV0IHJhdGluZyA9IDBcbiAgICBpZiAodXNlci5yb2xlID09PSAnZXhlY3V0b3InICYmIHVzZXIuZXhlY3V0b3JSZXZpZXdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvdGFsUmF0aW5nID0gdXNlci5leGVjdXRvclJldmlld3MucmVkdWNlKChzdW0sIHJldmlldykgPT4gc3VtICsgcmV2aWV3LnJhdGluZywgMClcbiAgICAgIHJhdGluZyA9IHRvdGFsUmF0aW5nIC8gdXNlci5leGVjdXRvclJldmlld3MubGVuZ3RoXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgZXhwZXJpZW5jZVBvaW50czogdXNlci5leHBlcmllbmNlUG9pbnRzLFxuICAgICAgY3VycmVudExldmVsOiB1c2VyLmN1cnJlbnRMZXZlbCxcbiAgICAgIHRvdGFsWHBFYXJuZWQ6IHVzZXIudG90YWxYcEVhcm5lZCxcbiAgICAgIGRhaWx5WHBFYXJuZWQ6IHVzZXIuZGFpbHlYcEVhcm5lZCxcbiAgICAgIHdlZWtseVhwRWFybmVkOiB1c2VyLndlZWtseVhwRWFybmVkLFxuICAgICAgbW9udGhseVhwRWFybmVkOiB1c2VyLm1vbnRobHlYcEVhcm5lZCxcbiAgICAgIHJlZmVycmFsQ291bnQ6IHVzZXIucmVmZXJyYWxDb3VudCxcbiAgICAgIHJlZmVycmFsRWFybmluZ3M6IE51bWJlcih1c2VyLnJlZmVycmFsRWFybmluZ3MpLFxuICAgICAgb3JkZXJzQ291bnQsXG4gICAgICByZXZpZXdzQ291bnQsXG4gICAgICByYXRpbmcsXG4gICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLCAvLyBUT0RPOiDQstGL0YfQuNGB0LvQuNGC0Ywg0LjQtyDQtNCw0L3QvdGL0YVcbiAgICAgIGRhaWx5TG9naW5TdHJlYWs6IDAsIC8vIFRPRE86INCy0YvRh9C40YHQu9C40YLRjCDQuNC3INC00LDQvdC90YvRhVxuICAgICAgbmlnaHRPcmRlcnNDb3VudDogMCwgLy8gVE9ETzog0LLRi9GH0LjRgdC70LjRgtGMINC40Lcg0LTQsNC90L3Ri9GFXG4gICAgICB3ZWVrZW5kT3JkZXJzQ291bnQ6IDAsIC8vIFRPRE86INCy0YvRh9C40YHQu9C40YLRjCDQuNC3INC00LDQvdC90YvRhVxuICAgICAgY29uc2VjdXRpdmVPcmRlcnM6IDAsIC8vIFRPRE86INCy0YvRh9C40YHQu9C40YLRjCDQuNC3INC00LDQvdC90YvRhVxuICAgICAgaXNFYXJseVVzZXI6IHVzZXIuY3JlYXRlZEF0IDwgbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgIG1lbnRvckNvdW50OiAwLCAvLyBUT0RPOiDQstGL0YfQuNGB0LvQuNGC0Ywg0LjQtyDQtNCw0L3QvdGL0YVcbiAgICAgIHRvdGFsT3JkZXJzOiBvcmRlcnNDb3VudCxcbiAgICAgIG1vbnRobHlSYXRpbmc6IHJhdGluZyAvLyBUT0RPOiDQstGL0YfQuNGB0LvQuNGC0Ywg0LfQsCDQvNC10YHRj9GGXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBncm91cEFjaGlldmVtZW50c0J5UmFyaXR5KGFjaGlldmVtZW50czogYW55W10pOiBhbnkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSB7XG4gICAgICBjb21tb246IDAsXG4gICAgICByYXJlOiAwLFxuICAgICAgZXBpYzogMCxcbiAgICAgIGxlZ2VuZGFyeTogMFxuICAgIH1cblxuICAgIGFjaGlldmVtZW50cy5mb3JFYWNoKGFjaGlldmVtZW50ID0+IHtcbiAgICAgIGdyb3VwZWRbYWNoaWV2ZW1lbnQucmFyaXR5IGFzIGtleW9mIHR5cGVvZiBncm91cGVkXSsrXG4gICAgfSlcblxuICAgIHJldHVybiBncm91cGVkXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVmZXJyYWxDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5J1xuICAgIGxldCByZXN1bHQgPSAnJ1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHByaXZhdGUgaXNOZXdEYXkobm93OiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpXG4gICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUodG9kYXkpXG4gICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpXG4gICAgcmV0dXJuIG5vdyA+PSB0b2RheVxuICB9XG5cbiAgcHJpdmF0ZSBpc05ld1dlZWsobm93OiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnRPZldlZWsgPSBuZXcgRGF0ZShub3cpXG4gICAgc3RhcnRPZldlZWsuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gbm93LmdldERheSgpKVxuICAgIHN0YXJ0T2ZXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgcmV0dXJuIG5vdyA+PSBzdGFydE9mV2Vla1xuICB9XG5cbiAgcHJpdmF0ZSBpc05ld01vbnRoKG5vdzogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN0YXJ0T2ZNb250aCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMSlcbiAgICByZXR1cm4gbm93ID49IHN0YXJ0T2ZNb250aFxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBnYW1pZmljYXRpb25TZXJ2aWNlID0gbmV3IEdhbWlmaWNhdGlvblNlcnZpY2UoKVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIkNMSUVOVF9MRVZFTFMiLCJFWEVDVVRPUl9MRVZFTFMiLCJDTElFTlRfQUNISUVWRU1FTlRTIiwiRVhFQ1VUT1JfQUNISUVWRU1FTlRTIiwiWFBfUkVXQVJEUyIsIk5vdGlmaWNhdGlvblNlcnZpY2UiLCJwcmlzbWEiLCJub3RpZmljYXRpb25TZXJ2aWNlIiwiR2FtaWZpY2F0aW9uU2VydmljZSIsImdldFVzZXJMZXZlbCIsInVzZXJJZCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInNlbGVjdCIsImV4cGVyaWVuY2VQb2ludHMiLCJjdXJyZW50TGV2ZWwiLCJyb2xlIiwiRXJyb3IiLCJsZXZlbHMiLCJsZXZlbENvbmZpZyIsImZpbmQiLCJsIiwibGV2ZWwiLCJ0aXRsZSIsImljb24iLCJjb2xvciIsImFkZFhwIiwicmV3YXJkIiwidG90YWxYcEVhcm5lZCIsImRhaWx5WHBFYXJuZWQiLCJ3ZWVrbHlYcEVhcm5lZCIsIm1vbnRobHlYcEVhcm5lZCIsIm5ld1hwIiwiYW1vdW50IiwibmV3VG90YWxYcCIsIm5vdyIsIkRhdGUiLCJpc05ld0RheSIsImlzTmV3V2VlayIsImlzTmV3TW9udGgiLCJ1cGRhdGVEYXRhIiwibGFzdFhwRWFybmVkIiwibmV3TGV2ZWwiLCJjYWxjdWxhdGVMZXZlbCIsImxldmVsVXAiLCJvbGRMZXZlbCIsIm5vdGlmeUxldmVsVXAiLCJ1cGRhdGUiLCJkYXRhIiwieHBIaXN0b3J5IiwiY3JlYXRlIiwieHBBbW91bnQiLCJzb3VyY2UiLCJkZXNjcmlwdGlvbiIsIm1ldGFkYXRhIiwiY2hlY2tBY2hpZXZlbWVudHMiLCJnZXRVc2VyV2l0aFN0YXRzIiwibmV3QWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnQiLCJleGlzdGluZ0FjaGlldmVtZW50IiwidXNlckFjaGlldmVtZW50IiwidXNlcklkX2FjaGlldmVtZW50SWQiLCJhY2hpZXZlbWVudElkIiwicGFyc2VJbnQiLCJjb25kaXRpb24iLCJ4cEVhcm5lZCIsInhwUmV3YXJkIiwibm90aWZ5QWNoaWV2ZW1lbnQiLCJwdXNoIiwicmFyaXR5IiwiZ2V0VXNlckFjaGlldmVtZW50cyIsImZpbmRNYW55IiwiaW5jbHVkZSIsIm9yZGVyQnkiLCJlYXJuZWRBdCIsIm1hcCIsInVhIiwiaXNOb3RpZmllZCIsImdldFhwSGlzdG9yeSIsImxpbWl0IiwiaGlzdG9yeSIsInRha2UiLCJlbnRyeSIsImdldFVzZXJTdGF0cyIsIm5hbWUiLCJlbWFpbCIsInhwIiwiY3VycmVudCIsInRvdGFsIiwiZGFpbHkiLCJ3ZWVrbHkiLCJtb250aGx5IiwibGVuZ3RoIiwicmVjZW50Iiwic2xpY2UiLCJieVJhcml0eSIsImdyb3VwQWNoaWV2ZW1lbnRzQnlSYXJpdHkiLCJuZXh0TGV2ZWwiLCJnZXROZXh0TGV2ZWxJbmZvIiwiY3JlYXRlUmVmZXJyYWxDb2RlIiwiY29kZSIsImdlbmVyYXRlUmVmZXJyYWxDb2RlIiwicmVmZXJyYWxDb2RlIiwicHJvY2Vzc1JlZmVycmFsIiwibmV3VXNlcklkIiwicmVmZXJyZXIiLCJyZWZlcnJlZEJ5IiwicmVmZXJyYWxDb3VudCIsImluY3JlbWVudCIsInJlZmVycmVyUmV3YXJkIiwiUkVGRVJSQUxfUkVHSVNUUkFUSU9OIiwicmVmZXJyZWRVc2VySWQiLCJuZXdVc2VyUmV3YXJkIiwicmVmZXJyZXJJZCIsImkiLCJ4cFJlcXVpcmVkIiwiY3VycmVudFhwIiwieHBOZWVkZWQiLCJwcm9ncmVzcyIsIk1hdGgiLCJyb3VuZCIsImNsaWVudE9yZGVycyIsImV4ZWN1dG9yT3JkZXJzIiwiY2xpZW50UmV2aWV3cyIsImV4ZWN1dG9yUmV2aWV3cyIsIm9yZGVyc0NvdW50IiwicmV2aWV3c0NvdW50IiwicmF0aW5nIiwidG90YWxSYXRpbmciLCJyZWR1Y2UiLCJzdW0iLCJyZXZpZXciLCJyZWZlcnJhbEVhcm5pbmdzIiwiTnVtYmVyIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsImRhaWx5TG9naW5TdHJlYWsiLCJuaWdodE9yZGVyc0NvdW50Iiwid2Vla2VuZE9yZGVyc0NvdW50IiwiY29uc2VjdXRpdmVPcmRlcnMiLCJpc0Vhcmx5VXNlciIsImNyZWF0ZWRBdCIsIm1lbnRvckNvdW50IiwidG90YWxPcmRlcnMiLCJtb250aGx5UmF0aW5nIiwiZ3JvdXBlZCIsImNvbW1vbiIsInJhcmUiLCJlcGljIiwibGVnZW5kYXJ5IiwiZm9yRWFjaCIsImNoYXJzIiwicmVzdWx0IiwiY2hhckF0IiwiZmxvb3IiLCJyYW5kb20iLCJ0b2RheSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwieWVzdGVyZGF5Iiwic2V0RGF0ZSIsInN0YXJ0T2ZXZWVrIiwiZ2V0RGF5Iiwic2V0SG91cnMiLCJzdGFydE9mTW9udGgiLCJnYW1pZmljYXRpb25TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/gamificationService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/notificationService.ts":
/*!*************************************************!*\
  !*** ./lib/gamification/notificationService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationService: () => (/* binding */ NotificationService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _email_emailService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../email/emailService */ \"(rsc)/./lib/email/emailService.ts\");\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nclass NotificationService {\n    // Создание уведомления\n    async createNotification(data) {\n        try {\n            await prisma.notification.create({\n                data: {\n                    userId: data.userId,\n                    title: data.title,\n                    message: data.message,\n                    type: data.type,\n                    // metadata: data.metadata || {},\n                    isRead: false\n                }\n            });\n            // Отправляем email уведомление\n            await this.sendEmailNotification(data);\n        } catch (error) {\n            console.error(\"Error creating notification:\", error);\n        }\n    }\n    // Отправка email уведомления\n    async sendEmailNotification(data) {\n        try {\n            // Получаем email пользователя\n            const user = await prisma.user.findUnique({\n                where: {\n                    id: data.userId\n                },\n                select: {\n                    email: true\n                }\n            });\n            if (!user?.email) return;\n            // Отправляем email в зависимости от типа уведомления\n            switch(data.type){\n                case \"level_up\":\n                    if (data.metadata?.levelConfig) {\n                        await _email_emailService__WEBPACK_IMPORTED_MODULE_1__.emailService.sendLevelUpNotification(user.email, data.metadata.levelConfig);\n                    }\n                    break;\n            }\n        } catch (error) {\n            console.error(\"Error sending email notification:\", error);\n        }\n    }\n    // Создание уведомления о повышении уровня\n    async notifyLevelUp(userId, oldLevel, newLevel, levelConfig) {\n        await this.createNotification({\n            userId,\n            type: \"level_up\",\n            title: \"\\uD83C\\uDF89 Поздравляем с повышением уровня!\",\n            message: `Вы достигли уровня ${newLevel} - ${levelConfig.title}! ${levelConfig.icon}`,\n            icon: levelConfig.icon,\n            metadata: {\n                oldLevel,\n                newLevel,\n                levelConfig\n            }\n        });\n    }\n    // Создание уведомления о получении достижения\n    async notifyAchievement(userId, achievement) {\n        await this.createNotification({\n            userId,\n            type: \"achievement\",\n            title: \"\\uD83C\\uDFC6 Новое достижение!\",\n            message: `Вы получили достижение \"${achievement.title}\"! ${achievement.icon}`,\n            icon: achievement.icon,\n            xpAmount: achievement.xpReward,\n            metadata: {\n                achievementId: achievement.id,\n                achievement\n            }\n        });\n    }\n    // Создание уведомления о получении XP\n    async notifyXpGain(userId, xpAmount, source, description) {\n        await this.createNotification({\n            userId,\n            type: \"xp_gain\",\n            title: \"⚡ Получен XP!\",\n            message: `+${xpAmount} XP за ${description}`,\n            xpAmount,\n            metadata: {\n                source,\n                description\n            }\n        });\n    }\n    // Создание уведомления о реферале\n    async notifyReferral(userId, referralType, data) {\n        if (referralType === \"new_referral\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83D\\uDC65 Новый реферал!\",\n                message: `Ваш друг ${data.referredName} зарегистрировался по вашей ссылке!`,\n                icon: \"\\uD83C\\uDF81\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (referralType === \"referral_activity\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83C\\uDFAF Реферал активен!\",\n                message: `Ваш реферал ${data.referredName} ${data.activity}!`,\n                icon: \"⭐\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Создание уведомления о подписке\n    async notifySubscription(userId, subscriptionType, data) {\n        if (subscriptionType === \"new\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDCB3 Подписка активирована!\",\n                message: `Ваша подписка \"${data.planName}\" успешно активирована!`,\n                icon: \"\\uD83D\\uDC51\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (subscriptionType === \"renewal\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDD04 Подписка продлена!\",\n                message: `Ваша подписка \"${data.planName}\" продлена на ${data.period}!`,\n                icon: \"\\uD83D\\uDC8E\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Получение уведомлений пользователя\n    async getUserNotifications(userId, limit = 20) {\n        try {\n            const notifications = await prisma.notification.findMany({\n                where: {\n                    userId\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                take: limit\n            });\n            return notifications;\n        } catch (error) {\n            console.error(\"Error fetching notifications:\", error);\n            return [];\n        }\n    }\n    // Отметить уведомление как прочитанное\n    async markAsRead(notificationId) {\n        try {\n            await prisma.notification.update({\n                where: {\n                    id: notificationId\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking notification as read:\", error);\n        }\n    }\n    // Отметить все уведомления как прочитанные\n    async markAllAsRead(userId) {\n        try {\n            await prisma.notification.updateMany({\n                where: {\n                    userId,\n                    isRead: false\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking all notifications as read:\", error);\n        }\n    }\n    // Получение количества непрочитанных уведомлений\n    async getUnreadCount(userId) {\n        try {\n            const count = await prisma.notification.count({\n                where: {\n                    userId,\n                    isRead: false\n                }\n            });\n            return count;\n        } catch (error) {\n            console.error(\"Error getting unread count:\", error);\n            return 0;\n        }\n    }\n    // Удаление старых уведомлений (старше 30 дней)\n    async cleanupOldNotifications() {\n        try {\n            const thirtyDaysAgo = new Date();\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n            await prisma.notification.deleteMany({\n                where: {\n                    createdAt: {\n                        lt: thirtyDaysAgo\n                    },\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error cleaning up old notifications:\", error);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2FtaWZpY2F0aW9uL25vdGlmaWNhdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNPO0FBRXBELE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBWXhCLE1BQU1HO0lBQ1gsdUJBQXVCO0lBQ3ZCLE1BQU1DLG1CQUFtQkMsSUFBc0IsRUFBaUI7UUFDOUQsSUFBSTtZQUNGLE1BQU1ILE9BQU9JLFlBQVksQ0FBQ0MsTUFBTSxDQUFDO2dCQUMvQkYsTUFBTTtvQkFDSkcsUUFBUUgsS0FBS0csTUFBTTtvQkFDbkJDLE9BQU9KLEtBQUtJLEtBQUs7b0JBQ2pCQyxTQUFTTCxLQUFLSyxPQUFPO29CQUNyQkMsTUFBTU4sS0FBS00sSUFBSTtvQkFDZixpQ0FBaUM7b0JBQ2pDQyxRQUFRO2dCQUNWO1lBQ0Y7WUFFQSwrQkFBK0I7WUFDL0IsTUFBTSxJQUFJLENBQUNDLHFCQUFxQixDQUFDUjtRQUNuQyxFQUFFLE9BQU9TLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDaEQ7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QixNQUFjRCxzQkFBc0JSLElBQXNCLEVBQWlCO1FBQ3pFLElBQUk7WUFDRiw4QkFBOEI7WUFDOUIsTUFBTVcsT0FBTyxNQUFNZCxPQUFPYyxJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeENDLE9BQU87b0JBQUVDLElBQUlkLEtBQUtHLE1BQU07Z0JBQUM7Z0JBQ3pCWSxRQUFRO29CQUFFQyxPQUFPO2dCQUFLO1lBQ3hCO1lBRUEsSUFBSSxDQUFDTCxNQUFNSyxPQUFPO1lBRWxCLHFEQUFxRDtZQUNyRCxPQUFRaEIsS0FBS00sSUFBSTtnQkFDZixLQUFLO29CQUNILElBQUlOLEtBQUtpQixRQUFRLEVBQUVDLGFBQWE7d0JBQzlCLE1BQU10Qiw2REFBWUEsQ0FBQ3VCLHVCQUF1QixDQUFDUixLQUFLSyxLQUFLLEVBQUVoQixLQUFLaUIsUUFBUSxDQUFDQyxXQUFXO29CQUNsRjtvQkFDQTtZQUVK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QVFELEtBQUssQ0FBQyw0Q0FBNENBO1FBQzVEO0lBQ0Y7SUFFQSxpREFBaUQ7SUFDakQsTUFBTTJDLGVBQWVqRCxNQUFjLEVBQW1CO1FBQ3BELElBQUk7WUFDRixNQUFNa0QsUUFBUSxNQUFNeEQsT0FBT0ksWUFBWSxDQUFDb0QsS0FBSyxDQUFDO2dCQUM1Q3hDLE9BQU87b0JBQUVWO29CQUFRSSxRQUFRO2dCQUFNO1lBQ2pDO1lBQ0EsT0FBTzhDO1FBQ1QsRUFBRSxPQUFPNUMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtZQUM3QyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLCtDQUErQztJQUMvQyxNQUFNNkMsMEJBQXlDO1FBQzdDLElBQUk7WUFDRixNQUFNQyxnQkFBZ0IsSUFBSUM7WUFDMUJELGNBQWNFLE9BQU8sQ0FBQ0YsY0FBY0csT0FBTyxLQUFLO1lBRWhELE1BQU03RCxPQUFPSSxZQUFZLENBQUMwRCxVQUFVLENBQUM7Z0JBQ25DOUMsT0FBTztvQkFDTGdDLFdBQVc7d0JBQ1RlLElBQUlMO29CQUNOO29CQUNBaEQsUUFBUTtnQkFDVjtZQUNGO1FBQ0YsRUFBRSxPQUFPRSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3Q0FBd0NBO1FBQ3hEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2xpYi9nYW1pZmljYXRpb24vbm90aWZpY2F0aW9uU2VydmljZS50cz81M2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgZW1haWxTZXJ2aWNlIH0gZnJvbSAnLi4vZW1haWwvZW1haWxTZXJ2aWNlJ1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb25EYXRhIHtcbiAgdXNlcklkOiBudW1iZXJcbiAgdHlwZTogJ2xldmVsX3VwJyB8ICdhY2hpZXZlbWVudCcgfCAneHBfZ2FpbicgfCAncmVmZXJyYWwnIHwgJ3N1YnNjcmlwdGlvbicgfCAnc3VwcG9ydF90aWNrZXRfY3JlYXRlZCcgfCAnc3VwcG9ydF90aWNrZXRfYWRtaW4nIHwgJ3N1cHBvcnRfdGlja2V0X3JlcGx5J1xuICB0aXRsZTogc3RyaW5nXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBpY29uPzogc3RyaW5nXG4gIHhwQW1vdW50PzogbnVtYmVyXG4gIG1ldGFkYXRhPzogYW55XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPXG4gIGFzeW5jIGNyZWF0ZU5vdGlmaWNhdGlvbihkYXRhOiBOb3RpZmljYXRpb25EYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLFxuICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSxcbiAgICAgICAgICAvLyBtZXRhZGF0YTogZGF0YS5tZXRhZGF0YSB8fCB7fSxcbiAgICAgICAgICBpc1JlYWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8IGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40LVcbiAgICAgIGF3YWl0IHRoaXMuc2VuZEVtYWlsTm90aWZpY2F0aW9uKGRhdGEpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwIGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40Y9cbiAgcHJpdmF0ZSBhc3luYyBzZW5kRW1haWxOb3RpZmljYXRpb24oZGF0YTogTm90aWZpY2F0aW9uRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8IGVtYWlsINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGF0YS51c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGVtYWlsOiB0cnVlIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmICghdXNlcj8uZW1haWwpIHJldHVyblxuXG4gICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCBlbWFpbCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YLQuNC/0LAg0YPQstC10LTQvtC80LvQtdC90LjRj1xuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbGV2ZWxfdXAnOlxuICAgICAgICAgIGlmIChkYXRhLm1ldGFkYXRhPy5sZXZlbENvbmZpZykge1xuICAgICAgICAgICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRMZXZlbFVwTm90aWZpY2F0aW9uKHVzZXIuZW1haWwsIGRhdGEubWV0YWRhdGEubGV2ZWxDb25maWcpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIC8vINCU0L7QsdCw0LLQuNC8INC00YDRg9Cz0LjQtSDRgtC40L/RiyDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5INC/0L4g0LzQtdGA0LUg0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0LhcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbCBub3RpZmljYXRpb246JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7QstGL0YjQtdC90LjQuCDRg9GA0L7QstC90Y9cbiAgYXN5bmMgbm90aWZ5TGV2ZWxVcCh1c2VySWQ6IG51bWJlciwgb2xkTGV2ZWw6IG51bWJlciwgbmV3TGV2ZWw6IG51bWJlciwgbGV2ZWxDb25maWc6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHR5cGU6ICdsZXZlbF91cCcsXG4gICAgICB0aXRsZTogJ/Cfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCDRgSDQv9C+0LLRi9GI0LXQvdC40LXQvCDRg9GA0L7QstC90Y8hJyxcbiAgICAgIG1lc3NhZ2U6IGDQktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bmV3TGV2ZWx9IC0gJHtsZXZlbENvbmZpZy50aXRsZX0hICR7bGV2ZWxDb25maWcuaWNvbn1gLFxuICAgICAgaWNvbjogbGV2ZWxDb25maWcuaWNvbixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG9sZExldmVsLFxuICAgICAgICBuZXdMZXZlbCxcbiAgICAgICAgbGV2ZWxDb25maWdcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7Qu9GD0YfQtdC90LjQuCDQtNC+0YHRgtC40LbQtdC90LjRj1xuICBhc3luYyBub3RpZnlBY2hpZXZlbWVudCh1c2VySWQ6IG51bWJlciwgYWNoaWV2ZW1lbnQ6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHR5cGU6ICdhY2hpZXZlbWVudCcsXG4gICAgICB0aXRsZTogJ/Cfj4Yg0J3QvtCy0L7QtSDQtNC+0YHRgtC40LbQtdC90LjQtSEnLFxuICAgICAgbWVzc2FnZTogYNCS0Ysg0L/QvtC70YPRh9C40LvQuCDQtNC+0YHRgtC40LbQtdC90LjQtSBcIiR7YWNoaWV2ZW1lbnQudGl0bGV9XCIhICR7YWNoaWV2ZW1lbnQuaWNvbn1gLFxuICAgICAgaWNvbjogYWNoaWV2ZW1lbnQuaWNvbixcbiAgICAgIHhwQW1vdW50OiBhY2hpZXZlbWVudC54cFJld2FyZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGFjaGlldmVtZW50SWQ6IGFjaGlldmVtZW50LmlkLFxuICAgICAgICBhY2hpZXZlbWVudFxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0L/QvtC70YPRh9C10L3QuNC4IFhQXG4gIGFzeW5jIG5vdGlmeVhwR2Fpbih1c2VySWQ6IG51bWJlciwgeHBBbW91bnQ6IG51bWJlciwgc291cmNlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICB1c2VySWQsXG4gICAgICB0eXBlOiAneHBfZ2FpbicsXG4gICAgICB0aXRsZTogJ+KaoSDQn9C+0LvRg9GH0LXQvSBYUCEnLFxuICAgICAgbWVzc2FnZTogYCske3hwQW1vdW50fSBYUCDQt9CwICR7ZGVzY3JpcHRpb259YCxcbiAgICAgIHhwQW1vdW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgc291cmNlLFxuICAgICAgICBkZXNjcmlwdGlvblxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0YDQtdGE0LXRgNCw0LvQtVxuICBhc3luYyBub3RpZnlSZWZlcnJhbCh1c2VySWQ6IG51bWJlciwgcmVmZXJyYWxUeXBlOiAnbmV3X3JlZmVycmFsJyB8ICdyZWZlcnJhbF9hY3Rpdml0eScsIGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChyZWZlcnJhbFR5cGUgPT09ICduZXdfcmVmZXJyYWwnKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdHlwZTogJ3JlZmVycmFsJyxcbiAgICAgICAgdGl0bGU6ICfwn5GlINCd0L7QstGL0Lkg0YDQtdGE0LXRgNCw0LshJyxcbiAgICAgICAgbWVzc2FnZTogYNCS0LDRiCDQtNGA0YPQsyAke2RhdGEucmVmZXJyZWROYW1lfSDQt9Cw0YDQtdCz0LjRgdGC0YDQuNGA0L7QstCw0LvRgdGPINC/0L4g0LLQsNGI0LXQuSDRgdGB0YvQu9C60LUhYCxcbiAgICAgICAgaWNvbjogJ/CfjoEnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChyZWZlcnJhbFR5cGUgPT09ICdyZWZlcnJhbF9hY3Rpdml0eScpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0eXBlOiAncmVmZXJyYWwnLFxuICAgICAgICB0aXRsZTogJ/Cfjq8g0KDQtdGE0LXRgNCw0Lsg0LDQutGC0LjQstC10L0hJyxcbiAgICAgICAgbWVzc2FnZTogYNCS0LDRiCDRgNC10YTQtdGA0LDQuyAke2RhdGEucmVmZXJyZWROYW1lfSAke2RhdGEuYWN0aXZpdHl9IWAsXG4gICAgICAgIGljb246ICfirZAnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7QtNC/0LjRgdC60LVcbiAgYXN5bmMgbm90aWZ5U3Vic2NyaXB0aW9uKHVzZXJJZDogbnVtYmVyLCBzdWJzY3JpcHRpb25UeXBlOiAnbmV3JyB8ICdyZW5ld2FsJywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHN1YnNjcmlwdGlvblR5cGUgPT09ICduZXcnKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdHlwZTogJ3N1YnNjcmlwdGlvbicsXG4gICAgICAgIHRpdGxlOiAn8J+SsyDQn9C+0LTQv9C40YHQutCwINCw0LrRgtC40LLQuNGA0L7QstCw0L3QsCEnLFxuICAgICAgICBtZXNzYWdlOiBg0JLQsNGI0LAg0L/QvtC00L/QuNGB0LrQsCBcIiR7ZGF0YS5wbGFuTmFtZX1cIiDRg9GB0L/QtdGI0L3QviDQsNC60YLQuNCy0LjRgNC+0LLQsNC90LAhYCxcbiAgICAgICAgaWNvbjogJ/CfkZEnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChzdWJzY3JpcHRpb25UeXBlID09PSAncmVuZXdhbCcpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0eXBlOiAnc3Vic2NyaXB0aW9uJyxcbiAgICAgICAgdGl0bGU6ICfwn5SEINCf0L7QtNC/0LjRgdC60LAg0L/RgNC+0LTQu9C10L3QsCEnLFxuICAgICAgICBtZXNzYWdlOiBg0JLQsNGI0LAg0L/QvtC00L/QuNGB0LrQsCBcIiR7ZGF0YS5wbGFuTmFtZX1cIiDQv9GA0L7QtNC70LXQvdCwINC90LAgJHtkYXRhLnBlcmlvZH0hYCxcbiAgICAgICAgaWNvbjogJ/Cfko4nLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gIGFzeW5jIGdldFVzZXJOb3RpZmljYXRpb25zKHVzZXJJZDogbnVtYmVyLCBsaW1pdDogbnVtYmVyID0gMjApOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogbGltaXRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbm90aWZpY2F0aW9uc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBub3RpZmljYXRpb25zOicsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgLy8g0J7RgtC80LXRgtC40YLRjCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INC60LDQuiDQv9GA0L7Rh9C40YLQsNC90L3QvtC1XG4gIGFzeW5jIG1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBub3RpZmljYXRpb25JZCB9LFxuICAgICAgICBkYXRhOiB7IGlzUmVhZDogdHJ1ZSB9XG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIG5vdGlmaWNhdGlvbiBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vINCe0YLQvNC10YLQuNGC0Ywg0LLRgdC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LVcbiAgYXN5bmMgbWFya0FsbEFzUmVhZCh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQsIGlzUmVhZDogZmFsc2UgfSxcbiAgICAgICAgZGF0YTogeyBpc1JlYWQ6IHRydWUgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBhbGwgbm90aWZpY2F0aW9ucyBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvRhSDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5XG4gIGFzeW5jIGdldFVucmVhZENvdW50KHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkLCBpc1JlYWQ6IGZhbHNlIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gY291bnRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1bnJlYWQgY291bnQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgfVxuXG4gIC8vINCj0LTQsNC70LXQvdC40LUg0YHRgtCw0YDRi9GFINGD0LLQtdC00L7QvNC70LXQvdC40LkgKNGB0YLQsNGA0YjQtSAzMCDQtNC90LXQuSlcbiAgYXN5bmMgY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZSgpXG4gICAgICB0aGlydHlEYXlzQWdvLnNldERhdGUodGhpcnR5RGF5c0Fnby5nZXREYXRlKCkgLSAzMClcbiAgICAgIFxuICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGx0OiB0aGlydHlEYXlzQWdvXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc1JlYWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYW5pbmcgdXAgb2xkIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZW1haWxTZXJ2aWNlIiwicHJpc21hIiwiTm90aWZpY2F0aW9uU2VydmljZSIsImNyZWF0ZU5vdGlmaWNhdGlvbiIsImRhdGEiLCJub3RpZmljYXRpb24iLCJjcmVhdGUiLCJ1c2VySWQiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiaXNSZWFkIiwic2VuZEVtYWlsTm90aWZpY2F0aW9uIiwiZXJyb3IiLCJjb25zb2xlIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwiZW1haWwiLCJtZXRhZGF0YSIsImxldmVsQ29uZmlnIiwic2VuZExldmVsVXBOb3RpZmljYXRpb24iLCJub3RpZnlMZXZlbFVwIiwib2xkTGV2ZWwiLCJuZXdMZXZlbCIsImljb24iLCJub3RpZnlBY2hpZXZlbWVudCIsImFjaGlldmVtZW50IiwieHBBbW91bnQiLCJ4cFJld2FyZCIsImFjaGlldmVtZW50SWQiLCJub3RpZnlYcEdhaW4iLCJzb3VyY2UiLCJkZXNjcmlwdGlvbiIsIm5vdGlmeVJlZmVycmFsIiwicmVmZXJyYWxUeXBlIiwicmVmZXJyZWROYW1lIiwiYWN0aXZpdHkiLCJub3RpZnlTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25UeXBlIiwicGxhbk5hbWUiLCJwZXJpb2QiLCJnZXRVc2VyTm90aWZpY2F0aW9ucyIsImxpbWl0Iiwibm90aWZpY2F0aW9ucyIsImZpbmRNYW55Iiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInRha2UiLCJtYXJrQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJ1cGRhdGUiLCJtYXJrQWxsQXNSZWFkIiwidXBkYXRlTWFueSIsImdldFVucmVhZENvdW50IiwiY291bnQiLCJjbGVhbnVwT2xkTm90aWZpY2F0aW9ucyIsInRoaXJ0eURheXNBZ28iLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJkZWxldGVNYW55IiwibHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/notificationService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/referralService.ts":
/*!*********************************************!*\
  !*** ./lib/gamification/referralService.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReferralService: () => (/* binding */ ReferralService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"(rsc)/./lib/gamification/constants.ts\");\n/* harmony import */ var _gamificationService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gamificationService */ \"(rsc)/./lib/gamification/gamificationService.ts\");\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nclass ReferralService {\n    // Создание реферального кода\n    async createReferralCode(userId) {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                referralCode: true,\n                role: true\n            }\n        });\n        if (!user) {\n            throw new Error(\"Пользователь не найден\");\n        }\n        // Если код уже есть, возвращаем его\n        if (user.referralCode) {\n            return user.referralCode;\n        }\n        // Генерируем уникальный код\n        const code = this.generateReferralCode(user.role);\n        await prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: {\n                referralCode: code\n            }\n        });\n        return code;\n    }\n    // Использование реферального кода\n    async useReferralCode(userId, referralCode) {\n        // Находим пользователя, который пригласил\n        const referrer = await prisma.user.findUnique({\n            where: {\n                referralCode\n            },\n            select: {\n                id: true,\n                role: true,\n                referralCount: true\n            }\n        });\n        if (!referrer) {\n            return {\n                success: false,\n                message: \"Неверный реферальный код\"\n            };\n        }\n        if (referrer.id === userId) {\n            return {\n                success: false,\n                message: \"Нельзя использовать свой реферальный код\"\n            };\n        }\n        // Проверяем, не использовал ли уже этот пользователь реферальный код\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                referredBy: true,\n                role: true\n            }\n        });\n        if (user?.referredBy) {\n            return {\n                success: false,\n                message: \"Вы уже использовали реферальный код\"\n            };\n        }\n        // Обновляем пользователя\n        await prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: {\n                referredBy: referrer.id\n            }\n        });\n        // Увеличиваем счетчик рефералов\n        await prisma.user.update({\n            where: {\n                id: referrer.id\n            },\n            data: {\n                referralCount: referrer.referralCount + 1\n            }\n        });\n        // Создаем награды\n        const rewards = await this.createReferralRewards(referrer.id, userId, referrer.role, user?.role || \"client\");\n        // Проверяем уровни после начисления XP\n        try {\n            const gamificationService = new _gamificationService__WEBPACK_IMPORTED_MODULE_2__.GamificationService();\n            // Проверяем уровень пригласившего\n            const referrerLevel = gamificationService.calculateLevel((await prisma.user.findUnique({\n                where: {\n                    id: referrer.id\n                },\n                select: {\n                    experiencePoints: true\n                }\n            }))?.experiencePoints || 0, referrer.role);\n            const referrerCurrentLevel = (await prisma.user.findUnique({\n                where: {\n                    id: referrer.id\n                },\n                select: {\n                    currentLevel: true\n                }\n            }))?.currentLevel || 1;\n            if (referrerLevel > referrerCurrentLevel) {\n                await prisma.user.update({\n                    where: {\n                        id: referrer.id\n                    },\n                    data: {\n                        currentLevel: referrerLevel\n                    }\n                });\n            }\n            // Проверяем уровень приглашенного\n            const referredLevel = gamificationService.calculateLevel((await prisma.user.findUnique({\n                where: {\n                    id: userId\n                },\n                select: {\n                    experiencePoints: true\n                }\n            }))?.experiencePoints || 0, user?.role || \"client\");\n            const referredCurrentLevel = (await prisma.user.findUnique({\n                where: {\n                    id: userId\n                },\n                select: {\n                    currentLevel: true\n                }\n            }))?.currentLevel || 1;\n            if (referredLevel > referredCurrentLevel) {\n                await prisma.user.update({\n                    where: {\n                        id: userId\n                    },\n                    data: {\n                        currentLevel: referredLevel\n                    }\n                });\n            }\n        } catch (error) {\n            console.error(\"Ошибка при проверке уровней:\", error);\n        }\n        return {\n            success: true,\n            message: \"Реферальный код успешно применен!\",\n            rewards\n        };\n    }\n    // Создание наград за реферал\n    async createReferralRewards(referrerId, referredId, referrerRole, referredRole) {\n        const rewards = [];\n        const gamificationService = new _gamificationService__WEBPACK_IMPORTED_MODULE_2__.GamificationService();\n        // Награды для пригласившего\n        if (referrerRole === \"client\") {\n            // Клиент пригласил клиента\n            const referrerXp = _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_REGISTRATION;\n            // Используем GamificationService для начисления XP (автоматически обновит уровень)\n            await gamificationService.addXp(referrerId, {\n                amount: referrerXp,\n                source: \"referral\",\n                description: \"Приглашение друга\",\n                metadata: {\n                    referredUserId: referredId\n                }\n            });\n            rewards.push({\n                type: \"referrer\",\n                xp: referrerXp,\n                bonus: \"Приоритет в поиске на месяц\"\n            });\n        } else if (referrerRole === \"executor\") {\n            // Исполнитель пригласил исполнителя\n            const referrerXp = _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_EXECUTOR_REGISTRATION;\n            // Используем GamificationService для начисления XP (автоматически обновит уровень)\n            await gamificationService.addXp(referrerId, {\n                amount: referrerXp,\n                source: \"referral\",\n                description: \"Приглашение коллеги\",\n                metadata: {\n                    referredUserId: referredId\n                }\n            });\n            rewards.push({\n                type: \"referrer\",\n                xp: referrerXp,\n                bonus: \"Неделя бесплатной подписки\"\n            });\n        }\n        // Награды для приглашенного\n        if (referredRole === \"client\") {\n            const referredXp = _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_REGISTRATION / 2;\n            // Используем GamificationService для начисления XP (автоматически обновит уровень)\n            await gamificationService.addXp(referredId, {\n                amount: referredXp,\n                source: \"referral\",\n                description: \"Регистрация по приглашению\",\n                metadata: {\n                    referrerUserId: referrerId\n                }\n            });\n            rewards.push({\n                type: \"referred\",\n                xp: referredXp,\n                bonus: \"VIP статус на месяц\"\n            });\n        } else if (referredRole === \"executor\") {\n            const referredXp = _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_EXECUTOR_REGISTRATION / 2;\n            // Используем GamificationService для начисления XP (автоматически обновит уровень)\n            await gamificationService.addXp(referredId, {\n                amount: referredXp,\n                source: \"referral\",\n                description: \"Регистрация по приглашению\",\n                metadata: {\n                    referrerUserId: referrerId\n                }\n            });\n            rewards.push({\n                type: \"referred\",\n                xp: referredXp,\n                bonus: \"Месяц бесплатной подписки\"\n            });\n        }\n        // Достижения уже проверяются в GamificationService.addXp()\n        return rewards;\n    }\n    // Награда за первую подписку реферала (для исполнителей)\n    async rewardReferralSubscription(referredId) {\n        const gamificationService = new _gamificationService__WEBPACK_IMPORTED_MODULE_2__.GamificationService();\n        const user = await prisma.user.findUnique({\n            where: {\n                id: referredId\n            },\n            select: {\n                referredBy: true,\n                role: true\n            }\n        });\n        if (!user?.referredBy) return;\n        const referrer = await prisma.user.findUnique({\n            where: {\n                id: user.referredBy\n            },\n            select: {\n                role: true\n            }\n        });\n        if (!referrer) return;\n        // Награждаем пригласившего за подписку реферала\n        if (referrer.role === \"executor\" && user.role === \"executor\") {\n            const xpReward = _constants__WEBPACK_IMPORTED_MODULE_1__.XP_REWARDS.REFERRAL_EXECUTOR_SUBSCRIPTION;\n            // Используем GamificationService для начисления XP (автоматически обновит уровень)\n            await gamificationService.addXp(user.referredBy, {\n                amount: xpReward,\n                source: \"referral\",\n                description: \"Реферал оформил подписку\",\n                metadata: {\n                    referredUserId: referredId\n                }\n            });\n            // Создаем запись о награде\n            await prisma.referralReward.create({\n                data: {\n                    referrerId: user.referredBy,\n                    referredId: referredId,\n                    rewardType: \"xp\",\n                    rewardAmount: 0,\n                    xpAmount: xpReward,\n                    description: \"Реферал оформил подписку\",\n                    isPaid: true,\n                    paidAt: new Date()\n                }\n            });\n        }\n    }\n    // Получение статистики рефералов\n    async getReferralStats(userId) {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                referralCode: true,\n                referralCount: true,\n                referralEarnings: true,\n                referredBy: true\n            }\n        });\n        if (!user) {\n            throw new Error(\"Пользователь не найден\");\n        }\n        // Получаем список рефералов\n        const referrals = await prisma.user.findMany({\n            where: {\n                referredBy: userId\n            },\n            select: {\n                id: true,\n                name: true,\n                email: true,\n                role: true,\n                createdAt: true,\n                experiencePoints: true\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        // Получаем награды\n        const rewards = await prisma.referralReward.findMany({\n            where: {\n                referrerId: userId\n            },\n            select: {\n                id: true,\n                rewardType: true,\n                rewardAmount: true,\n                xpAmount: true,\n                description: true,\n                isPaid: true,\n                createdAt: true\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        return {\n            referralCode: user.referralCode,\n            totalReferrals: user.referralCount,\n            totalEarnings: user.referralEarnings,\n            referrals: referrals,\n            rewards: rewards,\n            isReferred: !!user.referredBy\n        };\n    }\n    // Генерация реферального кода\n    generateReferralCode(role) {\n        const prefix = role === \"executor\" ? \"EXE\" : \"CLI\";\n        const random = Math.random().toString(36).substring(2, 8).toUpperCase();\n        return `${prefix}${random}`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2FtaWZpY2F0aW9uL3JlZmVycmFsU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE2QztBQUNMO0FBQ21CO0FBRTNELE1BQU1HLFNBQVMsSUFBSUgsd0RBQVlBO0FBZXhCLE1BQU1JO0lBQ1gsNkJBQTZCO0lBQzdCLE1BQU1DLG1CQUFtQkMsTUFBYyxFQUFtQjtRQUN4RCxNQUFNQyxPQUFPLE1BQU1KLE9BQU9JLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQ3hDQyxPQUFPO2dCQUFFQyxJQUFJSjtZQUFPO1lBQ3BCSyxRQUFRO2dCQUFFQyxjQUFjO2dCQUFNQyxNQUFNO1lBQUs7UUFDM0M7UUFFQSxJQUFJLENBQUNOLE1BQU07WUFDVCxNQUFNLElBQUlPLE1BQU07UUFDbEI7UUFFQSxvQ0FBb0M7UUFDcEMsSUFBSVAsS0FBS0ssWUFBWSxFQUFFO1lBQ3JCLE9BQU9MLEtBQUtLLFlBQVk7UUFDMUI7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTUcsT0FBTyxJQUFJLENBQUNDLG9CQUFvQixDQUFDVCxLQUFLTSxJQUFJO1FBRWhELE1BQU1WLE9BQU9JLElBQUksQ0FBQ1UsTUFBTSxDQUFDO1lBQ3ZCUixPQUFPO2dCQUFFQyxJQUFJSjtZQUFPO1lBQ3BCWSxNQUFNO2dCQUFFTixjQUFjRztZQUFLO1FBQzdCO1FBRUEsT0FBT0E7SUFDVDtJQUVBLGtDQUFrQztJQUNsQyxNQUFNSSxnQkFBZ0JiLE1BQWMsRUFBRU0sWUFBb0IsRUFBaUU7UUFDekgsMENBQTBDO1FBQzFDLE1BQU1RLFdBQVcsTUFBTWpCLE9BQU9JLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQzVDQyxPQUFPO2dCQUFFRztZQUFhO1lBQ3RCRCxRQUFRO2dCQUFFRCxJQUFJO2dCQUFNRyxNQUFNO2dCQUFNUSxlQUFlO1lBQUs7UUFDdEQ7UUFFQSxJQUFJLENBQUNELFVBQVU7WUFDYixPQUFPO2dCQUFFRSxTQUFTO2dCQUFPQyxTQUFTO1lBQTJCO1FBQy9EO1FBRUEsSUFBSUgsU0FB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RTRCLFlBQVkvQjtZQUFPO1lBQzVCSyxRQUFRO2dCQUNORCxJQUFJO2dCQUNKbUQsWUFBWTtnQkFDWkMsY0FBYztnQkFDZEMsVUFBVTtnQkFDVmpCLGFBQWE7Z0JBQ2JrQixRQUFRO2dCQUNSUyxXQUFXO1lBQ2I7WUFDQUMsU0FBUztnQkFBRUQsV0FBVztZQUFPO1FBQy9CO1FBRUEsT0FBTztZQUNMN0QsY0FBY0wsS0FBS0ssWUFBWTtZQUMvQitELGdCQUFnQnBFLEtBQUtjLGFBQWE7WUFDbEN1RCxlQUFlckUsS0FBSzZELGdCQUFnQjtZQUNwQ0MsV0FBV0E7WUFDWDVDLFNBQVNBO1lBQ1RvRCxZQUFZLENBQUMsQ0FBQ3RFLEtBQUtpQixVQUFVO1FBQy9CO0lBQ0Y7SUFFQSw4QkFBOEI7SUFDdEJSLHFCQUFxQkgsSUFBWSxFQUFVO1FBQ2pELE1BQU1pRSxTQUFTakUsU0FBUyxhQUFhLFFBQVE7UUFDN0MsTUFBTWtFLFNBQVNDLEtBQUtELE1BQU0sR0FBR0UsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLEdBQUdDLFdBQVc7UUFDckUsT0FBTyxDQUFDLEVBQUVMLE9BQU8sRUFBRUMsT0FBTyxDQUFDO0lBQzdCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvLi9saWIvZ2FtaWZpY2F0aW9uL3JlZmVycmFsU2VydmljZS50cz85Nzk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgWFBfUkVXQVJEUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgR2FtaWZpY2F0aW9uU2VydmljZSB9IGZyb20gJy4vZ2FtaWZpY2F0aW9uU2VydmljZSdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVmZXJyYWxSZXdhcmQge1xuICBpZDogbnVtYmVyXG4gIHJlZmVycmVySWQ6IG51bWJlclxuICByZWZlcnJlZElkOiBudW1iZXJcbiAgcmV3YXJkVHlwZTogJ3hwJyB8ICdib251cycgfCAnYWNoaWV2ZW1lbnQnXG4gIHJld2FyZEFtb3VudDogbnVtYmVyXG4gIHhwQW1vdW50OiBudW1iZXJcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xuICBpc1BhaWQ6IGJvb2xlYW5cbiAgcGFpZEF0PzogRGF0ZVxuICBjcmVhdGVkQXQ6IERhdGVcbn1cblxuZXhwb3J0IGNsYXNzIFJlZmVycmFsU2VydmljZSB7XG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0YDQtdGE0LXRgNCw0LvRjNC90L7Qs9C+INC60L7QtNCwXG4gIGFzeW5jIGNyZWF0ZVJlZmVycmFsQ29kZSh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgc2VsZWN0OiB7IHJlZmVycmFsQ29kZTogdHJ1ZSwgcm9sZTogdHJ1ZSB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nKVxuICAgIH1cblxuICAgIC8vINCV0YHQu9C4INC60L7QtCDRg9C20LUg0LXRgdGC0YwsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC10LPQvlxuICAgIGlmICh1c2VyLnJlZmVycmFsQ29kZSkge1xuICAgICAgcmV0dXJuIHVzZXIucmVmZXJyYWxDb2RlXG4gICAgfVxuXG4gICAgLy8g0JPQtdC90LXRgNC40YDRg9C10Lwg0YPQvdC40LrQsNC70YzQvdGL0Lkg0LrQvtC0XG4gICAgY29uc3QgY29kZSA9IHRoaXMuZ2VuZXJhdGVSZWZlcnJhbENvZGUodXNlci5yb2xlKVxuICAgIFxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBkYXRhOiB7IHJlZmVycmFsQ29kZTogY29kZSB9XG4gICAgfSlcblxuICAgIHJldHVybiBjb2RlXG4gIH1cblxuICAvLyDQmNGB0L/QvtC70YzQt9C+0LLQsNC90LjQtSDRgNC10YTQtdGA0LDQu9GM0L3QvtCz0L4g0LrQvtC00LBcbiAgYXN5bmMgdXNlUmVmZXJyYWxDb2RlKHVzZXJJZDogbnVtYmVyLCByZWZlcnJhbENvZGU6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IHJld2FyZHM/OiBhbnkgfT4ge1xuICAgIC8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjywg0LrQvtGC0L7RgNGL0Lkg0L/RgNC40LPQu9Cw0YHQuNC7XG4gICAgY29uc3QgcmVmZXJyZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHJlZmVycmFsQ29kZSB9LFxuICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCByb2xlOiB0cnVlLCByZWZlcnJhbENvdW50OiB0cnVlIH1cbiAgICB9KVxuXG4gICAgaWYgKCFyZWZlcnJlcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICfQndC10LLQtdGA0L3Ri9C5INGA0LXRhNC10YDQsNC70YzQvdGL0Lkg0LrQvtC0JyB9XG4gICAgfVxuXG4gICAgaWYgKHJlZmVycmVyLmlkID09PSB1c2VySWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAn0J3QtdC70YzQt9GPINC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDRgdCy0L7QuSDRgNC10YTQtdGA0LDQu9GM0L3Ri9C5INC60L7QtCcgfVxuICAgIH1cblxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0L3QtSDQuNGB0L/QvtC70YzQt9C+0LLQsNC7INC70Lgg0YPQttC1INGN0YLQvtGCINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRgNC10YTQtdGA0LDQu9GM0L3Ri9C5INC60L7QtFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIHNlbGVjdDogeyByZWZlcnJlZEJ5OiB0cnVlLCByb2xlOiB0cnVlIH1cbiAgICB9KVxuXG4gICAgaWYgKHVzZXI/LnJlZmVycmVkQnkpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAn0JLRiyDRg9C20LUg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQu9C4INGA0LXRhNC10YDQsNC70YzQvdGL0Lkg0LrQvtC0JyB9XG4gICAgfVxuXG4gICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBkYXRhOiB7IHJlZmVycmVkQnk6IHJlZmVycmVyLmlkIH1cbiAgICB9KVxuXG4gICAgLy8g0KPQstC10LvQuNGH0LjQstCw0LXQvCDRgdGH0LXRgtGH0LjQuiDRgNC10YTQtdGA0LDQu9C+0LJcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHJlZmVycmVyLmlkIH0sXG4gICAgICBkYXRhOiB7IHJlZmVycmFsQ291bnQ6IHJlZmVycmVyLnJlZmVycmFsQ291bnQgKyAxIH1cbiAgICB9KVxuXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0L3QsNCz0YDQsNC00YtcbiAgICBjb25zdCByZXdhcmRzID0gYXdhaXQgdGhpcy5jcmVhdGVSZWZlcnJhbFJld2FyZHMocmVmZXJyZXIuaWQsIHVzZXJJZCwgcmVmZXJyZXIucm9sZSwgdXNlcj8ucm9sZSB8fCAnY2xpZW50JylcblxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRg9GA0L7QstC90Lgg0L/QvtGB0LvQtSDQvdCw0YfQuNGB0LvQtdC90LjRjyBYUFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBnYW1pZmljYXRpb25TZXJ2aWNlID0gbmV3IEdhbWlmaWNhdGlvblNlcnZpY2UoKVxuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YPRgNC+0LLQtdC90Ywg0L/RgNC40LPQu9Cw0YHQuNCy0YjQtdCz0L5cbiAgICAgIGNvbnN0IHJlZmVycmVyTGV2ZWwgPSBnYW1pZmljYXRpb25TZXJ2aWNlLmNhbGN1bGF0ZUxldmVsKFxuICAgICAgICAoYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiByZWZlcnJlci5pZCB9LCBzZWxlY3Q6IHsgZXhwZXJpZW5jZVBvaW50czogdHJ1ZSB9IH0pKT8uZXhwZXJpZW5jZVBvaW50cyB8fCAwLFxuICAgICAgICByZWZlcnJlci5yb2xlXG4gICAgICApXG4gICAgICBjb25zdCByZWZlcnJlckN1cnJlbnRMZXZlbCA9IChhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHJlZmVycmVyLmlkIH0sIHNlbGVjdDogeyBjdXJyZW50TGV2ZWw6IHRydWUgfSB9KSk/LmN1cnJlbnRMZXZlbCB8fCAxXG4gICAgICBpZiAocmVmZXJyZXJMZXZlbCA+IHJlZmVycmVyQ3VycmVudExldmVsKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHJlZmVycmVyLmlkIH0sXG4gICAgICAgICAgZGF0YTogeyBjdXJyZW50TGV2ZWw6IHJlZmVycmVyTGV2ZWwgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YPRgNC+0LLQtdC90Ywg0L/RgNC40LPQu9Cw0YjQtdC90L3QvtCz0L5cbiAgICAgIGNvbnN0IHJlZmVycmVkTGV2ZWwgPSBnYW1pZmljYXRpb25TZXJ2aWNlLmNhbGN1bGF0ZUxldmVsKFxuICAgICAgICAoYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB1c2VySWQgfSwgc2VsZWN0OiB7IGV4cGVyaWVuY2VQb2ludHM6IHRydWUgfSB9KSk/LmV4cGVyaWVuY2VQb2ludHMgfHwgMCxcbiAgICAgICAgdXNlcj8ucm9sZSB8fCAnY2xpZW50J1xuICAgICAgKVxuICAgICAgY29uc3QgcmVmZXJyZWRDdXJyZW50TGV2ZWwgPSAoYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB1c2VySWQgfSwgc2VsZWN0OiB7IGN1cnJlbnRMZXZlbDogdHJ1ZSB9IH0pKT8uY3VycmVudExldmVsIHx8IDFcbiAgICAgIGlmIChyZWZlcnJlZExldmVsID4gcmVmZXJyZWRDdXJyZW50TGV2ZWwpIHtcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgICAgZGF0YTogeyBjdXJyZW50TGV2ZWw6IHJlZmVycmVkTGV2ZWwgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC/0YDQvtCy0LXRgNC60LUg0YPRgNC+0LLQvdC10Lk6JywgZXJyb3IpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAn0KDQtdGE0LXRgNCw0LvRjNC90YvQuSDQutC+0LQg0YPRgdC/0LXRiNC90L4g0L/RgNC40LzQtdC90LXQvSEnLFxuICAgICAgcmV3YXJkc1xuICAgIH1cbiAgfVxuXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0L3QsNCz0YDQsNC0INC30LAg0YDQtdGE0LXRgNCw0LtcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVSZWZlcnJhbFJld2FyZHMocmVmZXJyZXJJZDogbnVtYmVyLCByZWZlcnJlZElkOiBudW1iZXIsIHJlZmVycmVyUm9sZTogc3RyaW5nLCByZWZlcnJlZFJvbGU6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcmV3YXJkcyA9IFtdXG4gICAgY29uc3QgZ2FtaWZpY2F0aW9uU2VydmljZSA9IG5ldyBHYW1pZmljYXRpb25TZXJ2aWNlKClcblxuICAgIC8vINCd0LDQs9GA0LDQtNGLINC00LvRjyDQv9GA0LjQs9C70LDRgdC40LLRiNC10LPQvlxuICAgIGlmIChyZWZlcnJlclJvbGUgPT09ICdjbGllbnQnKSB7XG4gICAgICAvLyDQmtC70LjQtdC90YIg0L/RgNC40LPQu9Cw0YHQuNC7INC60LvQuNC10L3RgtCwXG4gICAgICBjb25zdCByZWZlcnJlclhwID0gWFBfUkVXQVJEUy5SRUZFUlJBTF9SRUdJU1RSQVRJT05cbiAgICAgIFxuICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgR2FtaWZpY2F0aW9uU2VydmljZSDQtNC70Y8g0L3QsNGH0LjRgdC70LXQvdC40Y8gWFAgKNCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutC4INC+0LHQvdC+0LLQuNGCINGD0YDQvtCy0LXQvdGMKVxuICAgICAgYXdhaXQgZ2FtaWZpY2F0aW9uU2VydmljZS5hZGRYcChyZWZlcnJlcklkLCB7XG4gICAgICAgIGFtb3VudDogcmVmZXJyZXJYcCxcbiAgICAgICAgc291cmNlOiAncmVmZXJyYWwnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ9Cf0YDQuNCz0LvQsNGI0LXQvdC40LUg0LTRgNGD0LPQsCcsXG4gICAgICAgIG1ldGFkYXRhOiB7IHJlZmVycmVkVXNlcklkOiByZWZlcnJlZElkIH1cbiAgICAgIH0pXG5cbiAgICAgIHJld2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdyZWZlcnJlcicsXG4gICAgICAgIHhwOiByZWZlcnJlclhwLFxuICAgICAgICBib251czogJ9Cf0YDQuNC+0YDQuNGC0LXRgiDQsiDQv9C+0LjRgdC60LUg0L3QsCDQvNC10YHRj9GGJ1xuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHJlZmVycmVyUm9sZSA9PT0gJ2V4ZWN1dG9yJykge1xuICAgICAgLy8g0JjRgdC/0L7Qu9C90LjRgtC10LvRjCDQv9GA0LjQs9C70LDRgdC40Lsg0LjRgdC/0L7Qu9C90LjRgtC10LvRj1xuICAgICAgY29uc3QgcmVmZXJyZXJYcCA9IFhQX1JFV0FSRFMuUkVGRVJSQUxfRVhFQ1VUT1JfUkVHSVNUUkFUSU9OXG4gICAgICBcbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IEdhbWlmaWNhdGlvblNlcnZpY2Ug0LTQu9GPINC90LDRh9C40YHQu9C10L3QuNGPIFhQICjQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQvtCx0L3QvtCy0LjRgiDRg9GA0L7QstC10L3RjClcbiAgICAgIGF3YWl0IGdhbWlmaWNhdGlvblNlcnZpY2UuYWRkWHAocmVmZXJyZXJJZCwge1xuICAgICAgICBhbW91bnQ6IHJlZmVycmVyWHAsXG4gICAgICAgIHNvdXJjZTogJ3JlZmVycmFsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICfQn9GA0LjQs9C70LDRiNC10L3QuNC1INC60L7Qu9C70LXQs9C4JyxcbiAgICAgICAgbWV0YWRhdGE6IHsgcmVmZXJyZWRVc2VySWQ6IHJlZmVycmVkSWQgfVxuICAgICAgfSlcblxuICAgICAgcmV3YXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ3JlZmVycmVyJyxcbiAgICAgICAgeHA6IHJlZmVycmVyWHAsXG4gICAgICAgIGJvbnVzOiAn0J3QtdC00LXQu9GPINCx0LXRgdC/0LvQsNGC0L3QvtC5INC/0L7QtNC/0LjRgdC60LgnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vINCd0LDQs9GA0LDQtNGLINC00LvRjyDQv9GA0LjQs9C70LDRiNC10L3QvdC+0LPQvlxuICAgIGlmIChyZWZlcnJlZFJvbGUgPT09ICdjbGllbnQnKSB7XG4gICAgICBjb25zdCByZWZlcnJlZFhwID0gWFBfUkVXQVJEUy5SRUZFUlJBTF9SRUdJU1RSQVRJT04gLyAyXG4gICAgICBcbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IEdhbWlmaWNhdGlvblNlcnZpY2Ug0LTQu9GPINC90LDRh9C40YHQu9C10L3QuNGPIFhQICjQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQvtCx0L3QvtCy0LjRgiDRg9GA0L7QstC10L3RjClcbiAgICAgIGF3YWl0IGdhbWlmaWNhdGlvblNlcnZpY2UuYWRkWHAocmVmZXJyZWRJZCwge1xuICAgICAgICBhbW91bnQ6IHJlZmVycmVkWHAsXG4gICAgICAgIHNvdXJjZTogJ3JlZmVycmFsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICfQoNC10LPQuNGB0YLRgNCw0YbQuNGPINC/0L4g0L/RgNC40LPQu9Cw0YjQtdC90LjRjicsXG4gICAgICAgIG1ldGFkYXRhOiB7IHJlZmVycmVyVXNlcklkOiByZWZlcnJlcklkIH1cbiAgICAgIH0pXG5cbiAgICAgIHJld2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdyZWZlcnJlZCcsXG4gICAgICAgIHhwOiByZWZlcnJlZFhwLFxuICAgICAgICBib251czogJ1ZJUCDRgdGC0LDRgtGD0YEg0L3QsCDQvNC10YHRj9GGJ1xuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHJlZmVycmVkUm9sZSA9PT0gJ2V4ZWN1dG9yJykge1xuICAgICAgY29uc3QgcmVmZXJyZWRYcCA9IFhQX1JFV0FSRFMuUkVGRVJSQUxfRVhFQ1VUT1JfUkVHSVNUUkFUSU9OIC8gMlxuICAgICAgXG4gICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBHYW1pZmljYXRpb25TZXJ2aWNlINC00LvRjyDQvdCw0YfQuNGB0LvQtdC90LjRjyBYUCAo0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0L7QsdC90L7QstC40YIg0YPRgNC+0LLQtdC90YwpXG4gICAgICBhd2FpdCBnYW1pZmljYXRpb25TZXJ2aWNlLmFkZFhwKHJlZmVycmVkSWQsIHtcbiAgICAgICAgYW1vdW50OiByZWZlcnJlZFhwLFxuICAgICAgICBzb3VyY2U6ICdyZWZlcnJhbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0KDQtdCz0LjRgdGC0YDQsNGG0LjRjyDQv9C+INC/0YDQuNCz0LvQsNGI0LXQvdC40Y4nLFxuICAgICAgICBtZXRhZGF0YTogeyByZWZlcnJlclVzZXJJZDogcmVmZXJyZXJJZCB9XG4gICAgICB9KVxuXG4gICAgICByZXdhcmRzLnB1c2goe1xuICAgICAgICB0eXBlOiAncmVmZXJyZWQnLFxuICAgICAgICB4cDogcmVmZXJyZWRYcCxcbiAgICAgICAgYm9udXM6ICfQnNC10YHRj9GGINCx0LXRgdC/0LvQsNGC0L3QvtC5INC/0L7QtNC/0LjRgdC60LgnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vINCU0L7RgdGC0LjQttC10L3QuNGPINGD0LbQtSDQv9GA0L7QstC10YDRj9GO0YLRgdGPINCyIEdhbWlmaWNhdGlvblNlcnZpY2UuYWRkWHAoKVxuXG4gICAgcmV0dXJuIHJld2FyZHNcbiAgfVxuXG4gIC8vINCd0LDQs9GA0LDQtNCwINC30LAg0L/QtdGA0LLRg9GOINC/0L7QtNC/0LjRgdC60YMg0YDQtdGE0LXRgNCw0LvQsCAo0LTQu9GPINC40YHQv9C+0LvQvdC40YLQtdC70LXQuSlcbiAgYXN5bmMgcmV3YXJkUmVmZXJyYWxTdWJzY3JpcHRpb24ocmVmZXJyZWRJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZ2FtaWZpY2F0aW9uU2VydmljZSA9IG5ldyBHYW1pZmljYXRpb25TZXJ2aWNlKClcbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcmVmZXJyZWRJZCB9LFxuICAgICAgc2VsZWN0OiB7IHJlZmVycmVkQnk6IHRydWUsIHJvbGU6IHRydWUgfVxuICAgIH0pXG5cbiAgICBpZiAoIXVzZXI/LnJlZmVycmVkQnkpIHJldHVyblxuXG4gICAgY29uc3QgcmVmZXJyZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLnJlZmVycmVkQnkgfSxcbiAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlIH1cbiAgICB9KVxuXG4gICAgaWYgKCFyZWZlcnJlcikgcmV0dXJuXG5cbiAgICAvLyDQndCw0LPRgNCw0LbQtNCw0LXQvCDQv9GA0LjQs9C70LDRgdC40LLRiNC10LPQviDQt9CwINC/0L7QtNC/0LjRgdC60YMg0YDQtdGE0LXRgNCw0LvQsFxuICAgIGlmIChyZWZlcnJlci5yb2xlID09PSAnZXhlY3V0b3InICYmIHVzZXIucm9sZSA9PT0gJ2V4ZWN1dG9yJykge1xuICAgICAgY29uc3QgeHBSZXdhcmQgPSBYUF9SRVdBUkRTLlJFRkVSUkFMX0VYRUNVVE9SX1NVQlNDUklQVElPTlxuICAgICAgXG4gICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBHYW1pZmljYXRpb25TZXJ2aWNlINC00LvRjyDQvdCw0YfQuNGB0LvQtdC90LjRjyBYUCAo0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0L7QsdC90L7QstC40YIg0YPRgNC+0LLQtdC90YwpXG4gICAgICBhd2FpdCBnYW1pZmljYXRpb25TZXJ2aWNlLmFkZFhwKHVzZXIucmVmZXJyZWRCeSwge1xuICAgICAgICBhbW91bnQ6IHhwUmV3YXJkLFxuICAgICAgICBzb3VyY2U6ICdyZWZlcnJhbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0KDQtdGE0LXRgNCw0Lsg0L7RhNC+0YDQvNC40Lsg0L/QvtC00L/QuNGB0LrRgycsXG4gICAgICAgIG1ldGFkYXRhOiB7IHJlZmVycmVkVXNlcklkOiByZWZlcnJlZElkIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC30LDQv9C40YHRjCDQviDQvdCw0LPRgNCw0LTQtVxuICAgICAgYXdhaXQgcHJpc21hLnJlZmVycmFsUmV3YXJkLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByZWZlcnJlcklkOiB1c2VyLnJlZmVycmVkQnksXG4gICAgICAgICAgcmVmZXJyZWRJZDogcmVmZXJyZWRJZCxcbiAgICAgICAgICByZXdhcmRUeXBlOiAneHAnLFxuICAgICAgICAgIHJld2FyZEFtb3VudDogMCxcbiAgICAgICAgICB4cEFtb3VudDogeHBSZXdhcmQsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfQoNC10YTQtdGA0LDQuyDQvtGE0L7RgNC80LjQuyDQv9C+0LTQv9C40YHQutGDJyxcbiAgICAgICAgICBpc1BhaWQ6IHRydWUsXG4gICAgICAgICAgcGFpZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGB0YLQsNGC0LjRgdGC0LjQutC4INGA0LXRhNC10YDQsNC70L7QslxuICBhc3luYyBnZXRSZWZlcnJhbFN0YXRzKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgcmVmZXJyYWxDb2RlOiB0cnVlLFxuICAgICAgICByZWZlcnJhbENvdW50OiB0cnVlLFxuICAgICAgICByZWZlcnJhbEVhcm5pbmdzOiB0cnVlLFxuICAgICAgICByZWZlcnJlZEJ5OiB0cnVlXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nKVxuICAgIH1cblxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0YHQv9C40YHQvtC6INGA0LXRhNC10YDQsNC70L7QslxuICAgIGNvbnN0IHJlZmVycmFscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHJlZmVycmVkQnk6IHVzZXJJZCB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgY3JlYXRlZEF0OiB0cnVlLFxuICAgICAgICBleHBlcmllbmNlUG9pbnRzOiB0cnVlXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XG4gICAgfSlcblxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L3QsNCz0YDQsNC00YtcbiAgICBjb25zdCByZXdhcmRzID0gYXdhaXQgcHJpc21hLnJlZmVycmFsUmV3YXJkLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHJlZmVycmVySWQ6IHVzZXJJZCB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICByZXdhcmRUeXBlOiB0cnVlLFxuICAgICAgICByZXdhcmRBbW91bnQ6IHRydWUsXG4gICAgICAgIHhwQW1vdW50OiB0cnVlLFxuICAgICAgICBkZXNjcmlwdGlvbjogdHJ1ZSxcbiAgICAgICAgaXNQYWlkOiB0cnVlLFxuICAgICAgICBjcmVhdGVkQXQ6IHRydWVcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZmVycmFsQ29kZTogdXNlci5yZWZlcnJhbENvZGUsXG4gICAgICB0b3RhbFJlZmVycmFsczogdXNlci5yZWZlcnJhbENvdW50LFxuICAgICAgdG90YWxFYXJuaW5nczogdXNlci5yZWZlcnJhbEVhcm5pbmdzLFxuICAgICAgcmVmZXJyYWxzOiByZWZlcnJhbHMsXG4gICAgICByZXdhcmRzOiByZXdhcmRzLFxuICAgICAgaXNSZWZlcnJlZDogISF1c2VyLnJlZmVycmVkQnlcbiAgICB9XG4gIH1cblxuICAvLyDQk9C10L3QtdGA0LDRhtC40Y8g0YDQtdGE0LXRgNCw0LvRjNC90L7Qs9C+INC60L7QtNCwXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWZlcnJhbENvZGUocm9sZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBwcmVmaXggPSByb2xlID09PSAnZXhlY3V0b3InID8gJ0VYRScgOiAnQ0xJJ1xuICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KS50b1VwcGVyQ2FzZSgpXG4gICAgcmV0dXJuIGAke3ByZWZpeH0ke3JhbmRvbX1gXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJYUF9SRVdBUkRTIiwiR2FtaWZpY2F0aW9uU2VydmljZSIsInByaXNtYSIsIlJlZmVycmFsU2VydmljZSIsImNyZWF0ZVJlZmVycmFsQ29kZSIsInVzZXJJZCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInNlbGVjdCIsInJlZmVycmFsQ29kZSIsInJvbGUiLCJFcnJvciIsImNvZGUiLCJnZW5lcmF0ZVJlZmVycmFsQ29kZSIsInVwZGF0ZSIsImRhdGEiLCJ1c2VSZWZlcnJhbENvZGUiLCJyZWZlcnJlciIsInJlZmVycmFsQ291bnQiLCJzdWNjZXNzIiwibWVzc2FnZSIsInJlZmVycmVkQnkiLCJyZXdhcmRzIiwiY3JlYXRlUmVmZXJyYWxSZXdhcmRzIiwiZ2FtaWZpY2F0aW9uU2VydmljZSIsInJlZmVycmVyTGV2ZWwiLCJjYWxjdWxhdGVMZXZlbCIsImV4cGVyaWVuY2VQb2ludHMiLCJyZWZlcnJlckN1cnJlbnRMZXZlbCIsImN1cnJlbnRMZXZlbCIsInJlZmVycmVkTGV2ZWwiLCJyZWZlcnJlZEN1cnJlbnRMZXZlbCIsImVycm9yIiwiY29uc29sZSIsInJlZmVycmVySWQiLCJyZWZlcnJlZElkIiwicmVmZXJyZXJSb2xlIiwicmVmZXJyZWRSb2xlIiwicmVmZXJyZXJYcCIsIlJFRkVSUkFMX1JFR0lTVFJBVElPTiIsImFkZFhwIiwiYW1vdW50Iiwic291cmNlIiwiZGVzY3JpcHRpb24iLCJtZXRhZGF0YSIsInJlZmVycmVkVXNlcklkIiwicHVzaCIsInR5cGUiLCJ4cCIsImJvbnVzIiwiUkVGRVJSQUxfRVhFQ1VUT1JfUkVHSVNUUkFUSU9OIiwicmVmZXJyZWRYcCIsInJlZmVycmVyVXNlcklkIiwicmV3YXJkUmVmZXJyYWxTdWJzY3JpcHRpb24iLCJ4cFJld2FyZCIsIlJFRkVSUkFMX0VYRUNVVE9SX1NVQlNDUklQVElPTiIsInJlZmVycmFsUmV3YXJkIiwiY3JlYXRlIiwicmV3YXJkVHlwZSIsInJld2FyZEFtb3VudCIsInhwQW1vdW50IiwiaXNQYWlkIiwicGFpZEF0IiwiRGF0ZSIsImdldFJlZmVycmFsU3RhdHMiLCJyZWZlcnJhbEVhcm5pbmdzIiwicmVmZXJyYWxzIiwiZmluZE1hbnkiLCJuYW1lIiwiZW1haWwiLCJjcmVhdGVkQXQiLCJvcmRlckJ5IiwidG90YWxSZWZlcnJhbHMiLCJ0b3RhbEVhcm5pbmdzIiwiaXNSZWZlcnJlZCIsInByZWZpeCIsInJhbmRvbSIsIk1hdGgiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInRvVXBwZXJDYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/referralService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Freferral%2Froute&page=%2Fapi%2Fgamification%2Freferral%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Freferral%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();