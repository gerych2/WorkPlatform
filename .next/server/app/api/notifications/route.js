"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/notifications/route";
exports.ids = ["app/api/notifications/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_mobile_app_api_notifications_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/notifications/route.ts */ \"(rsc)/./app/api/notifications/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/notifications/route\",\n        pathname: \"/api/notifications\",\n        filename: \"route\",\n        bundlePath: \"app/api/notifications/route\"\n    },\n    resolvedPagePath: \"D:\\\\mobile\\\\app\\\\api\\\\notifications\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_mobile_app_api_notifications_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/notifications/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZub3RpZmljYXRpb25zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZub3RpZmljYXRpb25zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbm90aWZpY2F0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbW9iaWxlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDbW9iaWxlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0g7QUFDMUU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvPzExYjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbW9iaWxlXFxcXGFwcFxcXFxhcGlcXFxcbm90aWZpY2F0aW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbm90aWZpY2F0aW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25vdGlmaWNhdGlvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL25vdGlmaWNhdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJEOlxcXFxtb2JpbGVcXFxcYXBwXFxcXGFwaVxcXFxub3RpZmljYXRpb25zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL25vdGlmaWNhdGlvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/notifications/route.ts":
/*!****************************************!*\
  !*** ./app/api/notifications/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_gamification_notificationService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/gamification/notificationService */ \"(rsc)/./lib/gamification/notificationService.ts\");\n\n\nconst notificationService = new _lib_gamification_notificationService__WEBPACK_IMPORTED_MODULE_1__.NotificationService();\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get(\"userId\");\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const notifications = await notificationService.getUserNotifications(parseInt(userId));\n        const unreadCount = await notificationService.getUnreadCount(parseInt(userId));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            notifications,\n            unreadCount\n        });\n    } catch (error) {\n        console.error(\"Error fetching notifications:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch notifications\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL25vdGlmaWNhdGlvbnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVEO0FBQzRCO0FBRW5GLE1BQU1FLHNCQUFzQixJQUFJRCxzRkFBbUJBO0FBRTVDLGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsU0FBU0gsYUFBYUksR0FBRyxDQUFDO1FBRWhDLElBQUksQ0FBQ0QsUUFBUTtZQUNYLE9BQU9SLGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzNFO1FBRUEsTUFBTUMsZ0JBQWdCLE1BQU1YLG9CQUFvQlksb0JBQW9CLENBQUNDLFNBQVNQO1FBQzlFLE1BQU1RLGNBQWMsTUFBTWQsb0JBQW9CZSxjQUFjLENBQUNGLFNBQVNQO1FBRXRFLE9BQU9SLGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDdkJRLFNBQVM7WUFDVEw7WUFDQUc7UUFDRjtJQUNGLEVBQUUsT0FBT0wsT0FBTztRQUNkUSxRQUFRUixLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxPQUFPWCxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQWdDLEdBQ3pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvZG8tYWdlbmN5Ly4vYXBwL2FwaS9ub3RpZmljYXRpb25zL3JvdXRlLnRzPzhlMGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vbGliL2dhbWlmaWNhdGlvbi9ub3RpZmljYXRpb25TZXJ2aWNlJ1xyXG5cclxuY29uc3Qgbm90aWZpY2F0aW9uU2VydmljZSA9IG5ldyBOb3RpZmljYXRpb25TZXJ2aWNlKClcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKVxyXG5cclxuICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLmdldFVzZXJOb3RpZmljYXRpb25zKHBhcnNlSW50KHVzZXJJZCkpXHJcbiAgICBjb25zdCB1bnJlYWRDb3VudCA9IGF3YWl0IG5vdGlmaWNhdGlvblNlcnZpY2UuZ2V0VW5yZWFkQ291bnQocGFyc2VJbnQodXNlcklkKSlcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICBub3RpZmljYXRpb25zLFxyXG4gICAgICB1bnJlYWRDb3VudFxyXG4gICAgfSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbm90aWZpY2F0aW9uczonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBub3RpZmljYXRpb25zJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiTm90aWZpY2F0aW9uU2VydmljZSIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidXNlcklkIiwiZ2V0IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwibm90aWZpY2F0aW9ucyIsImdldFVzZXJOb3RpZmljYXRpb25zIiwicGFyc2VJbnQiLCJ1bnJlYWRDb3VudCIsImdldFVucmVhZENvdW50Iiwic3VjY2VzcyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/notifications/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/email/emailService.ts":
/*!***********************************!*\
  !*** ./lib/email/emailService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailService: () => (/* binding */ emailService)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n\nclass EmailService {\n    constructor(){\n        this.initialize();\n    }\n    initialize() {\n        // Проверяем наличие Gmail настроек\n        this.isDevelopment = !process.env.EMAIL_HOST || !process.env.EMAIL_USER || !process.env.EMAIL_PASS;\n        console.log(\"\\uD83D\\uDD27 EmailService инициализация:\");\n        console.log(`   EMAIL_HOST: ${process.env.EMAIL_HOST || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_USER: ${process.env.EMAIL_USER || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_PASS: ${process.env.EMAIL_PASS ? \"УСТАНОВЛЕН\" : \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   Режим: ${this.isDevelopment ? \"РАЗРАБОТКИ\" : \"ПРОДАКШЕН\"}`);\n        if (this.isDevelopment) {\n            // Для разработки используем мок-транспорт\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                streamTransport: true,\n                newline: \"unix\",\n                buffer: true\n            });\n        } else {\n            // Для продакшена используем реальный SMTP\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                host: \"smtp.gmail.com\",\n                port: 587,\n                secure: false,\n                auth: {\n                    user: process.env.EMAIL_USER || \"\",\n                    pass: process.env.EMAIL_PASS || \"\"\n                },\n                tls: {\n                    rejectUnauthorized: false\n                }\n            });\n        }\n    }\n    // Переинициализация после загрузки переменных окружения\n    reinitialize() {\n        this.initialize();\n    }\n    // Проверка подключения\n    async verifyConnection() {\n        try {\n            if (this.isDevelopment) {\n                console.log(\"✅ Email сервер готов к отправке (режим разработки)\");\n                return true;\n            }\n            // Проверяем Gmail SMTP подключение\n            await this.transporter.verify();\n            console.log(\"✅ Email сервер готов к отправке\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка подключения к email серверу:\", error);\n            return false;\n        }\n    }\n    // Отправка email\n    async sendEmail(to, template) {\n        try {\n            if (this.isDevelopment) {\n                // В режиме разработки логируем с деталями\n                console.log(\"\\uD83D\\uDCE7 [DEV] Email отправлен:\");\n                console.log(`   Кому: ${to}`);\n                console.log(`   Тема: ${template.subject}`);\n                console.log(`   HTML: ${template.html.substring(0, 100)}...`);\n                console.log(`   📝 В продакшене это письмо будет отправлено на: ${to}`);\n                return true;\n            }\n            // Используем Gmail SMTP для отправки\n            const mailOptions = {\n                from: process.env.EMAIL_USER,\n                to: to,\n                subject: template.subject,\n                html: template.html,\n                text: template.text\n            };\n            await this.transporter.sendMail(mailOptions);\n            console.log(\"\\uD83D\\uDCE7 Email отправлен через Gmail:\", to);\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка отправки email:\", error);\n            return false;\n        }\n    }\n    // Отправка уведомления о новом заказе (исполнителю)\n    async sendNewOrderNotification(executorEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(executorEmail, {\n                subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n                html: `\r\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\r\n              <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\r\n            </div>\r\n            \r\n            <div style=\"padding: 20px; background: #f8f9fa;\">\r\n              <h2 style=\"color: #333;\">Детали заказа:</h2>\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\r\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\r\n                <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\r\n                <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\r\n                <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\r\n                <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\r\n                <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\r\n                <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        `,\n                text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(executorEmail, {\n            subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n            html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\r\n            <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\r\n          </div>\r\n          \r\n          <div style=\"padding: 20px; background: #f8f9fa;\">\r\n            <h2 style=\"color: #333;\">Детали заказа:</h2>\r\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\r\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\r\n              <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\r\n              <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\r\n              <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\r\n              <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\r\n              <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\r\n              <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `,\n            text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о выполнении заказа (клиенту)\n    async sendOrderCompletedNotification(clientEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(clientEmail, {\n                subject: \"✅ Ваш заказ выполнен!\",\n                html: `\r\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n            <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\r\n              <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\r\n            </div>\r\n            \r\n            <div style=\"padding: 20px; background: #f8f9fa;\">\r\n              <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\r\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\r\n                <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\r\n                <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\r\n                <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        `,\n                text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(clientEmail, {\n            subject: \"✅ Ваш заказ выполнен!\",\n            html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\r\n            <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\r\n          </div>\r\n          \r\n          <div style=\"padding: 20px; background: #f8f9fa;\">\r\n            <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\r\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\r\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\r\n              <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\r\n              <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\r\n              <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `,\n            text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о повышении уровня\n    async sendLevelUpNotification(userEmail, levelData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(userEmail, {\n                subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n                html: `\r\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n            <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\r\n              <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\r\n              <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\r\n            </div>\r\n            \r\n            <div style=\"padding: 20px; background: #f8f9fa;\">\r\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\r\n                <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\r\n                <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\r\n                <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        `,\n                text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n            });\n        }\n        return await this.sendEmail(userEmail, {\n            subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n            html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\r\n            <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\r\n            <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\r\n          </div>\r\n          \r\n          <div style=\"padding: 20px; background: #f8f9fa;\">\r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\r\n              <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\r\n              <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\r\n              <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `,\n            text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n        });\n    }\n    // Отправка новостной рассылки\n    async sendNewsletter(emails, newsletterData) {\n        if (this.isDevelopment) {\n            let success = 0;\n            let failed = 0;\n            for (const email of emails){\n                const result = await this.sendEmail(email, {\n                    subject: newsletterData.subject,\n                    html: `\r\n            <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n              <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\r\n                <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\r\n              </div>\r\n              \r\n              <div style=\"padding: 20px; background: #f8f9fa;\">\r\n                <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\r\n                  ${newsletterData.content}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          `,\n                    text: newsletterData.textContent || newsletterData.subject\n                });\n                if (result) {\n                    success++;\n                } else {\n                    failed++;\n                }\n            }\n            return {\n                success,\n                failed\n            };\n        }\n        let success = 0;\n        let failed = 0;\n        for (const email of emails){\n            const result = await this.sendEmail(email, {\n                subject: newsletterData.subject,\n                html: `\r\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\r\n              <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\r\n            </div>\r\n            \r\n            <div style=\"padding: 20px; background: #f8f9fa;\">\r\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\r\n                ${newsletterData.content}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        `,\n                text: newsletterData.textContent || newsletterData.subject\n            });\n            if (result) {\n                success++;\n            } else {\n                failed++;\n            }\n        }\n        return {\n            success,\n            failed\n        };\n    }\n}\nconst emailService = new EmailService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBVyxJQUFJTixlQUFlL0IsT0FBTztZQUM1RDtZQUVBLElBQUltQyxRQUFRO2dCQUNWSDtZQUNGLE9BQU87Z0JBQ0xDO1lBQ0Y7UUFDRjtRQUVBLE9BQU87WUFBRUQ7WUFBU0M7UUFBTztJQUMzQjtBQUNGO0FBRU8sTUFBTUssZUFBZSxJQUFJckUsZUFBYyIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2xpYi9lbWFpbC9lbWFpbFNlcnZpY2UudHM/YzVmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tICdub2RlbWFpbGVyJ1xyXG5pbXBvcnQgeyBmb3Jtc3ByZWVTZXJ2aWNlIH0gZnJvbSAnLi9mb3Jtc3ByZWVTZXJ2aWNlJ1xyXG5cclxuaW50ZXJmYWNlIEVtYWlsQ29uZmlnIHtcclxuICBob3N0OiBzdHJpbmdcclxuICBwb3J0OiBudW1iZXJcclxuICBzZWN1cmU6IGJvb2xlYW5cclxuICBhdXRoOiB7XHJcbiAgICB1c2VyOiBzdHJpbmdcclxuICAgIHBhc3M6IHN0cmluZ1xyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIEVtYWlsVGVtcGxhdGUge1xyXG4gIHN1YmplY3Q6IHN0cmluZ1xyXG4gIGh0bWw6IHN0cmluZ1xyXG4gIHRleHQ/OiBzdHJpbmdcclxufVxyXG5cclxuY2xhc3MgRW1haWxTZXJ2aWNlIHtcclxuICBwcml2YXRlIHRyYW5zcG9ydGVyITogbm9kZW1haWxlci5UcmFuc3BvcnRlclxyXG4gIHByaXZhdGUgaXNEZXZlbG9wbWVudCE6IGJvb2xlYW5cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmluaXRpYWxpemUoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplKCkge1xyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1IEdtYWlsINC90LDRgdGC0YDQvtC10LpcclxuICAgIHRoaXMuaXNEZXZlbG9wbWVudCA9ICFwcm9jZXNzLmVudi5FTUFJTF9IT1NUIHx8ICFwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICFwcm9jZXNzLmVudi5FTUFJTF9QQVNTXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SnIEVtYWlsU2VydmljZSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjzonKVxyXG4gICAgY29uc29sZS5sb2coYCAgIEVNQUlMX0hPU1Q6ICR7cHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAn0J3QlSDQo9Ch0KLQkNCd0J7QktCb0JXQnSd9YClcclxuICAgIGNvbnNvbGUubG9nKGAgICBFTUFJTF9VU0VSOiAke3Byb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ9Cd0JUg0KPQodCi0JDQndCe0JLQm9CV0J0nfWApXHJcbiAgICBjb25zb2xlLmxvZyhgICAgRU1BSUxfUEFTUzogJHtwcm9jZXNzLmVudi5FTUFJTF9QQVNTID8gJ9Cj0KHQotCQ0J3QntCS0JvQldCdJyA6ICfQndCVINCj0KHQotCQ0J3QntCS0JvQldCdJ31gKVxyXG4gICAgY29uc29sZS5sb2coYCAgINCg0LXQttC40Lw6ICR7dGhpcy5pc0RldmVsb3BtZW50ID8gJ9Cg0JDQl9Cg0JDQkdCe0KLQmtCYJyA6ICfQn9Cg0J7QlNCQ0JrQqNCV0J0nfWApXHJcbiAgICBcclxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcclxuICAgICAgLy8g0JTQu9GPINGA0LDQt9GA0LDQsdC+0YLQutC4INC40YHQv9C+0LvRjNC30YPQtdC8INC80L7Qui3RgtGA0LDQvdGB0L/QvtGA0YJcclxuICAgICAgdGhpcy50cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgICBzdHJlYW1UcmFuc3BvcnQ6IHRydWUsXHJcbiAgICAgICAgbmV3bGluZTogJ3VuaXgnLFxyXG4gICAgICAgIGJ1ZmZlcjogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g0JTQu9GPINC/0YDQvtC00LDQutGI0LXQvdCwINC40YHQv9C+0LvRjNC30YPQtdC8INGA0LXQsNC70YzQvdGL0LkgU01UUFxyXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgICAgIGhvc3Q6ICdzbXRwLmdtYWlsLmNvbScsXHJcbiAgICAgICAgcG9ydDogNTg3LFxyXG4gICAgICAgIHNlY3VyZTogZmFsc2UsXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnJyxcclxuICAgICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgfHwgJydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRsczoge1xyXG4gICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCf0LXRgNC10LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INC/0LXRgNC10LzQtdC90L3Ri9GFINC+0LrRgNGD0LbQtdC90LjRj1xyXG4gIHJlaW5pdGlhbGl6ZSgpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXHJcbiAgfVxyXG5cclxuICAvLyDQn9GA0L7QstC10YDQutCwINC/0L7QtNC60LvRjtGH0LXQvdC40Y9cclxuICBhc3luYyB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgRW1haWwg0YHQtdGA0LLQtdGAINCz0L7RgtC+0LIg0Log0L7RgtC/0YDQsNCy0LrQtSAo0YDQtdC20LjQvCDRgNCw0LfRgNCw0LHQvtGC0LrQuCknKVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCBHbWFpbCBTTVRQINC/0L7QtNC60LvRjtGH0LXQvdC40LVcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IHRoaXMudHJhbnNwb3J0ZXIudmVyaWZ5KClcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBFbWFpbCDRgdC10YDQstC10YAg0LPQvtGC0L7QsiDQuiDQvtGC0L/RgNCw0LLQutC1JylcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDQntGI0LjQsdC60LAg0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQuiBlbWFpbCDRgdC10YDQstC10YDRgzonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQntGC0L/RgNCw0LLQutCwIGVtYWlsXHJcbiAgYXN5bmMgc2VuZEVtYWlsKHRvOiBzdHJpbmcsIHRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XHJcbiAgICAgICAgLy8g0JIg0YDQtdC20LjQvNC1INGA0LDQt9GA0LDQsdC+0YLQutC4INC70L7Qs9C40YDRg9C10Lwg0YEg0LTQtdGC0LDQu9GP0LzQuFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OnIFtERVZdIEVtYWlsINC+0YLQv9GA0LDQstC70LXQvTonKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDQmtC+0LzRgzogJHt0b31gKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDQotC10LzQsDogJHt0ZW1wbGF0ZS5zdWJqZWN0fWApXHJcbiAgICAgICAgY29uc29sZS5sb2coYCAgIEhUTUw6ICR7dGVtcGxhdGUuaHRtbC5zdWJzdHJpbmcoMCwgMTAwKX0uLi5gKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDwn5OdINCSINC/0YDQvtC00LDQutGI0LXQvdC1INGN0YLQviDQv9C40YHRjNC80L4g0LHRg9C00LXRgiDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwOiAke3RvfWApXHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgR21haWwgU01UUCDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuFxyXG4gICAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxyXG4gICAgICAgIHRvOiB0byxcclxuICAgICAgICBzdWJqZWN0OiB0ZW1wbGF0ZS5zdWJqZWN0LFxyXG4gICAgICAgIGh0bWw6IHRlbXBsYXRlLmh0bWwsXHJcbiAgICAgICAgdGV4dDogdGVtcGxhdGUudGV4dFxyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKVxyXG4gICAgICBjb25zb2xlLmxvZygn8J+TpyBFbWFpbCDQvtGC0L/RgNCw0LLQu9C10L0g0YfQtdGA0LXQtyBHbWFpbDonLCB0bylcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCBlbWFpbDonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQntGC0L/RgNCw0LLQutCwINGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0L3QvtCy0L7QvCDQt9Cw0LrQsNC30LUgKNC40YHQv9C+0LvQvdC40YLQtdC70Y4pXHJcbiAgYXN5bmMgc2VuZE5ld09yZGVyTm90aWZpY2F0aW9uKGV4ZWN1dG9yRW1haWw6IHN0cmluZywgb3JkZXJEYXRhOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZEVtYWlsKGV4ZWN1dG9yRW1haWwsIHtcclxuICAgICAgICBzdWJqZWN0OiAn8J+OryDQndC+0LLRi9C5INC30LDQutCw0Lcg0LTQu9GPINCy0LDRgSEnLFxyXG4gICAgICAgIGh0bWw6IGBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ITwvaDE+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XHJcbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7XCI+0JTQtdGC0LDQu9C4INC30LDQutCw0LfQsDo8L2gyPlxyXG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDEwcHggMDtcIj5cclxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JrQu9C40LXQvdGCOjwvc3Ryb25nPiAke29yZGVyRGF0YS5jbGllbnROYW1lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCQ0LTRgNC10YE6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmFkZHJlc3MgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KLQtdC70LXRhNC+0L06PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnBob25lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCU0LDRgtCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5vcmRlckRhdGUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JLRgNC10LzRjzo8L3N0cm9uZz4gJHtvcmRlckRhdGEub3JkZXJUaW1lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCm0LXQvdCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgLFxyXG4gICAgICAgIHRleHQ6IGDQndC+0LLRi9C5INC30LDQutCw0LchINCj0YHQu9GD0LPQsDogJHtvcmRlckRhdGEuc2VydmljZURlc2NyaXB0aW9ufSwg0JrQu9C40LXQvdGCOiAke29yZGVyRGF0YS5jbGllbnROYW1lfSwg0KbQtdC90LA6ICR7b3JkZXJEYXRhLnRvdGFsUHJpY2V9IOKCvWBcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwoZXhlY3V0b3JFbWFpbCwge1xyXG4gICAgICBzdWJqZWN0OiAn8J+OryDQndC+0LLRi9C5INC30LDQutCw0Lcg0LTQu9GPINCy0LDRgSEnLFxyXG4gICAgICBodG1sOiBgXHJcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJjb2xvcjogd2hpdGU7IG1hcmdpbjogMDtcIj7wn46vINCd0L7QstGL0Lkg0LfQsNC60LDQtyE8L2gxPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxyXG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QlNC10YLQsNC70Lgg0LfQsNC60LDQt9CwOjwvaDI+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDEwcHggMDtcIj5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCj0YHQu9GD0LPQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEuc2VydmljZURlc2NyaXB0aW9uIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QmtC70LjQtdC90YI6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmNsaWVudE5hbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCQ0LTRgNC10YE6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmFkZHJlc3MgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCi0LXQu9C10YTQvtC9Ojwvc3Ryb25nPiAke29yZGVyRGF0YS5waG9uZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JTQsNGC0LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLm9yZGVyRGF0ZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JLRgNC10LzRjzo8L3N0cm9uZz4gJHtvcmRlckRhdGEub3JkZXJUaW1lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QptC10L3QsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEudG90YWxQcmljZSB8fCAwfSDigr08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGAsXHJcbiAgICAgIHRleHQ6IGDQndC+0LLRi9C5INC30LDQutCw0LchINCj0YHQu9GD0LPQsDogJHtvcmRlckRhdGEuc2VydmljZURlc2NyaXB0aW9ufSwg0JrQu9C40LXQvdGCOiAke29yZGVyRGF0YS5jbGllbnROYW1lfSwg0KbQtdC90LA6ICR7b3JkZXJEYXRhLnRvdGFsUHJpY2V9IOKCvWBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyDQntGC0L/RgNCw0LLQutCwINGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0LLRi9C/0L7Qu9C90LXQvdC40Lgg0LfQsNC60LDQt9CwICjQutC70LjQtdC90YLRgylcclxuICBhc3luYyBzZW5kT3JkZXJDb21wbGV0ZWROb3RpZmljYXRpb24oY2xpZW50RW1haWw6IHN0cmluZywgb3JkZXJEYXRhOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZEVtYWlsKGNsaWVudEVtYWlsLCB7XHJcbiAgICAgICAgc3ViamVjdDogJ+KchSDQktCw0Ygg0LfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9IScsXHJcbiAgICAgICAgaHRtbDogYFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+4pyFINCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSE8L2gxPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxyXG4gICAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMzMzO1wiPtCS0LDRiCDQt9Cw0LrQsNC3INGD0YHQv9C10YjQvdC+INCy0YvQv9C+0LvQvdC10L0hPC9oMj5cclxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCj0YHQu9GD0LPQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEuc2VydmljZURlc2NyaXB0aW9uIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCY0YHQv9C+0LvQvdC40YLQtdC70Yw6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmV4ZWN1dG9yTmFtZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxyXG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsCDQstGL0L/QvtC70L3QtdC90LjRjzo8L3N0cm9uZz4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygncnUtUlUnKX08L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCh0YPQvNC80LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnRvdGFsUHJpY2UgfHwgMH0g4oK9PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgdGV4dDogYNCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmNGB0L/QvtC70L3QuNGC0LXQu9GMOiAke29yZGVyRGF0YS5leGVjdXRvck5hbWV9LCDQodGD0LzQvNCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZEVtYWlsKGNsaWVudEVtYWlsLCB7XHJcbiAgICAgIHN1YmplY3Q6ICfinIUg0JLQsNGIINC30LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEnLFxyXG4gICAgICBodG1sOiBgXHJcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzI4YTc0NSAwJSwgIzIwYzk5NyAxMDAlKTsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJjb2xvcjogd2hpdGU7IG1hcmdpbjogMDtcIj7inIUg0JfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9ITwvaDE+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XHJcbiAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMzMzO1wiPtCS0LDRiCDQt9Cw0LrQsNC3INGD0YHQv9C10YjQvdC+INCy0YvQv9C+0LvQvdC10L0hPC9oMj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCY0YHQv9C+0LvQvdC40YLQtdC70Yw6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmV4ZWN1dG9yTmFtZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JTQsNGC0LAg0LLRi9C/0L7Qu9C90LXQvdC40Y86PC9zdHJvbmc+ICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ3J1LVJVJyl9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KHRg9C80LzQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEudG90YWxQcmljZSB8fCAwfSDigr08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGAsXHJcbiAgICAgIHRleHQ6IGDQl9Cw0LrQsNC3INCy0YvQv9C+0LvQvdC10L0hINCj0YHQu9GD0LPQsDogJHtvcmRlckRhdGEuc2VydmljZURlc2NyaXB0aW9ufSwg0JjRgdC/0L7Qu9C90LjRgtC10LvRjDogJHtvcmRlckRhdGEuZXhlY3V0b3JOYW1lfSwg0KHRg9C80LzQsDogJHtvcmRlckRhdGEudG90YWxQcmljZX0g4oK9YFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LLRi9GI0LXQvdC40Lgg0YPRgNC+0LLQvdGPXHJcbiAgYXN5bmMgc2VuZExldmVsVXBOb3RpZmljYXRpb24odXNlckVtYWlsOiBzdHJpbmcsIGxldmVsRGF0YTogYW55KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbCh1c2VyRW1haWwsIHtcclxuICAgICAgICBzdWJqZWN0OiBg8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ISDQktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bGV2ZWxEYXRhLm5ld0xldmVsfSFgLFxyXG4gICAgICAgIGh0bWw6IGBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmZDcwMCAwJSwgI2ZmZWQ0ZSAxMDAlKTsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDA7XCI+8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ITwvaDE+XHJcbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMTBweCAwIDAgMDtcIj7QktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bGV2ZWxEYXRhLm5ld0xldmVsfSE8L2gyPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxyXG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDEwcHggMDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogNDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDtcIj4ke2xldmVsRGF0YS5pY29ufTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGgzIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMDtcIj4ke2xldmVsRGF0YS50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJjb2xvcjogIzY2NjsgbWFyZ2luOiAxMHB4IDA7XCI+JHtsZXZlbERhdGEuZGVzY3JpcHRpb24gfHwgJ9Ce0YLQu9C40YfQvdCw0Y8g0YDQsNCx0L7RgtCwISd9PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgdGV4dDogYNCf0L7Qt9C00YDQsNCy0LvRj9C10LwhINCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9IC0gJHtsZXZlbERhdGEudGl0bGV9IWBcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwodXNlckVtYWlsLCB7XHJcbiAgICAgIHN1YmplY3Q6IGDwn46JINCf0L7Qt9C00YDQsNCy0LvRj9C10LwhINCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9IWAsXHJcbiAgICAgIGh0bWw6IGBcclxuICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmZkNzAwIDAlLCAjZmZlZDRlIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDA7XCI+8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ITwvaDE+XHJcbiAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDEwcHggMCAwIDA7XCI+0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0hPC9oMj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogNDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDtcIj4ke2xldmVsRGF0YS5pY29ufTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxoMyBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDA7XCI+JHtsZXZlbERhdGEudGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjNjY2OyBtYXJnaW46IDEwcHggMDtcIj4ke2xldmVsRGF0YS5kZXNjcmlwdGlvbiB8fCAn0J7RgtC70LjRh9C90LDRjyDRgNCw0LHQvtGC0LAhJ308L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGAsXHJcbiAgICAgIHRleHQ6IGDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ISDQktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bGV2ZWxEYXRhLm5ld0xldmVsfSAtICR7bGV2ZWxEYXRhLnRpdGxlfSFgXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8g0J7RgtC/0YDQsNCy0LrQsCDQvdC+0LLQvtGB0YLQvdC+0Lkg0YDQsNGB0YHRi9C70LrQuFxyXG4gIGFzeW5jIHNlbmROZXdzbGV0dGVyKGVtYWlsczogc3RyaW5nW10sIG5ld3NsZXR0ZXJEYXRhOiBhbnkpOiBQcm9taXNlPHsgc3VjY2VzczogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9PiB7XHJcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XHJcbiAgICAgIGxldCBzdWNjZXNzID0gMFxyXG4gICAgICBsZXQgZmFpbGVkID0gMFxyXG5cclxuICAgICAgZm9yIChjb25zdCBlbWFpbCBvZiBlbWFpbHMpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRFbWFpbChlbWFpbCwge1xyXG4gICAgICAgICAgc3ViamVjdDogbmV3c2xldHRlckRhdGEuc3ViamVjdCxcclxuICAgICAgICAgIGh0bWw6IGBcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cclxuICAgICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfk6IgJHtuZXdzbGV0dGVyRGF0YS5zdWJqZWN0fTwvaDE+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XHJcbiAgICAgICAgICAgICAgICAgICR7bmV3c2xldHRlckRhdGEuY29udGVudH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIGAsXHJcbiAgICAgICAgICB0ZXh0OiBuZXdzbGV0dGVyRGF0YS50ZXh0Q29udGVudCB8fCBuZXdzbGV0dGVyRGF0YS5zdWJqZWN0XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICBzdWNjZXNzKytcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZmFpbGVkKytcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3MsIGZhaWxlZCB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN1Y2Nlc3MgPSAwXHJcbiAgICBsZXQgZmFpbGVkID0gMFxyXG5cclxuICAgIGZvciAoY29uc3QgZW1haWwgb2YgZW1haWxzKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VuZEVtYWlsKGVtYWlsLCB7XHJcbiAgICAgICAgc3ViamVjdDogbmV3c2xldHRlckRhdGEuc3ViamVjdCxcclxuICAgICAgICBodG1sOiBgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cclxuICAgICAgICAgICAgICA8aDEgc3R5bGU9XCJjb2xvcjogd2hpdGU7IG1hcmdpbjogMDtcIj7wn5OiICR7bmV3c2xldHRlckRhdGEuc3ViamVjdH08L2gxPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxyXG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDEwcHggMDtcIj5cclxuICAgICAgICAgICAgICAgICR7bmV3c2xldHRlckRhdGEuY29udGVudH1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgLFxyXG4gICAgICAgIHRleHQ6IG5ld3NsZXR0ZXJEYXRhLnRleHRDb250ZW50IHx8IG5ld3NsZXR0ZXJEYXRhLnN1YmplY3RcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICBzdWNjZXNzKytcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmYWlsZWQrK1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgRW1haWxTZXJ2aWNlKClcclxuIl0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJFbWFpbFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImluaXRpYWxpemUiLCJpc0RldmVsb3BtZW50IiwicHJvY2VzcyIsImVudiIsIkVNQUlMX0hPU1QiLCJFTUFJTF9VU0VSIiwiRU1BSUxfUEFTUyIsImNvbnNvbGUiLCJsb2ciLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInN0cmVhbVRyYW5zcG9ydCIsIm5ld2xpbmUiLCJidWZmZXIiLCJob3N0IiwicG9ydCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInJlaW5pdGlhbGl6ZSIsInZlcmlmeUNvbm5lY3Rpb24iLCJ2ZXJpZnkiLCJlcnJvciIsInNlbmRFbWFpbCIsInRvIiwidGVtcGxhdGUiLCJzdWJqZWN0IiwiaHRtbCIsInN1YnN0cmluZyIsIm1haWxPcHRpb25zIiwiZnJvbSIsInRleHQiLCJzZW5kTWFpbCIsInNlbmROZXdPcmRlck5vdGlmaWNhdGlvbiIsImV4ZWN1dG9yRW1haWwiLCJvcmRlckRhdGEiLCJzZXJ2aWNlRGVzY3JpcHRpb24iLCJjbGllbnROYW1lIiwiYWRkcmVzcyIsInBob25lIiwib3JkZXJEYXRlIiwib3JkZXJUaW1lIiwidG90YWxQcmljZSIsInNlbmRPcmRlckNvbXBsZXRlZE5vdGlmaWNhdGlvbiIsImNsaWVudEVtYWlsIiwiZXhlY3V0b3JOYW1lIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInNlbmRMZXZlbFVwTm90aWZpY2F0aW9uIiwidXNlckVtYWlsIiwibGV2ZWxEYXRhIiwibmV3TGV2ZWwiLCJpY29uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNlbmROZXdzbGV0dGVyIiwiZW1haWxzIiwibmV3c2xldHRlckRhdGEiLCJzdWNjZXNzIiwiZmFpbGVkIiwiZW1haWwiLCJyZXN1bHQiLCJjb250ZW50IiwidGV4dENvbnRlbnQiLCJlbWFpbFNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/email/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/notificationService.ts":
/*!*************************************************!*\
  !*** ./lib/gamification/notificationService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationService: () => (/* binding */ NotificationService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _email_emailService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../email/emailService */ \"(rsc)/./lib/email/emailService.ts\");\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nclass NotificationService {\n    // Создание уведомления\n    async createNotification(data) {\n        try {\n            await prisma.notification.create({\n                data: {\n                    userId: data.userId,\n                    title: data.title,\n                    message: data.message,\n                    type: data.type,\n                    // metadata: data.metadata || {},\n                    isRead: false\n                }\n            });\n            // Отправляем email уведомление\n            await this.sendEmailNotification(data);\n        } catch (error) {\n            console.error(\"Error creating notification:\", error);\n        }\n    }\n    // Отправка email уведомления\n    async sendEmailNotification(data) {\n        try {\n            // Получаем email пользователя\n            const user = await prisma.user.findUnique({\n                where: {\n                    id: data.userId\n                },\n                select: {\n                    email: true\n                }\n            });\n            if (!user?.email) return;\n            // Отправляем email в зависимости от типа уведомления\n            switch(data.type){\n                case \"level_up\":\n                    if (data.metadata?.levelConfig) {\n                        await _email_emailService__WEBPACK_IMPORTED_MODULE_1__.emailService.sendLevelUpNotification(user.email, data.metadata.levelConfig);\n                    }\n                    break;\n            }\n        } catch (error) {\n            console.error(\"Error sending email notification:\", error);\n        }\n    }\n    // Создание уведомления о повышении уровня\n    async notifyLevelUp(userId, oldLevel, newLevel, levelConfig) {\n        await this.createNotification({\n            userId,\n            type: \"level_up\",\n            title: \"\\uD83C\\uDF89 Поздравляем с повышением уровня!\",\n            message: `Вы достигли уровня ${newLevel} - ${levelConfig.title}! ${levelConfig.icon}`,\n            icon: levelConfig.icon,\n            metadata: {\n                oldLevel,\n                newLevel,\n                levelConfig\n            }\n        });\n    }\n    // Создание уведомления о получении достижения\n    async notifyAchievement(userId, achievement) {\n        await this.createNotification({\n            userId,\n            type: \"achievement\",\n            title: \"\\uD83C\\uDFC6 Новое достижение!\",\n            message: `Вы получили достижение \"${achievement.title}\"! ${achievement.icon}`,\n            icon: achievement.icon,\n            xpAmount: achievement.xpReward,\n            metadata: {\n                achievementId: achievement.id,\n                achievement\n            }\n        });\n    }\n    // Создание уведомления о получении XP\n    async notifyXpGain(userId, xpAmount, source, description) {\n        await this.createNotification({\n            userId,\n            type: \"xp_gain\",\n            title: \"⚡ Получен XP!\",\n            message: `+${xpAmount} XP за ${description}`,\n            xpAmount,\n            metadata: {\n                source,\n                description\n            }\n        });\n    }\n    // Создание уведомления о реферале\n    async notifyReferral(userId, referralType, data) {\n        if (referralType === \"new_referral\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83D\\uDC65 Новый реферал!\",\n                message: `Ваш друг ${data.referredName} зарегистрировался по вашей ссылке!`,\n                icon: \"\\uD83C\\uDF81\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (referralType === \"referral_activity\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83C\\uDFAF Реферал активен!\",\n                message: `Ваш реферал ${data.referredName} ${data.activity}!`,\n                icon: \"⭐\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Создание уведомления о подписке\n    async notifySubscription(userId, subscriptionType, data) {\n        if (subscriptionType === \"new\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDCB3 Подписка активирована!\",\n                message: `Ваша подписка \"${data.planName}\" успешно активирована!`,\n                icon: \"\\uD83D\\uDC51\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (subscriptionType === \"renewal\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDD04 Подписка продлена!\",\n                message: `Ваша подписка \"${data.planName}\" продлена на ${data.period}!`,\n                icon: \"\\uD83D\\uDC8E\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Получение уведомлений пользователя\n    async getUserNotifications(userId, limit = 20) {\n        try {\n            const notifications = await prisma.notification.findMany({\n                where: {\n                    userId\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                take: limit\n            });\n            return notifications;\n        } catch (error) {\n            console.error(\"Error fetching notifications:\", error);\n            return [];\n        }\n    }\n    // Отметить уведомление как прочитанное\n    async markAsRead(notificationId) {\n        try {\n            await prisma.notification.update({\n                where: {\n                    id: notificationId\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking notification as read:\", error);\n        }\n    }\n    // Отметить все уведомления как прочитанные\n    async markAllAsRead(userId) {\n        try {\n            await prisma.notification.updateMany({\n                where: {\n                    userId,\n                    isRead: false\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking all notifications as read:\", error);\n        }\n    }\n    // Получение количества непрочитанных уведомлений\n    async getUnreadCount(userId) {\n        try {\n            const count = await prisma.notification.count({\n                where: {\n                    userId,\n                    isRead: false\n                }\n            });\n            return count;\n        } catch (error) {\n            console.error(\"Error getting unread count:\", error);\n            return 0;\n        }\n    }\n    // Удаление старых уведомлений (старше 30 дней)\n    async cleanupOldNotifications() {\n        try {\n            const thirtyDaysAgo = new Date();\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n            await prisma.notification.deleteMany({\n                where: {\n                    createdAt: {\n                        lt: thirtyDaysAgo\n                    },\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error cleaning up old notifications:\", error);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2FtaWZpY2F0aW9uL25vdGlmaWNhdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNPO0FBRXBELE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBWXhCLE1BQU1HO0lBQ1gsdUJBQXVCO0lBQ3ZCLE1BQU1DLG1CQUFtQkMsSUFBc0IsRUFBaUI7UUFDOUQsSUFBSTtZQUNGLE1BQU1ILE9BQU9JLFlBQVksQ0FBQ0MsTUFBTSxDQUFDO2dCQUMvQkYsTUFBTTtvQkFDSkcsUUFBUUgsS0FBS0csTUFBTTtvQkFDbkJDLE9BQU9KLEtBQUtJLEtBQUs7b0JBQ2pCQyxTQUFTTCxLQUFLSyxPQUFPO29CQUNyQkMsTUFBTU4sS0FBS00sSUFBSTtvQkFDZixpQ0FBaUM7b0JBQ2pDQyxRQUFRO2dCQUNWO1lBQ0Y7WUFFQSwrQkFBK0I7WUFDL0IsTUFBTSxJQUFJLENBQUNDLHFCQUFxQixDQUFDUjtRQUNuQyxFQUFFLE9BQU9TLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDaEQ7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QixNQUFjRCxzQkFBc0JSLElBQXNCLEVBQWlCO1FBQ3pFLElBQUk7WUFDRiw4QkFBOEI7WUFDOUIsTUFBTVcsT0FBTyxNQUFNZCxPQUFPYyxJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeENDLE9BQU87b0JBQUVDLElBQUlkLEtBQUtHLE1BQU07Z0JBQUM7Z0JBQ3pCWSxRQUFRO29CQUFFQyxPQUFPO2dCQUFLO1lBQ3hCO1lBRUEsSUFBSSxDQUFDTCxNQUFNSyxPQUFPO1lBRWxCLHFEQUFxRDtZQUNyRCxPQUFRaEIsS0FBS00sSUFBSTtnQkFDZixLQUFLO29CQUNILElBQUlOLEtBQUtpQixRQUFRLEVBQUVDLGFBQWE7d0JBQzlCLE1BQU10Qiw2REFBWUEsQ0FBQ3VCLHVCQUF1QixDQUFDUixLQUFLSyxLQUFLLEVBQUVoQixLQUFLaUIsUUFBUSxDQUFDQyxXQUFXO29CQUNsRjtvQkFDQTtZQUVK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QVFELEtBQUssQ0FBQyw0Q0FBNENBO1FBQzVEO0lBQ0Y7SUFFQSxpREFBaUQ7SUFDakQsTUFBTTJDLGVBQWVqRCxNQUFjLEVBQW1CO1FBQ3BELElBQUk7WUFDRixNQUFNa0QsUUFBUSxNQUFNeEQsT0FBT0ksWUFBWSxDQUFDb0QsS0FBSyxDQUFDO2dCQUM1Q3hDLE9BQU87b0JBQUVWO29CQUFRSSxRQUFRO2dCQUFNO1lBQ2pDO1lBQ0EsT0FBTzhDO1FBQ1QsRUFBRSxPQUFPNUMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtZQUM3QyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLCtDQUErQztJQUMvQyxNQUFNNkMsMEJBQXlDO1FBQzdDLElBQUk7WUFDRixNQUFNQyxnQkFBZ0IsSUFBSUM7WUFDMUJELGNBQWNFLE9BQU8sQ0FBQ0YsY0FBY0csT0FBTyxLQUFLO1lBRWhELE1BQU03RCxPQUFPSSxZQUFZLENBQUMwRCxVQUFVLENBQUM7Z0JBQ25DOUMsT0FBTztvQkFDTGdDLFdBQVc7d0JBQ1RlLElBQUlMO29CQUNOO29CQUNBaEQsUUFBUTtnQkFDVjtZQUNGO1FBQ0YsRUFBRSxPQUFPRSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3Q0FBd0NBO1FBQ3hEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2xpYi9nYW1pZmljYXRpb24vbm90aWZpY2F0aW9uU2VydmljZS50cz81M2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5pbXBvcnQgeyBlbWFpbFNlcnZpY2UgfSBmcm9tICcuLi9lbWFpbC9lbWFpbFNlcnZpY2UnXHJcblxyXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uRGF0YSB7XHJcbiAgdXNlcklkOiBudW1iZXJcclxuICB0eXBlOiAnbGV2ZWxfdXAnIHwgJ2FjaGlldmVtZW50JyB8ICd4cF9nYWluJyB8ICdyZWZlcnJhbCcgfCAnc3Vic2NyaXB0aW9uJyB8ICdzdXBwb3J0X3RpY2tldF9jcmVhdGVkJyB8ICdzdXBwb3J0X3RpY2tldF9hZG1pbicgfCAnc3VwcG9ydF90aWNrZXRfcmVwbHknXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIG1lc3NhZ2U6IHN0cmluZ1xyXG4gIGljb24/OiBzdHJpbmdcclxuICB4cEFtb3VudD86IG51bWJlclxyXG4gIG1ldGFkYXRhPzogYW55XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcclxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y9cclxuICBhc3luYyBjcmVhdGVOb3RpZmljYXRpb24oZGF0YTogTm90aWZpY2F0aW9uRGF0YSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcclxuICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSxcclxuICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSxcclxuICAgICAgICAgIC8vIG1ldGFkYXRhOiBkYXRhLm1ldGFkYXRhIHx8IHt9LFxyXG4gICAgICAgICAgaXNSZWFkOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8IGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40LVcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kRW1haWxOb3RpZmljYXRpb24oZGF0YSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCe0YLQv9GA0LDQstC60LAgZW1haWwg0YPQstC10LTQvtC80LvQtdC90LjRj1xyXG4gIHByaXZhdGUgYXN5bmMgc2VuZEVtYWlsTm90aWZpY2F0aW9uKGRhdGE6IE5vdGlmaWNhdGlvbkRhdGEpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vINCf0L7Qu9GD0YfQsNC10LwgZW1haWwg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogZGF0YS51c2VySWQgfSxcclxuICAgICAgICBzZWxlY3Q6IHsgZW1haWw6IHRydWUgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKCF1c2VyPy5lbWFpbCkgcmV0dXJuXHJcblxyXG4gICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCBlbWFpbCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YLQuNC/0LAg0YPQstC10LTQvtC80LvQtdC90LjRj1xyXG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2xldmVsX3VwJzpcclxuICAgICAgICAgIGlmIChkYXRhLm1ldGFkYXRhPy5sZXZlbENvbmZpZykge1xyXG4gICAgICAgICAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZExldmVsVXBOb3RpZmljYXRpb24odXNlci5lbWFpbCwgZGF0YS5tZXRhZGF0YS5sZXZlbENvbmZpZylcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgLy8g0JTQvtCx0LDQstC40Lwg0LTRgNGD0LPQuNC1INGC0LjQv9GLINGD0LLQtdC00L7QvNC70LXQvdC40Lkg0L/QviDQvNC10YDQtSDQvdC10L7QsdGF0L7QtNC40LzQvtGB0YLQuFxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGVtYWlsIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LLRi9GI0LXQvdC40Lgg0YPRgNC+0LLQvdGPXHJcbiAgYXN5bmMgbm90aWZ5TGV2ZWxVcCh1c2VySWQ6IG51bWJlciwgb2xkTGV2ZWw6IG51bWJlciwgbmV3TGV2ZWw6IG51bWJlciwgbGV2ZWxDb25maWc6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24oe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIHR5cGU6ICdsZXZlbF91cCcsXHJcbiAgICAgIHRpdGxlOiAn8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8INGBINC/0L7QstGL0YjQtdC90LjQtdC8INGD0YDQvtCy0L3RjyEnLFxyXG4gICAgICBtZXNzYWdlOiBg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke25ld0xldmVsfSAtICR7bGV2ZWxDb25maWcudGl0bGV9ISAke2xldmVsQ29uZmlnLmljb259YCxcclxuICAgICAgaWNvbjogbGV2ZWxDb25maWcuaWNvbixcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBvbGRMZXZlbCxcclxuICAgICAgICBuZXdMZXZlbCxcclxuICAgICAgICBsZXZlbENvbmZpZ1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7Qu9GD0YfQtdC90LjQuCDQtNC+0YHRgtC40LbQtdC90LjRj1xyXG4gIGFzeW5jIG5vdGlmeUFjaGlldmVtZW50KHVzZXJJZDogbnVtYmVyLCBhY2hpZXZlbWVudDogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgdHlwZTogJ2FjaGlldmVtZW50JyxcclxuICAgICAgdGl0bGU6ICfwn4+GINCd0L7QstC+0LUg0LTQvtGB0YLQuNC20LXQvdC40LUhJyxcclxuICAgICAgbWVzc2FnZTogYNCS0Ysg0L/QvtC70YPRh9C40LvQuCDQtNC+0YHRgtC40LbQtdC90LjQtSBcIiR7YWNoaWV2ZW1lbnQudGl0bGV9XCIhICR7YWNoaWV2ZW1lbnQuaWNvbn1gLFxyXG4gICAgICBpY29uOiBhY2hpZXZlbWVudC5pY29uLFxyXG4gICAgICB4cEFtb3VudDogYWNoaWV2ZW1lbnQueHBSZXdhcmQsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgYWNoaWV2ZW1lbnRJZDogYWNoaWV2ZW1lbnQuaWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LvRg9GH0LXQvdC40LggWFBcclxuICBhc3luYyBub3RpZnlYcEdhaW4odXNlcklkOiBudW1iZXIsIHhwQW1vdW50OiBudW1iZXIsIHNvdXJjZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgdHlwZTogJ3hwX2dhaW4nLFxyXG4gICAgICB0aXRsZTogJ+KaoSDQn9C+0LvRg9GH0LXQvSBYUCEnLFxyXG4gICAgICBtZXNzYWdlOiBgKyR7eHBBbW91bnR9IFhQINC30LAgJHtkZXNjcmlwdGlvbn1gLFxyXG4gICAgICB4cEFtb3VudCxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDRgNC10YTQtdGA0LDQu9C1XHJcbiAgYXN5bmMgbm90aWZ5UmVmZXJyYWwodXNlcklkOiBudW1iZXIsIHJlZmVycmFsVHlwZTogJ25ld19yZWZlcnJhbCcgfCAncmVmZXJyYWxfYWN0aXZpdHknLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmIChyZWZlcnJhbFR5cGUgPT09ICduZXdfcmVmZXJyYWwnKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdHlwZTogJ3JlZmVycmFsJyxcclxuICAgICAgICB0aXRsZTogJ/CfkaUg0J3QvtCy0YvQuSDRgNC10YTQtdGA0LDQuyEnLFxyXG4gICAgICAgIG1lc3NhZ2U6IGDQktCw0Ygg0LTRgNGD0LMgJHtkYXRhLnJlZmVycmVkTmFtZX0g0LfQsNGA0LXQs9C40YHRgtGA0LjRgNC+0LLQsNC70YHRjyDQv9C+INCy0LDRiNC10Lkg0YHRgdGL0LvQutC1IWAsXHJcbiAgICAgICAgaWNvbjogJ/CfjoEnLFxyXG4gICAgICAgIHhwQW1vdW50OiBkYXRhLnhwUmV3YXJkLFxyXG4gICAgICAgIG1ldGFkYXRhOiBkYXRhXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKHJlZmVycmFsVHlwZSA9PT0gJ3JlZmVycmFsX2FjdGl2aXR5Jykge1xyXG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHR5cGU6ICdyZWZlcnJhbCcsXHJcbiAgICAgICAgdGl0bGU6ICfwn46vINCg0LXRhNC10YDQsNC7INCw0LrRgtC40LLQtdC9IScsXHJcbiAgICAgICAgbWVzc2FnZTogYNCS0LDRiCDRgNC10YTQtdGA0LDQuyAke2RhdGEucmVmZXJyZWROYW1lfSAke2RhdGEuYWN0aXZpdHl9IWAsXHJcbiAgICAgICAgaWNvbjogJ+KtkCcsXHJcbiAgICAgICAgeHBBbW91bnQ6IGRhdGEueHBSZXdhcmQsXHJcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LTQv9C40YHQutC1XHJcbiAgYXN5bmMgbm90aWZ5U3Vic2NyaXB0aW9uKHVzZXJJZDogbnVtYmVyLCBzdWJzY3JpcHRpb25UeXBlOiAnbmV3JyB8ICdyZW5ld2FsJywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBpZiAoc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ25ldycpIHtcclxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24oe1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICB0eXBlOiAnc3Vic2NyaXB0aW9uJyxcclxuICAgICAgICB0aXRsZTogJ/CfkrMg0J/QvtC00L/QuNGB0LrQsCDQsNC60YLQuNCy0LjRgNC+0LLQsNC90LAhJyxcclxuICAgICAgICBtZXNzYWdlOiBg0JLQsNGI0LAg0L/QvtC00L/QuNGB0LrQsCBcIiR7ZGF0YS5wbGFuTmFtZX1cIiDRg9GB0L/QtdGI0L3QviDQsNC60YLQuNCy0LjRgNC+0LLQsNC90LAhYCxcclxuICAgICAgICBpY29uOiAn8J+RkScsXHJcbiAgICAgICAgeHBBbW91bnQ6IGRhdGEueHBSZXdhcmQsXHJcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAoc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ3JlbmV3YWwnKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdHlwZTogJ3N1YnNjcmlwdGlvbicsXHJcbiAgICAgICAgdGl0bGU6ICfwn5SEINCf0L7QtNC/0LjRgdC60LAg0L/RgNC+0LTQu9C10L3QsCEnLFxyXG4gICAgICAgIG1lc3NhZ2U6IGDQktCw0YjQsCDQv9C+0LTQv9C40YHQutCwIFwiJHtkYXRhLnBsYW5OYW1lfVwiINC/0YDQvtC00LvQtdC90LAg0L3QsCAke2RhdGEucGVyaW9kfSFgLFxyXG4gICAgICAgIGljb246ICfwn5KOJyxcclxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcclxuICAgICAgICBtZXRhZGF0YTogZGF0YVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgYXN5bmMgZ2V0VXNlck5vdGlmaWNhdGlvbnModXNlcklkOiBudW1iZXIsIGxpbWl0OiBudW1iZXIgPSAyMCk6IFByb21pc2U8YW55W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyB1c2VySWQgfSxcclxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXHJcbiAgICAgICAgdGFrZTogbGltaXRcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbnNcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0J7RgtC80LXRgtC40YLRjCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INC60LDQuiDQv9GA0L7Rh9C40YLQsNC90L3QvtC1XHJcbiAgYXN5bmMgbWFya0FzUmVhZChub3RpZmljYXRpb25JZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG5vdGlmaWNhdGlvbklkIH0sXHJcbiAgICAgICAgZGF0YTogeyBpc1JlYWQ6IHRydWUgfVxyXG4gICAgICB9KVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBub3RpZmljYXRpb24gYXMgcmVhZDonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCe0YLQvNC10YLQuNGC0Ywg0LLRgdC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LVcclxuICBhc3luYyBtYXJrQWxsQXNSZWFkKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZCwgaXNSZWFkOiBmYWxzZSB9LFxyXG4gICAgICAgIGRhdGE6IHsgaXNSZWFkOiB0cnVlIH1cclxuICAgICAgfSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1hcmtpbmcgYWxsIG5vdGlmaWNhdGlvbnMgYXMgcmVhZDonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvRhSDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5XHJcbiAgYXN5bmMgZ2V0VW5yZWFkQ291bnQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNvdW50KHtcclxuICAgICAgICB3aGVyZTogeyB1c2VySWQsIGlzUmVhZDogZmFsc2UgfVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gY291bnRcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdW5yZWFkIGNvdW50OicsIGVycm9yKVxyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0KPQtNCw0LvQtdC90LjQtSDRgdGC0LDRgNGL0YUg0YPQstC10LTQvtC80LvQtdC90LjQuSAo0YHRgtCw0YDRiNC1IDMwINC00L3QtdC5KVxyXG4gIGFzeW5jIGNsZWFudXBPbGROb3RpZmljYXRpb25zKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdGhpcnR5RGF5c0FnbyA9IG5ldyBEYXRlKClcclxuICAgICAgdGhpcnR5RGF5c0Fnby5zZXREYXRlKHRoaXJ0eURheXNBZ28uZ2V0RGF0ZSgpIC0gMzApXHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmRlbGV0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcclxuICAgICAgICAgICAgbHQ6IHRoaXJ0eURheXNBZ29cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBpc1JlYWQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhbmluZyB1cCBvbGQgbm90aWZpY2F0aW9uczonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImVtYWlsU2VydmljZSIsInByaXNtYSIsIk5vdGlmaWNhdGlvblNlcnZpY2UiLCJjcmVhdGVOb3RpZmljYXRpb24iLCJkYXRhIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlIiwidXNlcklkIiwidGl0bGUiLCJtZXNzYWdlIiwidHlwZSIsImlzUmVhZCIsInNlbmRFbWFpbE5vdGlmaWNhdGlvbiIsImVycm9yIiwiY29uc29sZSIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInNlbGVjdCIsImVtYWlsIiwibWV0YWRhdGEiLCJsZXZlbENvbmZpZyIsInNlbmRMZXZlbFVwTm90aWZpY2F0aW9uIiwibm90aWZ5TGV2ZWxVcCIsIm9sZExldmVsIiwibmV3TGV2ZWwiLCJpY29uIiwibm90aWZ5QWNoaWV2ZW1lbnQiLCJhY2hpZXZlbWVudCIsInhwQW1vdW50IiwieHBSZXdhcmQiLCJhY2hpZXZlbWVudElkIiwibm90aWZ5WHBHYWluIiwic291cmNlIiwiZGVzY3JpcHRpb24iLCJub3RpZnlSZWZlcnJhbCIsInJlZmVycmFsVHlwZSIsInJlZmVycmVkTmFtZSIsImFjdGl2aXR5Iiwibm90aWZ5U3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uVHlwZSIsInBsYW5OYW1lIiwicGVyaW9kIiwiZ2V0VXNlck5vdGlmaWNhdGlvbnMiLCJsaW1pdCIsIm5vdGlmaWNhdGlvbnMiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0YWtlIiwibWFya0FzUmVhZCIsIm5vdGlmaWNhdGlvbklkIiwidXBkYXRlIiwibWFya0FsbEFzUmVhZCIsInVwZGF0ZU1hbnkiLCJnZXRVbnJlYWRDb3VudCIsImNvdW50IiwiY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMiLCJ0aGlydHlEYXlzQWdvIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiZGVsZXRlTWFueSIsImx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/notificationService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();