"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/support/tickets/route";
exports.ids = ["app/api/support/tickets/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsupport%2Ftickets%2Froute&page=%2Fapi%2Fsupport%2Ftickets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsupport%2Ftickets%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsupport%2Ftickets%2Froute&page=%2Fapi%2Fsupport%2Ftickets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsupport%2Ftickets%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_mobile_app_api_support_tickets_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/support/tickets/route.ts */ \"(rsc)/./app/api/support/tickets/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/support/tickets/route\",\n        pathname: \"/api/support/tickets\",\n        filename: \"route\",\n        bundlePath: \"app/api/support/tickets/route\"\n    },\n    resolvedPagePath: \"D:\\\\mobile\\\\app\\\\api\\\\support\\\\tickets\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_mobile_app_api_support_tickets_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/support/tickets/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdXBwb3J0JTJGdGlja2V0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3VwcG9ydCUyRnRpY2tldHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdXBwb3J0JTJGdGlja2V0cyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbW9iaWxlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDbW9iaWxlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0E7QUFDN0U7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvPzY0MTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbW9iaWxlXFxcXGFwcFxcXFxhcGlcXFxcc3VwcG9ydFxcXFx0aWNrZXRzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdXBwb3J0L3RpY2tldHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdXBwb3J0L3RpY2tldHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N1cHBvcnQvdGlja2V0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXG1vYmlsZVxcXFxhcHBcXFxcYXBpXFxcXHN1cHBvcnRcXFxcdGlja2V0c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdXBwb3J0L3RpY2tldHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsupport%2Ftickets%2Froute&page=%2Fapi%2Fsupport%2Ftickets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsupport%2Ftickets%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/support/tickets/route.ts":
/*!******************************************!*\
  !*** ./app/api/support/tickets/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_email_emailService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/email/emailService */ \"(rsc)/./lib/email/emailService.ts\");\n/* harmony import */ var _lib_gamification_notificationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/gamification/notificationService */ \"(rsc)/./lib/gamification/notificationService.ts\");\n\n\n\n\nconst notificationService = new _lib_gamification_notificationService__WEBPACK_IMPORTED_MODULE_3__.NotificationService();\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_1__.PrismaClient();\n// GET - Получить тикеты пользователя\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = parseInt(searchParams.get(\"userId\") || \"0\");\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"ID пользователя не указан\"\n            }, {\n                status: 400\n            });\n        }\n        const tickets = await prisma.supportTicket.findMany({\n            where: {\n                userId\n            },\n            include: {\n                messages: {\n                    include: {\n                        user: {\n                            select: {\n                                name: true\n                            }\n                        }\n                    },\n                    orderBy: {\n                        createdAt: \"asc\"\n                    }\n                }\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            tickets\n        });\n    } catch (error) {\n        console.error(\"Ошибка получения тикетов:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Внутренняя ошибка сервера\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST - Создать новый тикет\nasync function POST(request) {\n    try {\n        const { userId, subject, description, category, priority } = await request.json();\n        if (!userId || !subject || !description) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Не все поля заполнены\"\n            }, {\n                status: 400\n            });\n        }\n        // Создаем тикет\n        const ticket = await prisma.supportTicket.create({\n            data: {\n                userId,\n                subject,\n                description,\n                category: category || \"general\",\n                priority: priority || \"medium\",\n                status: \"open\"\n            },\n            include: {\n                user: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        // Создаем уведомление для пользователя\n        await notificationService.createNotification({\n            userId,\n            type: \"support_ticket_created\",\n            title: \"Обращение в службу поддержки создано\",\n            message: `Ваше обращение \"${subject}\" успешно создано. Мы ответим в ближайшее время.`,\n            metadata: {\n                ticketId: ticket.id,\n                category: category || \"general\",\n                priority: priority || \"medium\"\n            }\n        });\n        // Отправляем уведомление админам\n        try {\n            const admins = await prisma.user.findMany({\n                where: {\n                    role: \"admin\"\n                },\n                select: {\n                    id: true,\n                    email: true\n                }\n            });\n            const adminEmails = admins.map((admin)=>admin.email).filter(Boolean);\n            // Создаем уведомления для всех админов\n            for (const admin of admins){\n                await notificationService.createNotification({\n                    userId: admin.id,\n                    type: \"support_ticket_admin\",\n                    title: \"Новое обращение в службу поддержки\",\n                    message: `Пользователь ${ticket.user.name} создал обращение: \"${subject}\"`,\n                    metadata: {\n                        ticketId: ticket.id,\n                        userEmail: ticket.user.email,\n                        category: category || \"general\",\n                        priority: priority || \"medium\"\n                    }\n                });\n            }\n            if (adminEmails.length > 0) {\n                await _lib_email_emailService__WEBPACK_IMPORTED_MODULE_2__.emailService.sendEmail(adminEmails[0], {\n                    subject: `🎫 Новое обращение в службу поддержки: ${subject}`,\n                    html: `\n            <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n              <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n                <h1 style=\"color: white; margin: 0;\">🎫 Новое обращение в службу поддержки</h1>\n              </div>\n              \n              <div style=\"padding: 20px; background: #f8f9fa;\">\n                <h2 style=\"color: #333;\">Детали обращения:</h2>\n                <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n                  <p><strong>Тема:</strong> ${subject}</p>\n                  <p><strong>Пользователь:</strong> ${ticket.user.name}</p>\n                  <p><strong>Email:</strong> ${ticket.user.email}</p>\n                  <p><strong>Категория:</strong> ${category}</p>\n                  <p><strong>Приоритет:</strong> ${priority}</p>\n                  <p><strong>Описание:</strong></p>\n                  <div style=\"background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 5px;\">\n                    ${description.replace(/\\n/g, \"<br>\")}\n                  </div>\n                </div>\n                \n                <div style=\"text-align: center; margin: 20px 0;\">\n                  <a href=\"http://localhost:3000/admin/support\" style=\"background: #667eea; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;\">\n                    Перейти в админ-панель\n                  </a>\n                </div>\n              </div>\n            </div>\n          `,\n                    text: `Новое обращение в службу поддержки от ${ticket.user.name}: ${subject}`\n                });\n            }\n        } catch (emailError) {\n            console.error(\"Ошибка отправки email уведомления:\", emailError);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            ticket\n        });\n    } catch (error) {\n        console.error(\"Ошибка создания тикета:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Внутренняя ошибка сервера\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlBLENBQUNjLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUcUI7UUFDRjtJQUNGLEVBQUUsT0FBT3BCLE9BQU87UUFDZGMsUUFBUWQsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBT2hCLGtGQUFZQSxDQUFDYyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsT0FBTztRQUE0QixHQUNyRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2FwcC9hcGkvc3VwcG9ydC90aWNrZXRzL3JvdXRlLnRzP2FlNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5pbXBvcnQgeyBlbWFpbFNlcnZpY2UgfSBmcm9tICdAL2xpYi9lbWFpbC9lbWFpbFNlcnZpY2UnXG5pbXBvcnQgeyBOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnQC9saWIvZ2FtaWZpY2F0aW9uL25vdGlmaWNhdGlvblNlcnZpY2UnXG5cbmNvbnN0IG5vdGlmaWNhdGlvblNlcnZpY2UgPSBuZXcgTm90aWZpY2F0aW9uU2VydmljZSgpXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxuXG4vLyBHRVQgLSDQn9C+0LvRg9GH0LjRgtGMINGC0LjQutC10YLRiyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCB1c2VySWQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKSB8fCAnMCcpXG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0lEINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdC1INGD0LrQsNC30LDQvScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgdGlja2V0cyA9IGF3YWl0IHByaXNtYS5zdXBwb3J0VGlja2V0LmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgICBjcmVhdGVkQXQ6ICdhc2MnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb3JkZXJCeToge1xuICAgICAgICB1cGRhdGVkQXQ6ICdkZXNjJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRpY2tldHNcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9C+0LvRg9GH0LXQvdC40Y8g0YLQuNC60LXRgtC+0LI6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfQktC90YPRgtGA0LXQvdC90Y/RjyDQvtGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8gUE9TVCAtINCh0L7Qt9C00LDRgtGMINC90L7QstGL0Lkg0YLQuNC60LXRglxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgc3ViamVjdCwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBwcmlvcml0eSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghdXNlcklkIHx8ICFzdWJqZWN0IHx8ICFkZXNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0YLQuNC60LXRglxuICAgIGNvbnN0IHRpY2tldCA9IGF3YWl0IHByaXNtYS5zdXBwb3J0VGlja2V0LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3ViamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSB8fCAnZ2VuZXJhbCcsXG4gICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSB8fCAnbWVkaXVtJyxcbiAgICAgICAgc3RhdHVzOiAnb3BlbidcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDQodC+0LfQtNCw0LXQvCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INC00LvRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgICBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICB1c2VySWQsXG4gICAgICB0eXBlOiAnc3VwcG9ydF90aWNrZXRfY3JlYXRlZCcsXG4gICAgICB0aXRsZTogJ9Ce0LHRgNCw0YnQtdC90LjQtSDQsiDRgdC70YPQttCx0YMg0L/QvtC00LTQtdGA0LbQutC4INGB0L7Qt9C00LDQvdC+JyxcbiAgICAgIG1lc3NhZ2U6IGDQktCw0YjQtSDQvtCx0YDQsNGJ0LXQvdC40LUgXCIke3N1YmplY3R9XCIg0YPRgdC/0LXRiNC90L4g0YHQvtC30LTQsNC90L4uINCc0Ysg0L7RgtCy0LXRgtC40Lwg0LIg0LHQu9C40LbQsNC50YjQtdC1INCy0YDQtdC80Y8uYCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHRpY2tldElkOiB0aWNrZXQuaWQsXG4gICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSB8fCAnZ2VuZXJhbCcsXG4gICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSB8fCAnbWVkaXVtJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INCw0LTQvNC40L3QsNC8XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFkbWlucyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgcm9sZTogJ2FkbWluJyB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGVtYWlsOiB0cnVlIH1cbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGFkbWluRW1haWxzID0gYWRtaW5zLm1hcChhZG1pbiA9PiBhZG1pbi5lbWFpbCkuZmlsdGVyKEJvb2xlYW4pIGFzIHN0cmluZ1tdXG4gICAgICBcbiAgICAgIC8vINCh0L7Qt9C00LDQtdC8INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0LTQu9GPINCy0YHQtdGFINCw0LTQvNC40L3QvtCyXG4gICAgICBmb3IgKGNvbnN0IGFkbWluIG9mIGFkbWlucykge1xuICAgICAgICBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgdXNlcklkOiBhZG1pbi5pZCxcbiAgICAgICAgICB0eXBlOiAnc3VwcG9ydF90aWNrZXRfYWRtaW4nLFxuICAgICAgICAgIHRpdGxlOiAn0J3QvtCy0L7QtSDQvtCx0YDQsNGJ0LXQvdC40LUg0LIg0YHQu9GD0LbQsdGDINC/0L7QtNC00LXRgNC20LrQuCcsXG4gICAgICAgICAgbWVzc2FnZTogYNCf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCAke3RpY2tldC51c2VyLm5hbWV9INGB0L7Qt9C00LDQuyDQvtCx0YDQsNGJ0LXQvdC40LU6IFwiJHtzdWJqZWN0fVwiYCxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgdGlja2V0SWQ6IHRpY2tldC5pZCxcbiAgICAgICAgICAgIHVzZXJFbWFpbDogdGlja2V0LnVzZXIuZW1haWwsXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnkgfHwgJ2dlbmVyYWwnLFxuICAgICAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5IHx8ICdtZWRpdW0nXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoYWRtaW5FbWFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZEVtYWlsKGFkbWluRW1haWxzWzBdLCB7XG4gICAgICAgICAgc3ViamVjdDogYPCfjqsg0J3QvtCy0L7QtSDQvtCx0YDQsNGJ0LXQvdC40LUg0LIg0YHQu9GD0LbQsdGDINC/0L7QtNC00LXRgNC20LrQuDogJHtzdWJqZWN0fWAsXG4gICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+8J+OqyDQndC+0LLQvtC1INC+0LHRgNCw0YnQtdC90LjQtSDQsiDRgdC70YPQttCx0YMg0L/QvtC00LTQtdGA0LbQutC4PC9oMT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QlNC10YLQsNC70Lgg0L7QsdGA0LDRidC10L3QuNGPOjwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxuICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QotC10LzQsDo8L3N0cm9uZz4gJHtzdWJqZWN0fTwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMOjwvc3Ryb25nPiAke3RpY2tldC51c2VyLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5FbWFpbDo8L3N0cm9uZz4gJHt0aWNrZXQudXNlci5lbWFpbH08L3A+XG4gICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCa0LDRgtC10LPQvtGA0LjRjzo8L3N0cm9uZz4gJHtjYXRlZ29yeX08L3A+XG4gICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCf0YDQuNC+0YDQuNGC0LXRgjo8L3N0cm9uZz4gJHtwcmlvcml0eX08L3A+XG4gICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCe0L/QuNGB0LDQvdC40LU6PC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgbWFyZ2luLXRvcDogNXB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAke2Rlc2NyaXB0aW9uLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FkbWluL3N1cHBvcnRcIiBzdHlsZT1cImJhY2tncm91bmQ6ICM2NjdlZWE7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweCAyMHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPlxuICAgICAgICAgICAgICAgICAgICDQn9C10YDQtdC50YLQuCDQsiDQsNC00LzQuNC9LdC/0LDQvdC10LvRjFxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGAsXG4gICAgICAgICAgdGV4dDogYNCd0L7QstC+0LUg0L7QsdGA0LDRidC10L3QuNC1INCyINGB0LvRg9C20LHRgyDQv9C+0LTQtNC10YDQttC60Lgg0L7RgiAke3RpY2tldC51c2VyLm5hbWV9OiAke3N1YmplY3R9YFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVtYWlsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4IGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40Y86JywgZW1haWxFcnJvcilcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRpY2tldFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwINGB0L7Qt9C00LDQvdC40Y8g0YLQuNC60LXRgtCwOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn0JLQvdGD0YLRgNC10L3QvdGP0Y8g0L7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUHJpc21hQ2xpZW50IiwiZW1haWxTZXJ2aWNlIiwiTm90aWZpY2F0aW9uU2VydmljZSIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJwcmlzbWEiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidXNlcklkIiwicGFyc2VJbnQiLCJnZXQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwidGlja2V0cyIsInN1cHBvcnRUaWNrZXQiLCJmaW5kTWFueSIsIndoZXJlIiwiaW5jbHVkZSIsIm1lc3NhZ2VzIiwidXNlciIsInNlbGVjdCIsIm5hbWUiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiY29uc29sZSIsIlBPU1QiLCJzdWJqZWN0IiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInByaW9yaXR5IiwidGlja2V0IiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidHlwZSIsInRpdGxlIiwibWVzc2FnZSIsIm1ldGFkYXRhIiwidGlja2V0SWQiLCJpZCIsImFkbWlucyIsInJvbGUiLCJhZG1pbkVtYWlscyIsIm1hcCIsImFkbWluIiwiZmlsdGVyIiwiQm9vbGVhbiIsInVzZXJFbWFpbCIsImxlbmd0aCIsInNlbmRFbWFpbCIsImh0bWwiLCJyZXBsYWNlIiwidGV4dCIsImVtYWlsRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/support/tickets/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/email/emailService.ts":
/*!***********************************!*\
  !*** ./lib/email/emailService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmailService: () => (/* binding */ EmailService),\n/* harmony export */   emailService: () => (/* binding */ emailService)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n\nclass EmailService {\n    constructor(){\n        this.initialize();\n    }\n    initialize() {\n        // Проверяем наличие Gmail настроек\n        this.isDevelopment = !process.env.EMAIL_HOST || !process.env.EMAIL_USER || !process.env.EMAIL_PASS;\n        console.log(\"\\uD83D\\uDD27 EmailService инициализация:\");\n        console.log(`   EMAIL_HOST: ${process.env.EMAIL_HOST || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_USER: ${process.env.EMAIL_USER || \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   EMAIL_PASS: ${process.env.EMAIL_PASS ? \"УСТАНОВЛЕН\" : \"НЕ УСТАНОВЛЕН\"}`);\n        console.log(`   Режим: ${this.isDevelopment ? \"РАЗРАБОТКИ\" : \"ПРОДАКШЕН\"}`);\n        if (this.isDevelopment) {\n            // Для разработки используем мок-транспорт\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                streamTransport: true,\n                newline: \"unix\",\n                buffer: true\n            });\n        } else {\n            // Для продакшена используем реальный SMTP\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                host: \"smtp.gmail.com\",\n                port: 587,\n                secure: false,\n                auth: {\n                    user: process.env.EMAIL_USER || \"\",\n                    pass: process.env.EMAIL_PASS || \"\"\n                },\n                tls: {\n                    rejectUnauthorized: false\n                }\n            });\n        }\n    }\n    // Переинициализация после загрузки переменных окружения\n    reinitialize() {\n        this.initialize();\n    }\n    // Проверка подключения\n    async verifyConnection() {\n        try {\n            if (this.isDevelopment) {\n                console.log(\"✅ Email сервер готов к отправке (режим разработки)\");\n                return true;\n            }\n            // Проверяем Gmail SMTP подключение\n            await this.transporter.verify();\n            console.log(\"✅ Email сервер готов к отправке\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка подключения к email серверу:\", error);\n            return false;\n        }\n    }\n    // Отправка email\n    async sendEmail(to, template) {\n        try {\n            if (this.isDevelopment) {\n                // В режиме разработки логируем с деталями\n                console.log(\"\\uD83D\\uDCE7 [DEV] Email отправлен:\");\n                console.log(`   Кому: ${to}`);\n                console.log(`   Тема: ${template.subject}`);\n                console.log(`   HTML: ${template.html.substring(0, 100)}...`);\n                console.log(`   📝 В продакшене это письмо будет отправлено на: ${to}`);\n                return true;\n            }\n            // Используем Gmail SMTP для отправки\n            const mailOptions = {\n                from: process.env.EMAIL_USER,\n                to: to,\n                subject: template.subject,\n                html: template.html,\n                text: template.text\n            };\n            await this.transporter.sendMail(mailOptions);\n            console.log(\"\\uD83D\\uDCE7 Email отправлен через Gmail:\", to);\n            return true;\n        } catch (error) {\n            console.error(\"❌ Ошибка отправки email:\", error);\n            return false;\n        }\n    }\n    // Отправка уведомления о новом заказе (исполнителю)\n    async sendNewOrderNotification(executorEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(executorEmail, {\n                subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <h2 style=\"color: #333;\">Детали заказа:</h2>\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n                <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\n                <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\n                <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\n                <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\n                <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\n                <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(executorEmail, {\n            subject: \"\\uD83C\\uDFAF Новый заказ для вас!\",\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: white; margin: 0;\">🎯 Новый заказ!</h1>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <h2 style=\"color: #333;\">Детали заказа:</h2>\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n              <p><strong>Клиент:</strong> ${orderData.clientName || \"Не указано\"}</p>\n              <p><strong>Адрес:</strong> ${orderData.address || \"Не указано\"}</p>\n              <p><strong>Телефон:</strong> ${orderData.phone || \"Не указано\"}</p>\n              <p><strong>Дата:</strong> ${orderData.orderDate || \"Не указано\"}</p>\n              <p><strong>Время:</strong> ${orderData.orderTime || \"Не указано\"}</p>\n              <p><strong>Цена:</strong> ${orderData.totalPrice || 0} ₽</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Новый заказ! Услуга: ${orderData.serviceDescription}, Клиент: ${orderData.clientName}, Цена: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о выполнении заказа (клиенту)\n    async sendOrderCompletedNotification(clientEmail, orderData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(clientEmail, {\n                subject: \"✅ Ваш заказ выполнен!\",\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\n              <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n                <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n                <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\n                <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\n                <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n            });\n        }\n        return await this.sendEmail(clientEmail, {\n            subject: \"✅ Ваш заказ выполнен!\",\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: white; margin: 0;\">✅ Заказ выполнен!</h1>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <h2 style=\"color: #333;\">Ваш заказ успешно выполнен!</h2>\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 10px 0;\">\n              <p><strong>Услуга:</strong> ${orderData.serviceDescription || \"Не указано\"}</p>\n              <p><strong>Исполнитель:</strong> ${orderData.executorName || \"Не указано\"}</p>\n              <p><strong>Дата выполнения:</strong> ${new Date().toLocaleDateString(\"ru-RU\")}</p>\n              <p><strong>Сумма:</strong> ${orderData.totalPrice || 0} ₽</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Заказ выполнен! Услуга: ${orderData.serviceDescription}, Исполнитель: ${orderData.executorName}, Сумма: ${orderData.totalPrice} ₽`\n        });\n    }\n    // Отправка уведомления о повышении уровня\n    async sendLevelUpNotification(userEmail, levelData) {\n        if (this.isDevelopment) {\n            return await this.sendEmail(userEmail, {\n                subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\n              <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\n                <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\n                <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\n                <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\n              </div>\n            </div>\n          </div>\n        `,\n                text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n            });\n        }\n        return await this.sendEmail(userEmail, {\n            subject: `🎉 Поздравляем! Вы достигли уровня ${levelData.newLevel}!`,\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 20px; text-align: center;\">\n            <h1 style=\"color: #333; margin: 0;\">🎉 Поздравляем!</h1>\n            <h2 style=\"color: #333; margin: 10px 0 0 0;\">Вы достигли уровня ${levelData.newLevel}!</h2>\n          </div>\n          \n          <div style=\"padding: 20px; background: #f8f9fa;\">\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: center;\">\n              <div style=\"font-size: 48px; margin-bottom: 15px;\">${levelData.icon}</div>\n              <h3 style=\"color: #333; margin: 0;\">${levelData.title}</h3>\n              <p style=\"color: #666; margin: 10px 0;\">${levelData.description || \"Отличная работа!\"}</p>\n            </div>\n          </div>\n        </div>\n      `,\n            text: `Поздравляем! Вы достигли уровня ${levelData.newLevel} - ${levelData.title}!`\n        });\n    }\n    // Отправка новостной рассылки\n    async sendNewsletter(emails, newsletterData) {\n        if (this.isDevelopment) {\n            let success = 0;\n            let failed = 0;\n            for (const email of emails){\n                const result = await this.sendEmail(email, {\n                    subject: newsletterData.subject,\n                    html: `\n            <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n              <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n                <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\n              </div>\n              \n              <div style=\"padding: 20px; background: #f8f9fa;\">\n                <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\n                  ${newsletterData.content}\n                </div>\n              </div>\n            </div>\n          `,\n                    text: newsletterData.textContent || newsletterData.subject\n                });\n                if (result) {\n                    success++;\n                } else {\n                    failed++;\n                }\n            }\n            return {\n                success,\n                failed\n            };\n        }\n        let success = 0;\n        let failed = 0;\n        for (const email of emails){\n            const result = await this.sendEmail(email, {\n                subject: newsletterData.subject,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;\">\n              <h1 style=\"color: white; margin: 0;\">📢 ${newsletterData.subject}</h1>\n            </div>\n            \n            <div style=\"padding: 20px; background: #f8f9fa;\">\n              <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 10px 0;\">\n                ${newsletterData.content}\n              </div>\n            </div>\n          </div>\n        `,\n                text: newsletterData.textContent || newsletterData.subject\n            });\n            if (result) {\n                success++;\n            } else {\n                failed++;\n            }\n        }\n        return {\n            success,\n            failed\n        };\n    }\n}\nconst emailService = new EmailService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVcsSUFBSU4sZUFBZS9CLE9BQU87WUFDNUQ7WUFFQSxJQUFJbUMsUUFBUTtnQkFDVkg7WUFDRixPQUFPO2dCQUNMQztZQUNGO1FBQ0Y7UUFFQSxPQUFPO1lBQUVEO1lBQVNDO1FBQU87SUFDM0I7QUFDRjtBQUVPLE1BQU1LLGVBQWUsSUFBSXJFLGVBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kby1hZ2VuY3kvLi9saWIvZW1haWwvZW1haWxTZXJ2aWNlLnRzP2M1ZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcidcbmltcG9ydCB7IGZvcm1zcHJlZVNlcnZpY2UgfSBmcm9tICcuL2Zvcm1zcHJlZVNlcnZpY2UnXG5cbmludGVyZmFjZSBFbWFpbENvbmZpZyB7XG4gIGhvc3Q6IHN0cmluZ1xuICBwb3J0OiBudW1iZXJcbiAgc2VjdXJlOiBib29sZWFuXG4gIGF1dGg6IHtcbiAgICB1c2VyOiBzdHJpbmdcbiAgICBwYXNzOiBzdHJpbmdcbiAgfVxufVxuXG5pbnRlcmZhY2UgRW1haWxUZW1wbGF0ZSB7XG4gIHN1YmplY3Q6IHN0cmluZ1xuICBodG1sOiBzdHJpbmdcbiAgdGV4dD86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgRW1haWxTZXJ2aWNlIHtcbiAgcHJpdmF0ZSB0cmFuc3BvcnRlciE6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXJcbiAgcHJpdmF0ZSBpc0RldmVsb3BtZW50ITogYm9vbGVhblxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKSB7XG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1IEdtYWlsINC90LDRgdGC0YDQvtC10LpcbiAgICB0aGlzLmlzRGV2ZWxvcG1lbnQgPSAhcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAhcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAhcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SnIEVtYWlsU2VydmljZSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjzonKVxuICAgIGNvbnNvbGUubG9nKGAgICBFTUFJTF9IT1NUOiAke3Byb2Nlc3MuZW52LkVNQUlMX0hPU1QgfHwgJ9Cd0JUg0KPQodCi0JDQndCe0JLQm9CV0J0nfWApXG4gICAgY29uc29sZS5sb2coYCAgIEVNQUlMX1VTRVI6ICR7cHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAn0J3QlSDQo9Ch0KLQkNCd0J7QktCb0JXQnSd9YClcbiAgICBjb25zb2xlLmxvZyhgICAgRU1BSUxfUEFTUzogJHtwcm9jZXNzLmVudi5FTUFJTF9QQVNTID8gJ9Cj0KHQotCQ0J3QntCS0JvQldCdJyA6ICfQndCVINCj0KHQotCQ0J3QntCS0JvQldCdJ31gKVxuICAgIGNvbnNvbGUubG9nKGAgICDQoNC10LbQuNC8OiAke3RoaXMuaXNEZXZlbG9wbWVudCA/ICfQoNCQ0JfQoNCQ0JHQntCi0JrQmCcgOiAn0J/QoNCe0JTQkNCa0KjQldCdJ31gKVxuICAgIFxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIC8vINCU0LvRjyDRgNCw0LfRgNCw0LHQvtGC0LrQuCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0Lot0YLRgNCw0L3RgdC/0L7RgNGCXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBzdHJlYW1UcmFuc3BvcnQ6IHRydWUsXG4gICAgICAgIG5ld2xpbmU6ICd1bml4JyxcbiAgICAgICAgYnVmZmVyOiB0cnVlXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDQlNC70Y8g0L/RgNC+0LTQsNC60YjQtdC90LAg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YDQtdCw0LvRjNC90YvQuSBTTVRQXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBob3N0OiAnc210cC5nbWFpbC5jb20nLFxuICAgICAgICBwb3J0OiA1ODcsXG4gICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICcnLFxuICAgICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgdGxzOiB7XG4gICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0LXRgNC10LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INC/0LXRgNC10LzQtdC90L3Ri9GFINC+0LrRgNGD0LbQtdC90LjRj1xuICByZWluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAg0L/QvtC00LrQu9GO0YfQtdC90LjRj1xuICBhc3luYyB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgRW1haWwg0YHQtdGA0LLQtdGAINCz0L7RgtC+0LIg0Log0L7RgtC/0YDQsNCy0LrQtSAo0YDQtdC20LjQvCDRgNCw0LfRgNCw0LHQvtGC0LrQuCknKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwgR21haWwgU01UUCDQv9C+0LTQutC70Y7Rh9C10L3QuNC1XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMudHJhbnNwb3J0ZXIudmVyaWZ5KClcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRW1haWwg0YHQtdGA0LLQtdGAINCz0L7RgtC+0LIg0Log0L7RgtC/0YDQsNCy0LrQtScpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg0J7RiNC40LHQutCwINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LogZW1haWwg0YHQtdGA0LLQtdGA0YM6JywgZXJyb3IpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwIGVtYWlsXG4gIGFzeW5jIHNlbmRFbWFpbCh0bzogc3RyaW5nLCB0ZW1wbGF0ZTogRW1haWxUZW1wbGF0ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIC8vINCSINGA0LXQttC40LzQtSDRgNCw0LfRgNCw0LHQvtGC0LrQuCDQu9C+0LPQuNGA0YPQtdC8INGBINC00LXRgtCw0LvRj9C80LhcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6cgW0RFVl0gRW1haWwg0L7RgtC/0YDQsNCy0LvQtdC9OicpXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDQmtC+0LzRgzogJHt0b31gKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAg0KLQtdC80LA6ICR7dGVtcGxhdGUuc3ViamVjdH1gKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAgSFRNTDogJHt0ZW1wbGF0ZS5odG1sLnN1YnN0cmluZygwLCAxMDApfS4uLmApXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDwn5OdINCSINC/0YDQvtC00LDQutGI0LXQvdC1INGN0YLQviDQv9C40YHRjNC80L4g0LHRg9C00LXRgiDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwOiAke3RvfWApXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IEdtYWlsIFNNVFAg0LTQu9GPINC+0YLQv9GA0LDQstC60LhcbiAgICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxuICAgICAgICB0bzogdG8sXG4gICAgICAgIHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG4gICAgICAgIGh0bWw6IHRlbXBsYXRlLmh0bWwsXG4gICAgICAgIHRleHQ6IHRlbXBsYXRlLnRleHRcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy50cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucylcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OnIEVtYWlsINC+0YLQv9GA0LDQstC70LXQvSDRh9C10YDQtdC3IEdtYWlsOicsIHRvKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MINCe0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4IGVtYWlsOicsIGVycm9yKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8g0J7RgtC/0YDQsNCy0LrQsCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC90L7QstC+0Lwg0LfQsNC60LDQt9C1ICjQuNGB0L/QvtC70L3QuNGC0LXQu9GOKVxuICBhc3luYyBzZW5kTmV3T3JkZXJOb3RpZmljYXRpb24oZXhlY3V0b3JFbWFpbDogc3RyaW5nLCBvcmRlckRhdGE6IGFueSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbChleGVjdXRvckVtYWlsLCB7XG4gICAgICAgIHN1YmplY3Q6ICfwn46vINCd0L7QstGL0Lkg0LfQsNC60LDQtyDQtNC70Y8g0LLQsNGBIScsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ITwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMzMzO1wiPtCU0LXRgtCw0LvQuCDQt9Cw0LrQsNC30LA6PC9oMj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCa0LvQuNC10L3Rgjo8L3N0cm9uZz4gJHtvcmRlckRhdGEuY2xpZW50TmFtZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JDQtNGA0LXRgTo8L3N0cm9uZz4gJHtvcmRlckRhdGEuYWRkcmVzcyB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KLQtdC70LXRhNC+0L06PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnBob25lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEub3JkZXJEYXRlIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QktGA0LXQvNGPOjwvc3Ryb25nPiAke29yZGVyRGF0YS5vcmRlclRpbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtCm0LXQvdCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCd0L7QstGL0Lkg0LfQsNC60LDQtyEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmtC70LjQtdC90YI6ICR7b3JkZXJEYXRhLmNsaWVudE5hbWV9LCDQptC10L3QsDogJHtvcmRlckRhdGEudG90YWxQcmljZX0g4oK9YFxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwoZXhlY3V0b3JFbWFpbCwge1xuICAgICAgc3ViamVjdDogJ/Cfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3INC00LvRjyDQstCw0YEhJyxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPvCfjq8g0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ITwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QlNC10YLQsNC70Lgg0LfQsNC60LDQt9CwOjwvaDI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QmtC70LjQtdC90YI6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLmNsaWVudE5hbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QkNC00YDQtdGBOjwvc3Ryb25nPiAke29yZGVyRGF0YS5hZGRyZXNzIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KLQtdC70LXRhNC+0L06PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnBob25lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JTQsNGC0LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLm9yZGVyRGF0ZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCS0YDQtdC80Y86PC9zdHJvbmc+ICR7b3JkZXJEYXRhLm9yZGVyVGltZSB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPtCm0LXQvdCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAsXG4gICAgICB0ZXh0OiBg0J3QvtCy0YvQuSDQt9Cw0LrQsNC3ISDQo9GB0LvRg9Cz0LA6ICR7b3JkZXJEYXRhLnNlcnZpY2VEZXNjcmlwdGlvbn0sINCa0LvQuNC10L3RgjogJHtvcmRlckRhdGEuY2xpZW50TmFtZX0sINCm0LXQvdCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgfSlcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQstGL0L/QvtC70L3QtdC90LjQuCDQt9Cw0LrQsNC30LAgKNC60LvQuNC10L3RgtGDKVxuICBhc3luYyBzZW5kT3JkZXJDb21wbGV0ZWROb3RpZmljYXRpb24oY2xpZW50RW1haWw6IHN0cmluZywgb3JkZXJEYXRhOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kRW1haWwoY2xpZW50RW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogJ+KchSDQktCw0Ygg0LfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9IScsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwO1wiPuKchSDQl9Cw0LrQsNC3INCy0YvQv9C+0LvQvdC10L0hPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7XCI+0JLQsNGIINC30LDQutCw0Lcg0YPRgdC/0LXRiNC90L4g0LLRi9C/0L7Qu9C90LXQvSE8L2gyPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7Qo9GB0LvRg9Cz0LA6PC9zdHJvbmc+ICR7b3JkZXJEYXRhLnNlcnZpY2VEZXNjcmlwdGlvbiB8fCAn0J3QtSDRg9C60LDQt9Cw0L3Qvid9PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+0JjRgdC/0L7Qu9C90LjRgtC10LvRjDo8L3N0cm9uZz4gJHtvcmRlckRhdGEuZXhlY3V0b3JOYW1lIHx8ICfQndC1INGD0LrQsNC30LDQvdC+J308L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsCDQstGL0L/QvtC70L3QtdC90LjRjzo8L3N0cm9uZz4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygncnUtUlUnKX08L3A+XG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QodGD0LzQvNCwOjwvc3Ryb25nPiAke29yZGVyRGF0YS50b3RhbFByaWNlIHx8IDB9IOKCvTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmNGB0L/QvtC70L3QuNGC0LXQu9GMOiAke29yZGVyRGF0YS5leGVjdXRvck5hbWV9LCDQodGD0LzQvNCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbChjbGllbnRFbWFpbCwge1xuICAgICAgc3ViamVjdDogJ+KchSDQktCw0Ygg0LfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9IScsXG4gICAgICBodG1sOiBgXG4gICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJjb2xvcjogd2hpdGU7IG1hcmdpbjogMDtcIj7inIUg0JfQsNC60LDQtyDQstGL0L/QvtC70L3QtdC9ITwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMztcIj7QktCw0Ygg0LfQsNC60LDQtyDRg9GB0L/QtdGI0L3QviDQstGL0L/QvtC70L3QtdC9ITwvaDI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KPRgdC70YPQs9CwOjwvc3Ryb25nPiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb24gfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QmNGB0L/QvtC70L3QuNGC0LXQu9GMOjwvc3Ryb25nPiAke29yZGVyRGF0YS5leGVjdXRvck5hbWUgfHwgJ9Cd0LUg0YPQutCw0LfQsNC90L4nfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz7QlNCw0YLQsCDQstGL0L/QvtC70L3QtdC90LjRjzo8L3N0cm9uZz4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygncnUtUlUnKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+0KHRg9C80LzQsDo8L3N0cm9uZz4gJHtvcmRlckRhdGEudG90YWxQcmljZSB8fCAwfSDigr08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgLFxuICAgICAgdGV4dDogYNCX0LDQutCw0Lcg0LLRi9C/0L7Qu9C90LXQvSEg0KPRgdC70YPQs9CwOiAke29yZGVyRGF0YS5zZXJ2aWNlRGVzY3JpcHRpb259LCDQmNGB0L/QvtC70L3QuNGC0LXQu9GMOiAke29yZGVyRGF0YS5leGVjdXRvck5hbWV9LCDQodGD0LzQvNCwOiAke29yZGVyRGF0YS50b3RhbFByaWNlfSDigr1gXG4gICAgfSlcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0YPQstC10LTQvtC80LvQtdC90LjRjyDQviDQv9C+0LLRi9GI0LXQvdC40Lgg0YPRgNC+0LLQvdGPXG4gIGFzeW5jIHNlbmRMZXZlbFVwTm90aWZpY2F0aW9uKHVzZXJFbWFpbDogc3RyaW5nLCBsZXZlbERhdGE6IGFueSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRFbWFpbCh1c2VyRW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogYPCfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0hYCxcbiAgICAgICAgaHRtbDogYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ3MDAgMCUsICNmZmVkNGUgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMDtcIj7wn46JINCf0L7Qt9C00YDQsNCy0LvRj9C10LwhPC9oMT5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMTBweCAwIDAgMDtcIj7QktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bGV2ZWxEYXRhLm5ld0xldmVsfSE8L2gyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhO1wiPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiA0OHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4O1wiPiR7bGV2ZWxEYXRhLmljb259PC9kaXY+XG4gICAgICAgICAgICAgICAgPGgzIHN0eWxlPVwiY29sb3I6ICMzMzM7IG1hcmdpbjogMDtcIj4ke2xldmVsRGF0YS50aXRsZX08L2gzPlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM2NjY7IG1hcmdpbjogMTBweCAwO1wiPiR7bGV2ZWxEYXRhLmRlc2NyaXB0aW9uIHx8ICfQntGC0LvQuNGH0L3QsNGPINGA0LDQsdC+0YLQsCEnfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogYNCf0L7Qt9C00YDQsNCy0LvRj9C10LwhINCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9IC0gJHtsZXZlbERhdGEudGl0bGV9IWBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZEVtYWlsKHVzZXJFbWFpbCwge1xuICAgICAgc3ViamVjdDogYPCfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0hYCxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ3MDAgMCUsICNmZmVkNGUgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiAjMzMzOyBtYXJnaW46IDA7XCI+8J+OiSDQn9C+0LfQtNGA0LDQstC70Y/QtdC8ITwvaDE+XG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzMzMzsgbWFyZ2luOiAxMHB4IDAgMCAwO1wiPtCS0Ysg0LTQvtGB0YLQuNCz0LvQuCDRg9GA0L7QstC90Y8gJHtsZXZlbERhdGEubmV3TGV2ZWx9ITwvaDI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7XCI+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogNDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDtcIj4ke2xldmVsRGF0YS5pY29ufTwvZGl2PlxuICAgICAgICAgICAgICA8aDMgc3R5bGU9XCJjb2xvcjogIzMzMzsgbWFyZ2luOiAwO1wiPiR7bGV2ZWxEYXRhLnRpdGxlfTwvaDM+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM2NjY7IG1hcmdpbjogMTBweCAwO1wiPiR7bGV2ZWxEYXRhLmRlc2NyaXB0aW9uIHx8ICfQntGC0LvQuNGH0L3QsNGPINGA0LDQsdC+0YLQsCEnfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAsXG4gICAgICB0ZXh0OiBg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCEg0JLRiyDQtNC+0YHRgtC40LPQu9C4INGD0YDQvtCy0L3RjyAke2xldmVsRGF0YS5uZXdMZXZlbH0gLSAke2xldmVsRGF0YS50aXRsZX0hYFxuICAgIH0pXG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwINC90L7QstC+0YHRgtC90L7QuSDRgNCw0YHRgdGL0LvQutC4XG4gIGFzeW5jIHNlbmROZXdzbGV0dGVyKGVtYWlsczogc3RyaW5nW10sIG5ld3NsZXR0ZXJEYXRhOiBhbnkpOiBQcm9taXNlPHsgc3VjY2VzczogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9PiB7XG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgbGV0IHN1Y2Nlc3MgPSAwXG4gICAgICBsZXQgZmFpbGVkID0gMFxuXG4gICAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRFbWFpbChlbWFpbCwge1xuICAgICAgICAgIHN1YmplY3Q6IG5ld3NsZXR0ZXJEYXRhLnN1YmplY3QsXG4gICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+8J+ToiAke25ld3NsZXR0ZXJEYXRhLnN1YmplY3R9PC9oMT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICAgICAgICAgICAgICAke25ld3NsZXR0ZXJEYXRhLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCxcbiAgICAgICAgICB0ZXh0OiBuZXdzbGV0dGVyRGF0YS50ZXh0Q29udGVudCB8fCBuZXdzbGV0dGVyRGF0YS5zdWJqZWN0XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgc3VjY2VzcysrXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmFpbGVkKytcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzLCBmYWlsZWQgfVxuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMFxuICAgIGxldCBmYWlsZWQgPSAwXG5cbiAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZW5kRW1haWwoZW1haWwsIHtcbiAgICAgICAgc3ViamVjdDogbmV3c2xldHRlckRhdGEuc3ViamVjdCxcbiAgICAgICAgaHRtbDogYFxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6IHdoaXRlOyBtYXJnaW46IDA7XCI+8J+ToiAke25ld3NsZXR0ZXJEYXRhLnN1YmplY3R9PC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTtcIj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTBweCAwO1wiPlxuICAgICAgICAgICAgICAgICR7bmV3c2xldHRlckRhdGEuY29udGVudH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgICAgdGV4dDogbmV3c2xldHRlckRhdGEudGV4dENvbnRlbnQgfHwgbmV3c2xldHRlckRhdGEuc3ViamVjdFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBzdWNjZXNzKytcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhaWxlZCsrXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZW1haWxTZXJ2aWNlID0gbmV3IEVtYWlsU2VydmljZSgpXG4iXSwibmFtZXMiOlsibm9kZW1haWxlciIsIkVtYWlsU2VydmljZSIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbGl6ZSIsImlzRGV2ZWxvcG1lbnQiLCJwcm9jZXNzIiwiZW52IiwiRU1BSUxfSE9TVCIsIkVNQUlMX1VTRVIiLCJFTUFJTF9QQVNTIiwiY29uc29sZSIsImxvZyIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic3RyZWFtVHJhbnNwb3J0IiwibmV3bGluZSIsImJ1ZmZlciIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwidGxzIiwicmVqZWN0VW5hdXRob3JpemVkIiwicmVpbml0aWFsaXplIiwidmVyaWZ5Q29ubmVjdGlvbiIsInZlcmlmeSIsImVycm9yIiwic2VuZEVtYWlsIiwidG8iLCJ0ZW1wbGF0ZSIsInN1YmplY3QiLCJodG1sIiwic3Vic3RyaW5nIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidGV4dCIsInNlbmRNYWlsIiwic2VuZE5ld09yZGVyTm90aWZpY2F0aW9uIiwiZXhlY3V0b3JFbWFpbCIsIm9yZGVyRGF0YSIsInNlcnZpY2VEZXNjcmlwdGlvbiIsImNsaWVudE5hbWUiLCJhZGRyZXNzIiwicGhvbmUiLCJvcmRlckRhdGUiLCJvcmRlclRpbWUiLCJ0b3RhbFByaWNlIiwic2VuZE9yZGVyQ29tcGxldGVkTm90aWZpY2F0aW9uIiwiY2xpZW50RW1haWwiLCJleGVjdXRvck5hbWUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwic2VuZExldmVsVXBOb3RpZmljYXRpb24iLCJ1c2VyRW1haWwiLCJsZXZlbERhdGEiLCJuZXdMZXZlbCIsImljb24iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2VuZE5ld3NsZXR0ZXIiLCJlbWFpbHMiLCJuZXdzbGV0dGVyRGF0YSIsInN1Y2Nlc3MiLCJmYWlsZWQiLCJlbWFpbCIsInJlc3VsdCIsImNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImVtYWlsU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/email/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/notificationService.ts":
/*!*************************************************!*\
  !*** ./lib/gamification/notificationService.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationService: () => (/* binding */ NotificationService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _email_emailService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../email/emailService */ \"(rsc)/./lib/email/emailService.ts\");\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nclass NotificationService {\n    // Создание уведомления\n    async createNotification(data) {\n        try {\n            await prisma.notification.create({\n                data: {\n                    userId: data.userId,\n                    title: data.title,\n                    message: data.message,\n                    type: data.type,\n                    // metadata: data.metadata || {},\n                    isRead: false\n                }\n            });\n            // Отправляем email уведомление\n            await this.sendEmailNotification(data);\n        } catch (error) {\n            console.error(\"Error creating notification:\", error);\n        }\n    }\n    // Отправка email уведомления\n    async sendEmailNotification(data) {\n        try {\n            // Получаем email пользователя\n            const user = await prisma.user.findUnique({\n                where: {\n                    id: data.userId\n                },\n                select: {\n                    email: true\n                }\n            });\n            if (!user?.email) return;\n            // Отправляем email в зависимости от типа уведомления\n            switch(data.type){\n                case \"level_up\":\n                    if (data.metadata?.levelConfig) {\n                        await _email_emailService__WEBPACK_IMPORTED_MODULE_1__.emailService.sendLevelUpNotification(user.email, data.metadata.levelConfig);\n                    }\n                    break;\n            }\n        } catch (error) {\n            console.error(\"Error sending email notification:\", error);\n        }\n    }\n    // Создание уведомления о повышении уровня\n    async notifyLevelUp(userId, oldLevel, newLevel, levelConfig) {\n        await this.createNotification({\n            userId,\n            type: \"level_up\",\n            title: \"\\uD83C\\uDF89 Поздравляем с повышением уровня!\",\n            message: `Вы достигли уровня ${newLevel} - ${levelConfig.title}! ${levelConfig.icon}`,\n            icon: levelConfig.icon,\n            metadata: {\n                oldLevel,\n                newLevel,\n                levelConfig\n            }\n        });\n    }\n    // Создание уведомления о получении достижения\n    async notifyAchievement(userId, achievement) {\n        await this.createNotification({\n            userId,\n            type: \"achievement\",\n            title: \"\\uD83C\\uDFC6 Новое достижение!\",\n            message: `Вы получили достижение \"${achievement.title}\"! ${achievement.icon}`,\n            icon: achievement.icon,\n            xpAmount: achievement.xpReward,\n            metadata: {\n                achievementId: achievement.id,\n                achievement\n            }\n        });\n    }\n    // Создание уведомления о получении XP\n    async notifyXpGain(userId, xpAmount, source, description) {\n        await this.createNotification({\n            userId,\n            type: \"xp_gain\",\n            title: \"⚡ Получен XP!\",\n            message: `+${xpAmount} XP за ${description}`,\n            xpAmount,\n            metadata: {\n                source,\n                description\n            }\n        });\n    }\n    // Создание уведомления о реферале\n    async notifyReferral(userId, referralType, data) {\n        if (referralType === \"new_referral\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83D\\uDC65 Новый реферал!\",\n                message: `Ваш друг ${data.referredName} зарегистрировался по вашей ссылке!`,\n                icon: \"\\uD83C\\uDF81\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (referralType === \"referral_activity\") {\n            await this.createNotification({\n                userId,\n                type: \"referral\",\n                title: \"\\uD83C\\uDFAF Реферал активен!\",\n                message: `Ваш реферал ${data.referredName} ${data.activity}!`,\n                icon: \"⭐\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Создание уведомления о подписке\n    async notifySubscription(userId, subscriptionType, data) {\n        if (subscriptionType === \"new\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDCB3 Подписка активирована!\",\n                message: `Ваша подписка \"${data.planName}\" успешно активирована!`,\n                icon: \"\\uD83D\\uDC51\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        } else if (subscriptionType === \"renewal\") {\n            await this.createNotification({\n                userId,\n                type: \"subscription\",\n                title: \"\\uD83D\\uDD04 Подписка продлена!\",\n                message: `Ваша подписка \"${data.planName}\" продлена на ${data.period}!`,\n                icon: \"\\uD83D\\uDC8E\",\n                xpAmount: data.xpReward,\n                metadata: data\n            });\n        }\n    }\n    // Получение уведомлений пользователя\n    async getUserNotifications(userId, limit = 20) {\n        try {\n            const notifications = await prisma.notification.findMany({\n                where: {\n                    userId\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                take: limit\n            });\n            return notifications;\n        } catch (error) {\n            console.error(\"Error fetching notifications:\", error);\n            return [];\n        }\n    }\n    // Отметить уведомление как прочитанное\n    async markAsRead(notificationId) {\n        try {\n            await prisma.notification.update({\n                where: {\n                    id: notificationId\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking notification as read:\", error);\n        }\n    }\n    // Отметить все уведомления как прочитанные\n    async markAllAsRead(userId) {\n        try {\n            await prisma.notification.updateMany({\n                where: {\n                    userId,\n                    isRead: false\n                },\n                data: {\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error marking all notifications as read:\", error);\n        }\n    }\n    // Получение количества непрочитанных уведомлений\n    async getUnreadCount(userId) {\n        try {\n            const count = await prisma.notification.count({\n                where: {\n                    userId,\n                    isRead: false\n                }\n            });\n            return count;\n        } catch (error) {\n            console.error(\"Error getting unread count:\", error);\n            return 0;\n        }\n    }\n    // Удаление старых уведомлений (старше 30 дней)\n    async cleanupOldNotifications() {\n        try {\n            const thirtyDaysAgo = new Date();\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n            await prisma.notification.deleteMany({\n                where: {\n                    createdAt: {\n                        lt: thirtyDaysAgo\n                    },\n                    isRead: true\n                }\n            });\n        } catch (error) {\n            console.error(\"Error cleaning up old notifications:\", error);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2FtaWZpY2F0aW9uL25vdGlmaWNhdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNPO0FBRXBELE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBWXhCLE1BQU1HO0lBQ1gsdUJBQXVCO0lBQ3ZCLE1BQU1DLG1CQUFtQkMsSUFBc0IsRUFBaUI7UUFDOUQsSUFBSTtZQUNGLE1BQU1ILE9BQU9JLFlBQVksQ0FBQ0MsTUFBTSxDQUFDO2dCQUMvQkYsTUFBTTtvQkFDSkcsUUFBUUgsS0FBS0csTUFBTTtvQkFDbkJDLE9BQU9KLEtBQUtJLEtBQUs7b0JBQ2pCQyxTQUFTTCxLQUFLSyxPQUFPO29CQUNyQkMsTUFBTU4sS0FBS00sSUFBSTtvQkFDZixpQ0FBaUM7b0JBQ2pDQyxRQUFRO2dCQUNWO1lBQ0Y7WUFFQSwrQkFBK0I7WUFDL0IsTUFBTSxJQUFJLENBQUNDLHFCQUFxQixDQUFDUjtRQUNuQyxFQUFFLE9BQU9TLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDaEQ7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QixNQUFjRCxzQkFBc0JSLElBQXNCLEVBQWlCO1FBQ3pFLElBQUk7WUFDRiw4QkFBOEI7WUFDOUIsTUFBTVcsT0FBTyxNQUFNZCxPQUFPYyxJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeENDLE9BQU87b0JBQUVDLElBQUlkLEtBQUtHLE1BQU07Z0JBQUM7Z0JBQ3pCWSxRQUFRO29CQUFFQyxPQUFPO2dCQUFLO1lBQ3hCO1lBRUEsSUFBSSxDQUFDTCxNQUFNSyxPQUFPO1lBRWxCLHFEQUFxRDtZQUNyRCxPQUFRaEIsS0FBS00sSUFBSTtnQkFDZixLQUFLO29CQUNILElBQUlOLEtBQUtpQixRQUFRLEVBQUVDLGFBQWE7d0JBQzlCLE1BQU10Qiw2REFBWUEsQ0FBQ3VCLHVCQUF1QixDQUFDUixLQUFLSyxLQUFLLEVBQUVoQixLQUFLaUIsUUFBUSxDQUFDQyxXQUFXO29CQUNsRjtvQkFDQTtZQUVK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QVFELEtBQUssQ0FBQyw0Q0FBNENBO1FBQzVEO0lBQ0Y7SUFFQSxpREFBaUQ7SUFDakQsTUFBTTJDLGVBQWVqRCxNQUFjLEVBQW1CO1FBQ3BELElBQUk7WUFDRixNQUFNa0QsUUFBUSxNQUFNeEQsT0FBT0ksWUFBWSxDQUFDb0QsS0FBSyxDQUFDO2dCQUM1Q3hDLE9BQU87b0JBQUVWO29CQUFRSSxRQUFRO2dCQUFNO1lBQ2pDO1lBQ0EsT0FBTzhDO1FBQ1QsRUFBRSxPQUFPNUMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtZQUM3QyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLCtDQUErQztJQUMvQyxNQUFNNkMsMEJBQXlDO1FBQzdDLElBQUk7WUFDRixNQUFNQyxnQkFBZ0IsSUFBSUM7WUFDMUJELGNBQWNFLE9BQU8sQ0FBQ0YsY0FBY0csT0FBTyxLQUFLO1lBRWhELE1BQU03RCxPQUFPSSxZQUFZLENBQUMwRCxVQUFVLENBQUM7Z0JBQ25DOUMsT0FBTztvQkFDTGdDLFdBQVc7d0JBQ1RlLElBQUlMO29CQUNOO29CQUNBaEQsUUFBUTtnQkFDVjtZQUNGO1FBQ0YsRUFBRSxPQUFPRSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3Q0FBd0NBO1FBQ3hEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2RvLWFnZW5jeS8uL2xpYi9nYW1pZmljYXRpb24vbm90aWZpY2F0aW9uU2VydmljZS50cz81M2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgZW1haWxTZXJ2aWNlIH0gZnJvbSAnLi4vZW1haWwvZW1haWxTZXJ2aWNlJ1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb25EYXRhIHtcbiAgdXNlcklkOiBudW1iZXJcbiAgdHlwZTogJ2xldmVsX3VwJyB8ICdhY2hpZXZlbWVudCcgfCAneHBfZ2FpbicgfCAncmVmZXJyYWwnIHwgJ3N1YnNjcmlwdGlvbicgfCAnc3VwcG9ydF90aWNrZXRfY3JlYXRlZCcgfCAnc3VwcG9ydF90aWNrZXRfYWRtaW4nIHwgJ3N1cHBvcnRfdGlja2V0X3JlcGx5J1xuICB0aXRsZTogc3RyaW5nXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBpY29uPzogc3RyaW5nXG4gIHhwQW1vdW50PzogbnVtYmVyXG4gIG1ldGFkYXRhPzogYW55XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPXG4gIGFzeW5jIGNyZWF0ZU5vdGlmaWNhdGlvbihkYXRhOiBOb3RpZmljYXRpb25EYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLFxuICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSxcbiAgICAgICAgICAvLyBtZXRhZGF0YTogZGF0YS5tZXRhZGF0YSB8fCB7fSxcbiAgICAgICAgICBpc1JlYWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8IGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40LVcbiAgICAgIGF3YWl0IHRoaXMuc2VuZEVtYWlsTm90aWZpY2F0aW9uKGRhdGEpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyDQntGC0L/RgNCw0LLQutCwIGVtYWlsINGD0LLQtdC00L7QvNC70LXQvdC40Y9cbiAgcHJpdmF0ZSBhc3luYyBzZW5kRW1haWxOb3RpZmljYXRpb24oZGF0YTogTm90aWZpY2F0aW9uRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8IGVtYWlsINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGF0YS51c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGVtYWlsOiB0cnVlIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmICghdXNlcj8uZW1haWwpIHJldHVyblxuXG4gICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCBlbWFpbCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YLQuNC/0LAg0YPQstC10LTQvtC80LvQtdC90LjRj1xuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbGV2ZWxfdXAnOlxuICAgICAgICAgIGlmIChkYXRhLm1ldGFkYXRhPy5sZXZlbENvbmZpZykge1xuICAgICAgICAgICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRMZXZlbFVwTm90aWZpY2F0aW9uKHVzZXIuZW1haWwsIGRhdGEubWV0YWRhdGEubGV2ZWxDb25maWcpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIC8vINCU0L7QsdCw0LLQuNC8INC00YDRg9Cz0LjQtSDRgtC40L/RiyDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5INC/0L4g0LzQtdGA0LUg0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0LhcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbCBub3RpZmljYXRpb246JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7QstGL0YjQtdC90LjQuCDRg9GA0L7QstC90Y9cbiAgYXN5bmMgbm90aWZ5TGV2ZWxVcCh1c2VySWQ6IG51bWJlciwgb2xkTGV2ZWw6IG51bWJlciwgbmV3TGV2ZWw6IG51bWJlciwgbGV2ZWxDb25maWc6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHR5cGU6ICdsZXZlbF91cCcsXG4gICAgICB0aXRsZTogJ/Cfjokg0J/QvtC30LTRgNCw0LLQu9GP0LXQvCDRgSDQv9C+0LLRi9GI0LXQvdC40LXQvCDRg9GA0L7QstC90Y8hJyxcbiAgICAgIG1lc3NhZ2U6IGDQktGLINC00L7RgdGC0LjQs9C70Lgg0YPRgNC+0LLQvdGPICR7bmV3TGV2ZWx9IC0gJHtsZXZlbENvbmZpZy50aXRsZX0hICR7bGV2ZWxDb25maWcuaWNvbn1gLFxuICAgICAgaWNvbjogbGV2ZWxDb25maWcuaWNvbixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG9sZExldmVsLFxuICAgICAgICBuZXdMZXZlbCxcbiAgICAgICAgbGV2ZWxDb25maWdcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7Qu9GD0YfQtdC90LjQuCDQtNC+0YHRgtC40LbQtdC90LjRj1xuICBhc3luYyBub3RpZnlBY2hpZXZlbWVudCh1c2VySWQ6IG51bWJlciwgYWNoaWV2ZW1lbnQ6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHR5cGU6ICdhY2hpZXZlbWVudCcsXG4gICAgICB0aXRsZTogJ/Cfj4Yg0J3QvtCy0L7QtSDQtNC+0YHRgtC40LbQtdC90LjQtSEnLFxuICAgICAgbWVzc2FnZTogYNCS0Ysg0L/QvtC70YPRh9C40LvQuCDQtNC+0YHRgtC40LbQtdC90LjQtSBcIiR7YWNoaWV2ZW1lbnQudGl0bGV9XCIhICR7YWNoaWV2ZW1lbnQuaWNvbn1gLFxuICAgICAgaWNvbjogYWNoaWV2ZW1lbnQuaWNvbixcbiAgICAgIHhwQW1vdW50OiBhY2hpZXZlbWVudC54cFJld2FyZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGFjaGlldmVtZW50SWQ6IGFjaGlldmVtZW50LmlkLFxuICAgICAgICBhY2hpZXZlbWVudFxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0L/QvtC70YPRh9C10L3QuNC4IFhQXG4gIGFzeW5jIG5vdGlmeVhwR2Fpbih1c2VySWQ6IG51bWJlciwgeHBBbW91bnQ6IG51bWJlciwgc291cmNlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICB1c2VySWQsXG4gICAgICB0eXBlOiAneHBfZ2FpbicsXG4gICAgICB0aXRsZTogJ+KaoSDQn9C+0LvRg9GH0LXQvSBYUCEnLFxuICAgICAgbWVzc2FnZTogYCske3hwQW1vdW50fSBYUCDQt9CwICR7ZGVzY3JpcHRpb259YCxcbiAgICAgIHhwQW1vdW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgc291cmNlLFxuICAgICAgICBkZXNjcmlwdGlvblxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyDQodC+0LfQtNCw0L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0L4g0YDQtdGE0LXRgNCw0LvQtVxuICBhc3luYyBub3RpZnlSZWZlcnJhbCh1c2VySWQ6IG51bWJlciwgcmVmZXJyYWxUeXBlOiAnbmV3X3JlZmVycmFsJyB8ICdyZWZlcnJhbF9hY3Rpdml0eScsIGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChyZWZlcnJhbFR5cGUgPT09ICduZXdfcmVmZXJyYWwnKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdHlwZTogJ3JlZmVycmFsJyxcbiAgICAgICAgdGl0bGU6ICfwn5GlINCd0L7QstGL0Lkg0YDQtdGE0LXRgNCw0LshJyxcbiAgICAgICAgbWVzc2FnZTogYNCS0LDRiCDQtNGA0YPQsyAke2RhdGEucmVmZXJyZWROYW1lfSDQt9Cw0YDQtdCz0LjRgdGC0YDQuNGA0L7QstCw0LvRgdGPINC/0L4g0LLQsNGI0LXQuSDRgdGB0YvQu9C60LUhYCxcbiAgICAgICAgaWNvbjogJ/CfjoEnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChyZWZlcnJhbFR5cGUgPT09ICdyZWZlcnJhbF9hY3Rpdml0eScpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0eXBlOiAncmVmZXJyYWwnLFxuICAgICAgICB0aXRsZTogJ/Cfjq8g0KDQtdGE0LXRgNCw0Lsg0LDQutGC0LjQstC10L0hJyxcbiAgICAgICAgbWVzc2FnZTogYNCS0LDRiCDRgNC10YTQtdGA0LDQuyAke2RhdGEucmVmZXJyZWROYW1lfSAke2RhdGEuYWN0aXZpdHl9IWAsXG4gICAgICAgIGljb246ICfirZAnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC+INC/0L7QtNC/0LjRgdC60LVcbiAgYXN5bmMgbm90aWZ5U3Vic2NyaXB0aW9uKHVzZXJJZDogbnVtYmVyLCBzdWJzY3JpcHRpb25UeXBlOiAnbmV3JyB8ICdyZW5ld2FsJywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHN1YnNjcmlwdGlvblR5cGUgPT09ICduZXcnKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdHlwZTogJ3N1YnNjcmlwdGlvbicsXG4gICAgICAgIHRpdGxlOiAn8J+SsyDQn9C+0LTQv9C40YHQutCwINCw0LrRgtC40LLQuNGA0L7QstCw0L3QsCEnLFxuICAgICAgICBtZXNzYWdlOiBg0JLQsNGI0LAg0L/QvtC00L/QuNGB0LrQsCBcIiR7ZGF0YS5wbGFuTmFtZX1cIiDRg9GB0L/QtdGI0L3QviDQsNC60YLQuNCy0LjRgNC+0LLQsNC90LAhYCxcbiAgICAgICAgaWNvbjogJ/CfkZEnLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChzdWJzY3JpcHRpb25UeXBlID09PSAncmVuZXdhbCcpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0eXBlOiAnc3Vic2NyaXB0aW9uJyxcbiAgICAgICAgdGl0bGU6ICfwn5SEINCf0L7QtNC/0LjRgdC60LAg0L/RgNC+0LTQu9C10L3QsCEnLFxuICAgICAgICBtZXNzYWdlOiBg0JLQsNGI0LAg0L/QvtC00L/QuNGB0LrQsCBcIiR7ZGF0YS5wbGFuTmFtZX1cIiDQv9GA0L7QtNC70LXQvdCwINC90LAgJHtkYXRhLnBlcmlvZH0hYCxcbiAgICAgICAgaWNvbjogJ/Cfko4nLFxuICAgICAgICB4cEFtb3VudDogZGF0YS54cFJld2FyZCxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gIGFzeW5jIGdldFVzZXJOb3RpZmljYXRpb25zKHVzZXJJZDogbnVtYmVyLCBsaW1pdDogbnVtYmVyID0gMjApOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogbGltaXRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbm90aWZpY2F0aW9uc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBub3RpZmljYXRpb25zOicsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgLy8g0J7RgtC80LXRgtC40YLRjCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1INC60LDQuiDQv9GA0L7Rh9C40YLQsNC90L3QvtC1XG4gIGFzeW5jIG1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBub3RpZmljYXRpb25JZCB9LFxuICAgICAgICBkYXRhOiB7IGlzUmVhZDogdHJ1ZSB9XG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIG5vdGlmaWNhdGlvbiBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vINCe0YLQvNC10YLQuNGC0Ywg0LLRgdC1INGD0LLQtdC00L7QvNC70LXQvdC40Y8g0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LVcbiAgYXN5bmMgbWFya0FsbEFzUmVhZCh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQsIGlzUmVhZDogZmFsc2UgfSxcbiAgICAgICAgZGF0YTogeyBpc1JlYWQ6IHRydWUgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBhbGwgbm90aWZpY2F0aW9ucyBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvRhSDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5XG4gIGFzeW5jIGdldFVucmVhZENvdW50KHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkLCBpc1JlYWQ6IGZhbHNlIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gY291bnRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1bnJlYWQgY291bnQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgfVxuXG4gIC8vINCj0LTQsNC70LXQvdC40LUg0YHRgtCw0YDRi9GFINGD0LLQtdC00L7QvNC70LXQvdC40LkgKNGB0YLQsNGA0YjQtSAzMCDQtNC90LXQuSlcbiAgYXN5bmMgY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZSgpXG4gICAgICB0aGlydHlEYXlzQWdvLnNldERhdGUodGhpcnR5RGF5c0Fnby5nZXREYXRlKCkgLSAzMClcbiAgICAgIFxuICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGx0OiB0aGlydHlEYXlzQWdvXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc1JlYWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYW5pbmcgdXAgb2xkIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZW1haWxTZXJ2aWNlIiwicHJpc21hIiwiTm90aWZpY2F0aW9uU2VydmljZSIsImNyZWF0ZU5vdGlmaWNhdGlvbiIsImRhdGEiLCJub3RpZmljYXRpb24iLCJjcmVhdGUiLCJ1c2VySWQiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiaXNSZWFkIiwic2VuZEVtYWlsTm90aWZpY2F0aW9uIiwiZXJyb3IiLCJjb25zb2xlIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwiZW1haWwiLCJtZXRhZGF0YSIsImxldmVsQ29uZmlnIiwic2VuZExldmVsVXBOb3RpZmljYXRpb24iLCJub3RpZnlMZXZlbFVwIiwib2xkTGV2ZWwiLCJuZXdMZXZlbCIsImljb24iLCJub3RpZnlBY2hpZXZlbWVudCIsImFjaGlldmVtZW50IiwieHBBbW91bnQiLCJ4cFJld2FyZCIsImFjaGlldmVtZW50SWQiLCJub3RpZnlYcEdhaW4iLCJzb3VyY2UiLCJkZXNjcmlwdGlvbiIsIm5vdGlmeVJlZmVycmFsIiwicmVmZXJyYWxUeXBlIiwicmVmZXJyZWROYW1lIiwiYWN0aXZpdHkiLCJub3RpZnlTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25UeXBlIiwicGxhbk5hbWUiLCJwZXJpb2QiLCJnZXRVc2VyTm90aWZpY2F0aW9ucyIsImxpbWl0Iiwibm90aWZpY2F0aW9ucyIsImZpbmRNYW55Iiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInRha2UiLCJtYXJrQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJ1cGRhdGUiLCJtYXJrQWxsQXNSZWFkIiwidXBkYXRlTWFueSIsImdldFVucmVhZENvdW50IiwiY291bnQiLCJjbGVhbnVwT2xkTm90aWZpY2F0aW9ucyIsInRoaXJ0eURheXNBZ28iLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJkZWxldGVNYW55IiwibHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/notificationService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsupport%2Ftickets%2Froute&page=%2Fapi%2Fsupport%2Ftickets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsupport%2Ftickets%2Froute.ts&appDir=D%3A%5Cmobile%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmobile&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();